<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="ko" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Spring Data R2DBC | 참조 문서 | devkuma</title>
<meta name="description" content="12. 도입 12.1. 문서 구조 참조 문서의 이 부분에서는 Spring Data R2DBC에서 제공하는 핵심 기능에 대해 설명한다.
&amp;ldquo;R2DBC 지원&amp;ldquo;은 R2DBC 모듈의 기능 세트를 소개한다.
&amp;ldquo;R2DBC Repository&amp;ldquo;는 R2DBC 저장소 지원을 소개한다.
13. R2DBC 지원 R2DBC에는 다양한 기능이 포함되어 있다.
R2DBC 드라이버 인스턴스의 Java 기반 @Configuration 클래스에 의한 Spring 구성 지원. 행과 POJO 간의 통합 객체 매핑을 사용하여 일반적인 R2DBC 작업을 수행할 때 생산성을 향상시키는 엔터티 바인딩 작업의 주요 클래스인 R2dbcEntityTemplate. Spring의 변환 서비스(Conversion Service)와 통합된 기능이 풍부한 객체 매핑.">
<meta property="og:title" content="Spring Data R2DBC | 참조 문서" />
<meta property="og:description" content="12. 도입 12.1. 문서 구조 참조 문서의 이 부분에서는 Spring Data R2DBC에서 제공하는 핵심 기능에 대해 설명한다.
&ldquo;R2DBC 지원&ldquo;은 R2DBC 모듈의 기능 세트를 소개한다.
&ldquo;R2DBC Repository&ldquo;는 R2DBC 저장소 지원을 소개한다.
13. R2DBC 지원 R2DBC에는 다양한 기능이 포함되어 있다.
R2DBC 드라이버 인스턴스의 Java 기반 @Configuration 클래스에 의한 Spring 구성 지원. 행과 POJO 간의 통합 객체 매핑을 사용하여 일반적인 R2DBC 작업을 수행할 때 생산성을 향상시키는 엔터티 바인딩 작업의 주요 클래스인 R2dbcEntityTemplate. Spring의 변환 서비스(Conversion Service)와 통합된 기능이 풍부한 객체 매핑." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.devkuma.com/docs/spring-data-r2dbc/reference/reference-documentation/" /><meta property="article:section" content="131_Programming_Spring" />
<meta property="article:published_time" content="2021-12-28T15:30:00+09:00" />
<meta property="article:modified_time" content="2021-12-28T15:30:00+09:00" />
<meta itemprop="name" content="Spring Data R2DBC | 참조 문서">
<meta itemprop="description" content="12. 도입 12.1. 문서 구조 참조 문서의 이 부분에서는 Spring Data R2DBC에서 제공하는 핵심 기능에 대해 설명한다.
&ldquo;R2DBC 지원&ldquo;은 R2DBC 모듈의 기능 세트를 소개한다.
&ldquo;R2DBC Repository&ldquo;는 R2DBC 저장소 지원을 소개한다.
13. R2DBC 지원 R2DBC에는 다양한 기능이 포함되어 있다.
R2DBC 드라이버 인스턴스의 Java 기반 @Configuration 클래스에 의한 Spring 구성 지원. 행과 POJO 간의 통합 객체 매핑을 사용하여 일반적인 R2DBC 작업을 수행할 때 생산성을 향상시키는 엔터티 바인딩 작업의 주요 클래스인 R2dbcEntityTemplate. Spring의 변환 서비스(Conversion Service)와 통합된 기능이 풍부한 객체 매핑."><meta itemprop="datePublished" content="2021-12-28T15:30:00+09:00" />
<meta itemprop="dateModified" content="2021-12-28T15:30:00+09:00" />
<meta itemprop="wordCount" content="10363">
<meta itemprop="keywords" content="Spring Data R2DBC,Spring,Java," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Spring Data R2DBC | 참조 문서"/>
<meta name="twitter:description" content="12. 도입 12.1. 문서 구조 참조 문서의 이 부분에서는 Spring Data R2DBC에서 제공하는 핵심 기능에 대해 설명한다.
&ldquo;R2DBC 지원&ldquo;은 R2DBC 모듈의 기능 세트를 소개한다.
&ldquo;R2DBC Repository&ldquo;는 R2DBC 저장소 지원을 소개한다.
13. R2DBC 지원 R2DBC에는 다양한 기능이 포함되어 있다.
R2DBC 드라이버 인스턴스의 Java 기반 @Configuration 클래스에 의한 Spring 구성 지원. 행과 POJO 간의 통합 객체 매핑을 사용하여 일반적인 R2DBC 작업을 수행할 때 생산성을 향상시키는 엔터티 바인딩 작업의 주요 클래스인 R2dbcEntityTemplate. Spring의 변환 서비스(Conversion Service)와 통합된 기능이 풍부한 객체 매핑."/>




<link rel="preload" href="/scss/main.min.695544aee9037a846071a69467a9628abd261c7078b43ce271247e13ce97907e.css" as="style">
<link href="/scss/main.min.695544aee9037a846071a69467a9628abd261c7078b43ce271247e13ce97907e.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.3.min.js"
  integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
  crossorigin="anonymous"></script>

<link rel="canonical" href="https://www.devkuma.com/docs/spring-data-r2dbc/reference/reference-documentation/">
<link rel="apple-touch-icon" href="/logo/180x180.jpg">
<link rel="apple-touch-icon" sizes="76x76" href="/logo/76x76.jpg">
<link rel="apple-touch-icon" sizes="120x120" href="/logo/120x120.jpg">
<link rel="apple-touch-icon" sizes="152x152" href="/logo/152x152.jpg">
<link rel="alternate" type="application/rss+xml" title="프로그램 개발 지식 공유, devkuma" href="https://www.devkuma.com/docs/index.xml" />

<meta name="google-site-verification" content="H-H39pWMNsr140LTp2QECNnXtOVbixbDubFbZV668hg" />
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FW3TZ3QLYR"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-FW3TZ3QLYR');
}
</script>
  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar navbar-dark js-navbar-scroll">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="#fff" stroke="none"><path d="M775 4993c-268-38-509-215-618-453-71-155-67-24-67-1986 0-1958-5-1818 65-1971 43-94 86-155 162-230 117-115 283-198 448-223 48-7 618-10 1840-8l1770 3 75 23c231 70 408 216 505 417 81 168 75 7 75 1995 0 1969 5 1824-67 1980-96 211-277 360-528 436-57 18-150 19-1845 20-982 1-1798-1-1815-3zm543-584c53-11 123-30 154-44 144-61 319-213 379-328 19-36 22-37 57-31 20 4 44 10 52 14 20 10 119 30 250 50 228 35 454 36 695 4 91-12 256-47 299-63 16-7 29-10 30-9 1 2 18 28 38 58 115 178 309 304 533 348 39 8 272 8 310 0 103-21 141-34 233-80 157-77 285-206 357-356 54-113 72-195 73-329 1-103-5-142-44-273-25-87-148-259-223-315-40-29-50-51-32-71 5-5 21-38 36-74 61-145 96-253 110-340 3-19 11-60 17-90 13-62 17-434 5-520-16-123-37-209-76-325-56-165-174-395-246-477-11-13-35-43-54-68-44-58-254-267-306-305-22-17-42-32-45-35-18-18-235-161-275-181-16-9-54-28-83-44-29-15-55-26-57-23-2 2 6 16 18 30 12 15 30 35 39 47 37 44 109 161 134 217 42 92 69 194 81 304 46 396-119 758-455 996-261 186-532 256-862 225-205-19-372-77-540-185-142-92-289-241-378-382-110-175-166-481-127-699 37-203 125-383 260-533 31-34 51-62 44-62-22 0-198 89-304 153-55 34-140 93-190 131-92 70-307 279-360 350-17 22-39 51-50 65-19 25-38 52-97 146-66 106-175 374-191 472-3 16-8 39-11 53-40 177-41 522-2 725 3 17 8 44 11 60 16 86 81 266 130 359 15 27 14 30-7 44-77 53-208 204-252 291-97 188-96 485 2 677 33 66 129 191 183 238 192 171 465 239 737 185zm1414-2174c55-12 137-48 168-72 62-48 81-69 1e2-108 36-74 28-162-19-224-31-42-138-121-162-121-10 0-20-4-23-9-23-36-255-49-366-20-283 72-386 274-224 436 55 55 149 107 215 118 19 3 35 8 37 9 9 10 225 3 274-9z"/><path d="M3885 4013c-85-13-182-63-243-126l-33-34 40-26c22-15 43-27 45-27 9 0 225-150 252-175 6-5 36-30 65-55 66-55 172-159 222-219 23-26 42-41 51-38 23 9 91 108 112 162 13 35 19 76 18 135 0 76-3 92-34 155-57 119-168 210-289 238-58 14-152 18-206 10z"/><path d="M985 3976c-92-29-162-80-221-161-62-86-79-149-72-275 6-98 31-158 1e2-234l37-41 48 55c154 179 350 348 548 472 28 18 52 33 54 35 9 6-64 75-105 99-77 45-145 62-251 62-54 0-116-6-138-12z"/></g></svg></span><span class="navbar-brand__name">devkuma</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      
			<li class="dropdown sub-menu d-none d-lg-block">
				<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class='fas fa-keyboard'></i>
          <span>Programming</span>
				</a>
        <ul class="dropdown-menu">
					
					<a class="dropdown-item" href="/docs/category/programming/design/">Design and Development</a>
					
					<a class="dropdown-item" href="/docs/category/programming/jvm/">JVM Based Programming</a>
					
					<a class="dropdown-item" href="/docs/category/programming/spring/">Spring framework</a>
					
					<a class="dropdown-item" href="/docs/category/programming/web/">Web Programming</a>
					
					<a class="dropdown-item" href="/docs/category/programming/etc/">그밖에 Programming</a>
					
					<a class="dropdown-item" href="/docs/category/programming/tools/">Programming Tools</a>
					
				</ul>
			</li>
      <li class="d-lg-none">
        <a class="nav-link" href="/docs/category/programming/" role="button">
          <span>Programming</span>
				</a>
      </li>
      
			
      
			<li class="dropdown sub-menu d-none d-lg-block">
				<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class='fas fa-database'></i>
          <span>Data Science</span>
				</a>
        <ul class="dropdown-menu">
					
					<a class="dropdown-item" href="/docs/category/data-science/big-data/">Big Data</a>
					
					<a class="dropdown-item" href="/docs/category/data-science/rdb/">Relational Database</a>
					
					<a class="dropdown-item" href="/docs/category/data-science/nosql/">NoSQL Database</a>
					
					<a class="dropdown-item" href="/docs/category/data-science/graph-db/">Graph Databse</a>
					
				</ul>
			</li>
      <li class="d-lg-none">
        <a class="nav-link" href="/docs/category/data-science/" role="button">
          <span>Data Science</span>
				</a>
      </li>
      
			
      
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/docs/category/dev-ops/" >
          <span class="d-none d-lg-inline"><i class='fas fa-cogs'></i></span>
          <span>DevOps</span>
          
        </a>
			</li>
			
      
			<li class="dropdown sub-menu d-none d-lg-block">
				<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class='fas fa-desktop'></i>
          <span>Computer</span>
				</a>
        <ul class="dropdown-menu">
					
					<a class="dropdown-item" href="/docs/category/computer/basic/">컴퓨터 기본 지식</a>
					
					<a class="dropdown-item" href="/docs/category/operating-system/">Operating System</a>
					
					<a class="dropdown-item" href="/docs/category/network/">Network</a>
					
				</ul>
			</li>
      <li class="d-lg-none">
        <a class="nav-link" href="/docs/category/computer/" role="button">
          <span>Computer</span>
				</a>
      </li>
      
			
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search">
  <div class="td-search__icon"></div>
  <input type="search" class="td-search__input form-control td-search-input" placeholder="사이트에서 검색…" aria-label="사이트에서 검색…" autocomplete="off">
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
  <script>
    $(function() {
    $("#td-section-nav a").removeClass("active");
    $("#td-section-nav #m-docsspring-data-r2dbcreferencereference-documentation").addClass("active"); 
    $("#td-section-nav #m-docsspring-data-r2dbcreferencereference-documentation-li span").addClass("td-sidebar-nav-active-item"); 
    $("#td-section-nav #m-docsspring-data-r2dbcreferencereference-documentation").parents("li").addClass("active-path"); 
    $("#td-section-nav li.active-path").addClass("show"); 
    $("#td-section-nav li.active-path").children("input").prop('checked', true);
    $("#td-section-nav #m-docsspring-data-r2dbcreferencereference-documentation-li").siblings("li").addClass("show");  
    $("#td-section-nav #m-docsspring-data-r2dbcreferencereference-documentation-li").children("ul").children("li").addClass("show");  
    $("#td-sidebar-menu").toggleClass("d-none"); 
    });
  </script>
  <div id="td-sidebar-menu" class="td-sidebar__inner d-none">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search">
  <div class="td-search__icon"></div>
  <input type="search" class="td-search__input form-control td-search-input" placeholder="사이트에서 검색…" aria-label="사이트에서 검색…" autocomplete="off">
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscategoryprogrammingspring-li">
  <a href="/docs/category/programming/spring/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docscategoryprogrammingspring"><span class="">Spring Framework</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-boot-li">
  <input type="checkbox" id="m-docsspring-boot-check"/>
  <label for="m-docsspring-boot-check"><a href="/docs/spring-boot/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-boot"><span class="">Spring Boot</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootoverview-li">
  <input type="checkbox" id="m-docsspring-bootoverview-check"/>
  <label for="m-docsspring-bootoverview-check"><a href="/docs/spring-boot/overview/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootoverview"><span class="">Spring Boot 개요</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-boothello-world-li">
  <input type="checkbox" id="m-docsspring-boothello-world-check"/>
  <label for="m-docsspring-boothello-world-check"><a href="/docs/spring-boot/hello-world/" title="Spring Boot Hello World" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-boothello-world"><span class="">Hello World</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootinitializer-li">
  <input type="checkbox" id="m-docsspring-bootinitializer-check"/>
  <label for="m-docsspring-bootinitializer-check"><a href="/docs/spring-boot/initializer/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootinitializer"><span class="">Spring 초기 프로젝트 생성</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootweb-application-run-li">
  <input type="checkbox" id="m-docsspring-bootweb-application-run-check"/>
  <label for="m-docsspring-bootweb-application-run-check"><a href="/docs/spring-boot/web-application-run/" title="Spring Boot Web 어플리케이션 기동" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootweb-application-run"><span class="">Web 어플리케이션 기동</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootguick-guide-li">
  <input type="checkbox" id="m-docsspring-bootguick-guide-check"/>
  <label for="m-docsspring-bootguick-guide-check"><a href="/docs/spring-boot/guick-guide/" title="Kotlin으로 Spring Boot Web 만들기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootguick-guide"><span class="">Spring Boot Kotlin으로 만들기</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootjava-bean-li">
  <input type="checkbox" id="m-docsspring-bootjava-bean-check"/>
  <label for="m-docsspring-bootjava-bean-check"><a href="/docs/spring-boot/java-bean/" title="Spring Boot Java Bean 정의" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootjava-bean"><span class="">Java Bean 정의</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootserver-port-li">
  <input type="checkbox" id="m-docsspring-bootserver-port-check"/>
  <label for="m-docsspring-bootserver-port-check"><a href="/docs/spring-boot/server-port/" title="Spring Boot 서버 포트 번호 변경" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootserver-port"><span class="">서버 포트 번호 변경</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootmvc-li">
  <input type="checkbox" id="m-docsspring-bootmvc-check"/>
  <label for="m-docsspring-bootmvc-check"><a href="/docs/spring-boot/mvc/" title="Spring Boot | Spring MVC의 간단한 사용법" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootmvc"><span class="">Spring MVC의 간단한 사용법</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootexception-handling-li">
  <input type="checkbox" id="m-docsspring-bootexception-handling-check"/>
  <label for="m-docsspring-bootexception-handling-check"><a href="/docs/spring-boot/exception-handling/" title="Spring Boot 예외 처리" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootexception-handling"><span class="">예외 처리</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootstatic-file-li">
  <input type="checkbox" id="m-docsspring-bootstatic-file-check"/>
  <label for="m-docsspring-bootstatic-file-check"><a href="/docs/spring-boot/static-file/" title="Spring Boot 정적(static) 파일을 배치하기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootstatic-file"><span class="">정적(static) 파일</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootwebjars-li">
  <input type="checkbox" id="m-docsspring-bootwebjars-check"/>
  <label for="m-docsspring-bootwebjars-check"><a href="/docs/spring-boot/webjars/" title="Spring Boot | WebJars 이용하기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootwebjars"><span class="">WebJars 이용하기</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootthymeleaf-li">
  <input type="checkbox" id="m-docsspring-bootthymeleaf-check"/>
  <label for="m-docsspring-bootthymeleaf-check"><a href="/docs/spring-boot/thymeleaf/" title="Spring Boot | Thymeleaf 엔진 사용" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootthymeleaf"><span class="">Thymeleaf 엔진 사용</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootspringloaded-li">
  <input type="checkbox" id="m-docsspring-bootspringloaded-check"/>
  <label for="m-docsspring-bootspringloaded-check"><a href="/docs/spring-boot/springloaded/" title="Spring Boot 배포" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootspringloaded"><span class="">배포</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootexternalized-configuration-li">
  <input type="checkbox" id="m-docsspring-bootexternalized-configuration-check"/>
  <label for="m-docsspring-bootexternalized-configuration-check"><a href="/docs/spring-boot/externalized-configuration/" title="Spring Boot 외부 설정" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootexternalized-configuration"><span class="">외부 설정</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootsend-mail-li">
  <input type="checkbox" id="m-docsspring-bootsend-mail-check"/>
  <label for="m-docsspring-bootsend-mail-check"><a href="/docs/spring-boot/send-mail/" title="Spring Boot 메일 송신" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootsend-mail"><span class="">메일 송신</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootlogging-li">
  <input type="checkbox" id="m-docsspring-bootlogging-check"/>
  <label for="m-docsspring-bootlogging-check"><a href="/docs/spring-boot/logging/" title="Spring Boot 로깅(Logging)" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootlogging"><span class="">로깅(Logging)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootendpoints-li">
  <input type="checkbox" id="m-docsspring-bootendpoints-check"/>
  <label for="m-docsspring-bootendpoints-check"><a href="/docs/spring-boot/endpoints/" title="Spring Boot | 엔드 포인트(Endpoints)" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootendpoints"><span class="">엔드 포인트(Endpoints)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootbanner-mode-li">
  <input type="checkbox" id="m-docsspring-bootbanner-mode-check"/>
  <label for="m-docsspring-bootbanner-mode-check"><a href="/docs/spring-boot/banner-mode/" title="Spring Boot 시작 배너를 표시하지 않기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootbanner-mode"><span class="">시작 배너를 표시하지 않기</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootwar-li">
  <input type="checkbox" id="m-docsspring-bootwar-check"/>
  <label for="m-docsspring-bootwar-check"><a href="/docs/spring-boot/war/" title="Spring Boot | war 파일 만들기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootwar"><span class="">war 파일 만들기</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootqualifier-li">
  <input type="checkbox" id="m-docsspring-bootqualifier-check"/>
  <label for="m-docsspring-bootqualifier-check"><a href="/docs/spring-boot/qualifier/" title="Spring Boot 한정자(Qualifier)" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootqualifier"><span class="">한정자(Qualifier)</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-framework-li">
  <input type="checkbox" id="m-docsspring-framework-check"/>
  <label for="m-docsspring-framework-check"><a href="/docs/spring-framework/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-framework"><span class="">Spring Framework</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-frameworkoverview-li">
  <input type="checkbox" id="m-docsspring-frameworkoverview-check"/>
  <label for="m-docsspring-frameworkoverview-check"><a href="/docs/spring-framework/overview/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-frameworkoverview"><span class="">Spring 개요</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-frameworkcreate-project-li">
  <input type="checkbox" id="m-docsspring-frameworkcreate-project-check"/>
  <label for="m-docsspring-frameworkcreate-project-check"><a href="/docs/spring-framework/create-project/" title="Spring 프로젝트 생성" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-frameworkcreate-project"><span class="">프로젝트 생성</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-frameworkdi-li">
  <input type="checkbox" id="m-docsspring-frameworkdi-check"/>
  <label for="m-docsspring-frameworkdi-check"><a href="/docs/spring-framework/di/" title="Spring DI(Dependency Injection)와 Bean" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-frameworkdi"><span class="">Spring DI와 Bean</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-frameworkannotation-di-li">
  <input type="checkbox" id="m-docsspring-frameworkannotation-di-check"/>
  <label for="m-docsspring-frameworkannotation-di-check"><a href="/docs/spring-framework/annotation-di/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-frameworkannotation-di"><span class="">Spring 어노테이션으로 DI 구현</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-frameworkaop-li">
  <input type="checkbox" id="m-docsspring-frameworkaop-check"/>
  <label for="m-docsspring-frameworkaop-check"><a href="/docs/spring-framework/aop/" title="Spring AOP(Aspect Oriented Programming)" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-frameworkaop"><span class="">Spring AOP</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-frameworkaspectj-li">
  <input type="checkbox" id="m-docsspring-frameworkaspectj-check"/>
  <label for="m-docsspring-frameworkaspectj-check"><a href="/docs/spring-framework/aspectj/" title="Spring AspectJ 이용" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-frameworkaspectj"><span class="">Spring AspectJ</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-frameworkbean-li">
  <input type="checkbox" id="m-docsspring-frameworkbean-check"/>
  <label for="m-docsspring-frameworkbean-check"><a href="/docs/spring-framework/bean/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-frameworkbean"><span class="">Spring Bean</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bean-injection-li">
  <input type="checkbox" id="m-docsspring-bean-injection-check"/>
  <label for="m-docsspring-bean-injection-check"><a href="/docs/spring-bean-injection/" title="Spring 의존 자동 주입 @Primary, @Qualifier" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bean-injection"><span class="">Spring 의존 자동 주입</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-frameworkmvc-li">
  <input type="checkbox" id="m-docsspring-frameworkmvc-check"/>
  <label for="m-docsspring-frameworkmvc-check"><a href="/docs/spring-framework/mvc/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-frameworkmvc"><span class="">Spring MVC</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-frameworkpsa-li">
  <input type="checkbox" id="m-docsspring-frameworkpsa-check"/>
  <label for="m-docsspring-frameworkpsa-check"><a href="/docs/spring-framework/psa/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-frameworkpsa"><span class="">Spring PSA</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-web-reactive-li">
  <input type="checkbox" id="m-docsspring-web-reactive-check"/>
  <label for="m-docsspring-web-reactive-check"><a href="/docs/spring-web-reactive/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-web-reactive"><span class="">Spring Web Reactive</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-web-reactivereference-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference-check"/>
  <label for="m-docsspring-web-reactivereference-check"><a href="/docs/spring-web-reactive/reference/" title="Spring Web Reactive | 공식 레퍼런스 번역" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-web-reactivereference"><span class="">공식 레퍼런스 번역</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-web-reactivereference1-spring-webflux-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference1-spring-webflux-check"/>
  <label for="m-docsspring-web-reactivereference1-spring-webflux-check"><a href="/docs/spring-web-reactive/reference/1-spring-webflux/" title="Spring Web Reactive | 1. Spring WebFlux" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-web-reactivereference1-spring-webflux"><span class="">1. Spring WebFlux</span></a></label>
  
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference1-1-eab09cec9a94-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference1-1-eab09cec9a94-check"/>
  <label for="m-docsspring-web-reactivereference1-1-eab09cec9a94-check"><a href="/docs/spring-web-reactive/reference/1-1-%EA%B0%9C%EC%9A%94/" title="Spring Web Reactive | 1. Spring WebFlux | 1.1. 개요" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference1-1-eab09cec9a94"><span class="">1.1. 개요</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference1-2-reactive-core-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference1-2-reactive-core-check"/>
  <label for="m-docsspring-web-reactivereference1-2-reactive-core-check"><a href="/docs/spring-web-reactive/reference/1-2-reactive-core/" title="Spring Web Reactive | 1. Spring WebFlux | 1.2. Reactive Core" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference1-2-reactive-core"><span class="">1.2. Reactive Core</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereferencereference1-3-dispatcherhandler-li">
  <input type="checkbox" id="m-docsspring-web-reactivereferencereference1-3-dispatcherhandler-check"/>
  <label for="m-docsspring-web-reactivereferencereference1-3-dispatcherhandler-check"><a href="/docs/spring-web-reactive/reference/reference/1-3-dispatcherhandler/" title="Spring Web Reactive | 1. Spring WebFlux | 1.3. DispatcherHandler" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereferencereference1-3-dispatcherhandler"><span class="">1.3. DispatcherHandler</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereferencereference1-4-annotated-controllers-1-li">
  <input type="checkbox" id="m-docsspring-web-reactivereferencereference1-4-annotated-controllers-1-check"/>
  <label for="m-docsspring-web-reactivereferencereference1-4-annotated-controllers-1-check"><a href="/docs/spring-web-reactive/reference/reference/1-4-annotated-controllers-1/" title="Spring Web Reactive | 1. Spring WebFlux | 1.4. Annotated Controllers #1" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereferencereference1-4-annotated-controllers-1"><span class="">1.4. Annotated Controllers #1</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference1-4-annotated-controllers-2-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference1-4-annotated-controllers-2-check"/>
  <label for="m-docsspring-web-reactivereference1-4-annotated-controllers-2-check"><a href="/docs/spring-web-reactive/reference/1-4-annotated-controllers-2/" title="Spring Web Reactive | 1. Spring WebFlux | 1.4. Annotated Controllers #2" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference1-4-annotated-controllers-2"><span class="">1.4. Annotated Controllers #2</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference1-5-functional-endpoints-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference1-5-functional-endpoints-check"/>
  <label for="m-docsspring-web-reactivereference1-5-functional-endpoints-check"><a href="/docs/spring-web-reactive/reference/1-5-functional-endpoints/" title="Spring Web Reactive | 1. Spring WebFlux | 1.5. Functional Endpoints" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference1-5-functional-endpoints"><span class="">1.5. Functional Endpoints</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference1-6-uri-eba781ed81ac-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference1-6-uri-eba781ed81ac-check"/>
  <label for="m-docsspring-web-reactivereference1-6-uri-eba781ed81ac-check"><a href="/docs/spring-web-reactive/reference/1-6-uri-%EB%A7%81%ED%81%AC/" title="Spring Web Reactive | 1. Spring WebFlux | 1.6. URI 링크" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference1-6-uri-eba781ed81ac"><span class="">1.6. URI 링크</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference1-7-cors-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference1-7-cors-check"/>
  <label for="m-docsspring-web-reactivereference1-7-cors-check"><a href="/docs/spring-web-reactive/reference/1-7-cors/" title="Spring Web Reactive | 1. Spring WebFlux | 1.7. CORS" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference1-7-cors"><span class="">1.7. CORS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference1-8-web-ebb3b4ec9588-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference1-8-web-ebb3b4ec9588-check"/>
  <label for="m-docsspring-web-reactivereference1-8-web-ebb3b4ec9588-check"><a href="/docs/spring-web-reactive/reference/1-8-web-%EB%B3%B4%EC%95%88/" title="Spring Web Reactive | 1. Spring WebFlux | 1.8. Web 보안" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference1-8-web-ebb3b4ec9588"><span class="">1.8. Web 보안</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference1-9-view-technologies-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference1-9-view-technologies-check"/>
  <label for="m-docsspring-web-reactivereference1-9-view-technologies-check"><a href="/docs/spring-web-reactive/reference/1-9-view-technologies/" title="Spring Web Reactive | 1. Spring WebFlux | 1.9. View Technologies" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference1-9-view-technologies"><span class="">1.9. View Technologies</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference1-10-http-ecba90ec8bb1-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference1-10-http-ecba90ec8bb1-check"/>
  <label for="m-docsspring-web-reactivereference1-10-http-ecba90ec8bb1-check"><a href="/docs/spring-web-reactive/reference/1-10-http-%EC%BA%90%EC%8B%B1/" title="Spring Web Reactive | 1. Spring WebFlux | 1.10. HTTP 캐싱" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference1-10-http-ecba90ec8bb1"><span class="">1.10. HTTP 캐싱</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference1-11-webflux-config-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference1-11-webflux-config-check"/>
  <label for="m-docsspring-web-reactivereference1-11-webflux-config-check"><a href="/docs/spring-web-reactive/reference/1-11-webflux-config/" title="Spring Web Reactive | 1. Spring WebFlux | 1.11. WebFlux Config" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference1-11-webflux-config"><span class="">1.11. WebFlux Config</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference1-12-http2-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference1-12-http2-check"/>
  <label for="m-docsspring-web-reactivereference1-12-http2-check"><a href="/docs/spring-web-reactive/reference/1-12-http/2/" title="Spring Web Reactive | 1. Spring WebFlux | 1.12. HTTP/2" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference1-12-http2"><span class="">1.12. HTTP/2</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-web-reactivereference2-webclient-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference2-webclient-check"/>
  <label for="m-docsspring-web-reactivereference2-webclient-check"><a href="/docs/spring-web-reactive/reference/2-webclient/" title="Spring Web Reactive | 2. WebClient" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-web-reactivereference2-webclient"><span class="">2. WebClient</span></a></label>
  
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference2-1-eab5acec84b1-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference2-1-eab5acec84b1-check"/>
  <label for="m-docsspring-web-reactivereference2-1-eab5acec84b1-check"><a href="/docs/spring-web-reactive/reference/2-1-%EA%B5%AC%EC%84%B1/" title="Spring Web Reactive | 2. WebClient | 2.1. 구성" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference2-1-eab5acec84b1"><span class="">2.1. 구성</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference2-2-retrieve-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference2-2-retrieve-check"/>
  <label for="m-docsspring-web-reactivereference2-2-retrieve-check"><a href="/docs/spring-web-reactive/reference/2-2-retrieve/" title="Spring Web Reactive | 2. WebClient | 2.2. retrieve()" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference2-2-retrieve"><span class="">2.2. retrieve()</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference2-3-exchange-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference2-3-exchange-check"/>
  <label for="m-docsspring-web-reactivereference2-3-exchange-check"><a href="/docs/spring-web-reactive/reference/2-3-exchange/" title="Spring Web Reactive | 2. WebClient | 2.3. Exchange" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference2-3-exchange"><span class="">2.3. Exchange</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference2-4-request-body-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference2-4-request-body-check"/>
  <label for="m-docsspring-web-reactivereference2-4-request-body-check"><a href="/docs/spring-web-reactive/reference/2-4-request-body/" title="Spring Web Reactive | 2. WebClient | 2.4. Request Body" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference2-4-request-body"><span class="">2.4. Request Body</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference2-5-filters-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference2-5-filters-check"/>
  <label for="m-docsspring-web-reactivereference2-5-filters-check"><a href="/docs/spring-web-reactive/reference/2-5-filters/" title="Spring Web Reactive | 2. WebClient | 2.5. Filters" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference2-5-filters"><span class="">2.5. Filters</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference2-6-attributes-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference2-6-attributes-check"/>
  <label for="m-docsspring-web-reactivereference2-6-attributes-check"><a href="/docs/spring-web-reactive/reference/2-6-attributes/" title="Spring Web Reactive | 2. WebClient | 2.6. Attributes" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference2-6-attributes"><span class="">2.6. Attributes</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference2-7-context-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference2-7-context-check"/>
  <label for="m-docsspring-web-reactivereference2-7-context-check"><a href="/docs/spring-web-reactive/reference/2-7-context/" title="Spring Web Reactive | 2. WebClient | 2.7. Context" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference2-7-context"><span class="">2.7. Context</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference2-8-synchronous-use-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference2-8-synchronous-use-check"/>
  <label for="m-docsspring-web-reactivereference2-8-synchronous-use-check"><a href="/docs/spring-web-reactive/reference/2-8-synchronous-use/" title="Spring Web Reactive | 2. WebClient | 2.8. Synchronous Use" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference2-8-synchronous-use"><span class="">2.8. Synchronous Use</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference2-9-testing-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference2-9-testing-check"/>
  <label for="m-docsspring-web-reactivereference2-9-testing-check"><a href="/docs/spring-web-reactive/reference/2-9-testing/" title="Spring Web Reactive | 2. WebClient | 2.9. Testing" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference2-9-testing"><span class="">2.9. Testing</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-web-reactivereference3-websocket-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference3-websocket-check"/>
  <label for="m-docsspring-web-reactivereference3-websocket-check"><a href="/docs/spring-web-reactive/reference/3-websocket/" title="Spring Web Reactive | 3. WebSocket" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-web-reactivereference3-websocket"><span class="">3. WebSocket</span></a></label>
  
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference3-1-websocket-eab09cec9a94-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference3-1-websocket-eab09cec9a94-check"/>
  <label for="m-docsspring-web-reactivereference3-1-websocket-eab09cec9a94-check"><a href="/docs/spring-web-reactive/reference/3-1-websocket-%EA%B0%9C%EC%9A%94/" title="Spring Web Reactive | 3. WebSocket | 3.1. WebSocket 개요" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference3-1-websocket-eab09cec9a94"><span class="">3.1. WebSocket 개요</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference3-2-websocket-api-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference3-2-websocket-api-check"/>
  <label for="m-docsspring-web-reactivereference3-2-websocket-api-check"><a href="/docs/spring-web-reactive/reference/3-2-websocket-api/" title="Spring Web Reactive | 3. WebSocket | 3.2. WebSocket API" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference3-2-websocket-api"><span class="">3.2. WebSocket API</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference4-testing-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference4-testing-check"/>
  <label for="m-docsspring-web-reactivereference4-testing-check"><a href="/docs/spring-web-reactive/reference/4-testing/" title="Spring Web Reactive | 4. Testing" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-web-reactivereference4-testing"><span class="">4. Testing</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-web-reactivereference5-rsocket-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference5-rsocket-check"/>
  <label for="m-docsspring-web-reactivereference5-rsocket-check"><a href="/docs/spring-web-reactive/reference/5-rsocket/" title="Spring Web Reactive | 5. RSocket" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-web-reactivereference5-rsocket"><span class="">5. RSocket</span></a></label>
  
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference5-1-eab09cec9a94-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference5-1-eab09cec9a94-check"/>
  <label for="m-docsspring-web-reactivereference5-1-eab09cec9a94-check"><a href="/docs/spring-web-reactive/reference/5-1-%EA%B0%9C%EC%9A%94/" title="Spring Web Reactive | 5. RSocket | 5.1. 개요" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference5-1-eab09cec9a94"><span class="">5.1. 개요</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference5-2-rsocketrequester-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference5-2-rsocketrequester-check"/>
  <label for="m-docsspring-web-reactivereference5-2-rsocketrequester-check"><a href="/docs/spring-web-reactive/reference/5-2-rsocketrequester/" title="Spring Web Reactive | 5. RSocket | 5.2. RSocketRequester" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference5-2-rsocketrequester"><span class="">5.2. RSocketRequester</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference5-3-annotated-responders-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference5-3-annotated-responders-check"/>
  <label for="m-docsspring-web-reactivereference5-3-annotated-responders-check"><a href="/docs/spring-web-reactive/reference/5-3-annotated-responders/" title="Spring Web Reactive | 5. RSocket | 5.3. Annotated Responders" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference5-3-annotated-responders"><span class="">5.3. Annotated Responders</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference5-4-metadataextractor-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference5-4-metadataextractor-check"/>
  <label for="m-docsspring-web-reactivereference5-4-metadataextractor-check"><a href="/docs/spring-web-reactive/reference/5-4-metadataextractor/" title="Spring Web Reactive | 5. RSocket | 5.4. MetadataExtractor" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-web-reactivereference5-4-metadataextractor"><span class="">5.4. MetadataExtractor</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-web-reactivereference6-reactive-libraries-li">
  <input type="checkbox" id="m-docsspring-web-reactivereference6-reactive-libraries-check"/>
  <label for="m-docsspring-web-reactivereference6-reactive-libraries-check"><a href="/docs/spring-web-reactive/reference/6-reactive-libraries/" title="Spring Web Reactive | 6. Reactive Libraries" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-web-reactivereference6-reactive-libraries"><span class="">6. Reactive Libraries</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-webflux-li">
  <input type="checkbox" id="m-docsspring-webflux-check"/>
  <label for="m-docsspring-webflux-check"><a href="/docs/spring-webflux/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-webflux"><span class="">Spring WebFlux의 간단한 사용법</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-data-li">
  <input type="checkbox" id="m-docsspring-data-check"/>
  <label for="m-docsspring-data-check"><a href="/docs/spring-data/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-data"><span class="">Spring Data</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootjdbc-li">
  <input type="checkbox" id="m-docsspring-bootjdbc-check"/>
  <label for="m-docsspring-bootjdbc-check"><a href="/docs/spring-boot/jdbc/" title="Spring Boot | 데이터베이스 접근 | Hello World" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootjdbc"><span class="">Hello World</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootec99b8ebb680-eb8db0ec9db4ed84b0ebb2a0ec9db4ec8aa4-ec9db4ec9aa9-li">
  <input type="checkbox" id="m-docsspring-bootec99b8ebb680-eb8db0ec9db4ed84b0ebb2a0ec9db4ec8aa4-ec9db4ec9aa9-check"/>
  <label for="m-docsspring-bootec99b8ebb680-eb8db0ec9db4ed84b0ebb2a0ec9db4ec8aa4-ec9db4ec9aa9-check"><a href="/docs/spring-boot/%EC%99%B8%EB%B6%80-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%9D%B4%EC%9A%A9/" title="Spring Boot | 데이터베이스 접근 | 외부 데이터베이스 이용" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootec99b8ebb680-eb8db0ec9db4ed84b0ebb2a0ec9db4ec8aa4-ec9db4ec9aa9"><span class="">외부 데이터베이스 이용</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootjpa-li">
  <input type="checkbox" id="m-docsspring-bootjpa-check"/>
  <label for="m-docsspring-bootjpa-check"><a href="/docs/spring-boot/jpa/" title="Spring Boot | 데이터베이스 접근 | JPA 이용" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootjpa"><span class="">JPA 이용</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-boottransactional-li">
  <input type="checkbox" id="m-docsspring-boottransactional-check"/>
  <label for="m-docsspring-boottransactional-check"><a href="/docs/spring-boot/transactional/" title="Spring Boot | 데이터베이스 접근 | 선언적 트랜잭션 사용" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-boottransactional"><span class="">선언적 트랜잭션 사용</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootflyway-li">
  <input type="checkbox" id="m-docsspring-bootflyway-check"/>
  <label for="m-docsspring-bootflyway-check"><a href="/docs/spring-boot/flyway/" title="Spring Boot | 데이터베이스 접근 | Flyway으로 마이그레이션" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootflyway"><span class="">Flyway으로 마이그레이션</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootebb3b5ec8898-eb8db0ec9db4ed84b0-ec868cec8aa4-ec82acec9aa9-li">
  <input type="checkbox" id="m-docsspring-bootebb3b5ec8898-eb8db0ec9db4ed84b0-ec868cec8aa4-ec82acec9aa9-check"/>
  <label for="m-docsspring-bootebb3b5ec8898-eb8db0ec9db4ed84b0-ec868cec8aa4-ec82acec9aa9-check"><a href="/docs/spring-boot/%EB%B3%B5%EC%88%98-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%86%8C%EC%8A%A4-%EC%82%AC%EC%9A%A9/" title="Spring Boot | 데이터베이스 접근 | 복수 데이터 소스 사용" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootebb3b5ec8898-eb8db0ec9db4ed84b0-ec868cec8aa4-ec82acec9aa9"><span class="">복수 데이터 소스 사용</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-frameworkspring-data-jpa-li">
  <input type="checkbox" id="m-docsspring-frameworkspring-data-jpa-check"/>
  <label for="m-docsspring-frameworkspring-data-jpa-check"><a href="/docs/spring-framework/spring-data-jpa/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-frameworkspring-data-jpa"><span class="">Spring Data JPA 이용</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-frameworkcrud-li">
  <input type="checkbox" id="m-docsspring-frameworkcrud-check"/>
  <label for="m-docsspring-frameworkcrud-check"><a href="/docs/spring-framework/crud/" title="Spring CRUD 기본" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-frameworkcrud"><span class="">CRUD 기본</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-frameworkjparepository-li">
  <input type="checkbox" id="m-docsspring-frameworkjparepository-check"/>
  <label for="m-docsspring-frameworkjparepository-check"><a href="/docs/spring-framework/jparepository/" title="Spring JpaRepository" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-frameworkjparepository"><span class="">JpaRepository</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-data-jpa-li">
  <input type="checkbox" id="m-docsspring-data-jpa-check"/>
  <label for="m-docsspring-data-jpa-check"><a href="/docs/spring-data-jpa/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-data-jpa"><span class="">Spring Data JPA</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-data-jpaready-li">
  <input type="checkbox" id="m-docsspring-data-jpaready-check"/>
  <label for="m-docsspring-data-jpaready-check"><a href="/docs/spring-data-jpa/ready/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-data-jpaready"><span class="">JPA 이용 준비</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-data-jpaquery-method-li">
  <input type="checkbox" id="m-docsspring-data-jpaquery-method-check"/>
  <label for="m-docsspring-data-jpaquery-method-check"><a href="/docs/spring-data-jpa/query-Method/" title="JPA 쿼리 메서드(Query Method)" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-data-jpaquery-method"><span class="">쿼리 메서드(Query Method)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-data-jpaauditing-li">
  <input type="checkbox" id="m-docsspring-data-jpaauditing-check"/>
  <label for="m-docsspring-data-jpaauditing-check"><a href="/docs/spring-data-jpa/auditing/" title="JPA Auditing" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-data-jpaauditing"><span class="">Auditing</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-data-jpapage-li">
  <input type="checkbox" id="m-docsspring-data-jpapage-check"/>
  <label for="m-docsspring-data-jpapage-check"><a href="/docs/spring-data-jpa/page/" title="JPA 페이징과 정렬" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-data-jpapage"><span class="">페이징과 정렬</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-data-jpaquery-dsl-li">
  <input type="checkbox" id="m-docsspring-data-jpaquery-dsl-check"/>
  <label for="m-docsspring-data-jpaquery-dsl-check"><a href="/docs/spring-data-jpa/query-dsl/" title="JPA QueryDSL 설정" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-data-jpaquery-dsl"><span class="">QueryDSL 설정</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-data-r2dbc-li">
  <input type="checkbox" id="m-docsspring-data-r2dbc-check"/>
  <label for="m-docsspring-data-r2dbc-check"><a href="/docs/spring-data-r2dbc/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-data-r2dbc"><span class="">Spring Data R2DBC</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-data-r2dbcreference-li">
  <input type="checkbox" id="m-docsspring-data-r2dbcreference-check"/>
  <label for="m-docsspring-data-r2dbcreference-check"><a href="/docs/spring-data-r2dbc/reference/" title="Spring Data R2DBC | 공식 레퍼런스 번역" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-data-r2dbcreference"><span class="">공식 레퍼런스 번역</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-data-r2dbcreferencepreface-li">
  <input type="checkbox" id="m-docsspring-data-r2dbcreferencepreface-check"/>
  <label for="m-docsspring-data-r2dbcreferencepreface-check"><a href="/docs/spring-data-r2dbc/reference/preface/" title="Spring Data R2DBC | 머리말" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-data-r2dbcreferencepreface"><span class="">머리말</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-data-r2dbcreferencereference-documentation-li">
  <input type="checkbox" id="m-docsspring-data-r2dbcreferencereference-documentation-check"/>
  <label for="m-docsspring-data-r2dbcreferencereference-documentation-check"><a href="/docs/spring-data-r2dbc/reference/reference-documentation/" title="Spring Data R2DBC | 참조 문서" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-data-r2dbcreferencereference-documentation"><span class="">참조 문서</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-data-r2dbcreferenceappendix-li">
  <input type="checkbox" id="m-docsspring-data-r2dbcreferenceappendix-check"/>
  <label for="m-docsspring-data-r2dbcreferenceappendix-check"><a href="/docs/spring-data-r2dbc/reference/appendix/" title="Spring Data R2DBC | 부록" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-data-r2dbcreferenceappendix"><span class="">부록</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-data-etc-li">
  <input type="checkbox" id="m-docsspring-data-etc-check"/>
  <label for="m-docsspring-data-etc-check"><a href="/docs/spring-data-etc/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-data-etc"><span class="">Spring Data ETC</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-data-neo4jaccessing-data-neo4j-li">
  <input type="checkbox" id="m-docsspring-data-neo4jaccessing-data-neo4j-check"/>
  <label for="m-docsspring-data-neo4jaccessing-data-neo4j-check"><a href="/docs/spring-data-neo4j/accessing-data-neo4j/" title="Spring Data Neo4j - Neo4j 데이터 추가 및 조회" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-data-neo4jaccessing-data-neo4j"><span class="">Spring Data Neo4j</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-data-mongopagination-li">
  <input type="checkbox" id="m-docsspring-data-mongopagination-check"/>
  <label for="m-docsspring-data-mongopagination-check"><a href="/docs/spring-data-mongo/pagination/" title="Spring Data Mongo Template Pagination" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-data-mongopagination"><span class="">Mongo Template Pagination</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-data-elasticsearchquick-guide-li">
  <input type="checkbox" id="m-docsspring-data-elasticsearchquick-guide-check"/>
  <label for="m-docsspring-data-elasticsearchquick-guide-check"><a href="/docs/spring-data-elasticsearch/quick-guide/" title="Kotlin으로 Spring Data Elasticsearch 만들기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-data-elasticsearchquick-guide"><span class="">Spring Data Elasticsearch</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-security-li">
  <input type="checkbox" id="m-docsspring-security-check"/>
  <label for="m-docsspring-security-check"><a href="/docs/spring-security/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-security"><span class="">Spring Security</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-securityspring-securityec9db4eb9e80-li">
  <input type="checkbox" id="m-docsspring-securityspring-securityec9db4eb9e80-check"/>
  <label for="m-docsspring-securityspring-securityec9db4eb9e80-check"><a href="/docs/spring-security/spring-security%EC%9D%B4%EB%9E%80/" title="Spring Security | Spring Security이란?" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-securityspring-securityec9db4eb9e80"><span class="">Spring Security이란?</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-securityauthentication-authorization-li">
  <input type="checkbox" id="m-docsspring-securityauthentication-authorization-check"/>
  <label for="m-docsspring-securityauthentication-authorization-check"><a href="/docs/spring-security/authentication-authorization/" title="Spring Security | Spring Security이란? | 인증(Authentication), 권한 부여(Authorization)" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-securityauthentication-authorization"><span class="">인증(Authentication), 권한 부여(Authorization)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-securityhello-world-li">
  <input type="checkbox" id="m-docsspring-securityhello-world-check"/>
  <label for="m-docsspring-securityhello-world-check"><a href="/docs/spring-security/hello-world/" title="Spring Security | Spring Security이란? | Hello World" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-securityhello-world"><span class="">Hello World</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-securityjava-configuration-li">
  <input type="checkbox" id="m-docsspring-securityjava-configuration-check"/>
  <label for="m-docsspring-securityjava-configuration-check"><a href="/docs/spring-security/java-configuration/" title="Spring Security | Spring Security이란? | Java Configuration" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-securityjava-configuration"><span class="">Java Configuration</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-securityweb-xml-ec9786ec9db4-li">
  <input type="checkbox" id="m-docsspring-securityweb-xml-ec9786ec9db4-check"/>
  <label for="m-docsspring-securityweb-xml-ec9786ec9db4-check"><a href="/docs/spring-security/web-xml-%EC%97%86%EC%9D%B4/" title="Spring Security | Spring Security이란? | web.xml 없이" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-securityweb-xml-ec9786ec9db4"><span class="">web.xml 없이</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-securityec9db8eca69d-li">
  <input type="checkbox" id="m-docsspring-securityec9db8eca69d-check"/>
  <label for="m-docsspring-securityec9db8eca69d-check"><a href="/docs/spring-security/%EC%9D%B8%EC%A6%9D/" title="Spring Security | 인증" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-securityec9db8eca69d"><span class="">인증</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-securityuser-details-service-li">
  <input type="checkbox" id="m-docsspring-securityuser-details-service-check"/>
  <label for="m-docsspring-securityuser-details-service-check"><a href="/docs/spring-security/user-details-service/" title="Spring Security | 인증 | UserDetailsService : 사용자 정보 검색" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-securityuser-details-service"><span class="">UserDetailsService : 사용자 정보 검색</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-securitybcrypt-password-encoder-li">
  <input type="checkbox" id="m-docsspring-securitybcrypt-password-encoder-check"/>
  <label for="m-docsspring-securitybcrypt-password-encoder-check"><a href="/docs/spring-security/bcrypt-password-encoder/" title="Spring Security | 인증 | BCryptPasswordEncoder : 암호 해시" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-securitybcrypt-password-encoder"><span class="">BCryptPasswordEncoder : 암호 해시</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-securityauthentication-li">
  <input type="checkbox" id="m-docsspring-securityauthentication-check"/>
  <label for="m-docsspring-securityauthentication-check"><a href="/docs/spring-security/authentication/" title="Spring Security | 인증 | Authentication" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-securityauthentication"><span class="">Authentication</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-cache-li">
  <input type="checkbox" id="m-docsspring-cache-check"/>
  <label for="m-docsspring-cache-check"><a href="/docs/spring-cache/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-cache"><span class="">Spring Cache</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-cacheintro-li">
  <input type="checkbox" id="m-docsspring-cacheintro-check"/>
  <label for="m-docsspring-cacheintro-check"><a href="/docs/spring-cache/intro/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-cacheintro"><span class="">Spring Cache 개요</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-cache-caffeinequick-guide-li">
  <input type="checkbox" id="m-docsspring-cache-caffeinequick-guide-check"/>
  <label for="m-docsspring-cache-caffeinequick-guide-check"><a href="/docs/spring-cache-caffeine/quick-guide/" title="Kotlin으로 Spring Boot Cache Caffeine 만들기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-cache-caffeinequick-guide"><span class="">Spring Boot Cache Caffeine</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-batch-li">
  <input type="checkbox" id="m-docsspring-batch-check"/>
  <label for="m-docsspring-batch-check"><a href="/docs/spring-batch/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-batch"><span class="">Spring Batch</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-batchintro-li">
  <input type="checkbox" id="m-docsspring-batchintro-check"/>
  <label for="m-docsspring-batchintro-check"><a href="/docs/spring-batch/intro/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-batchintro"><span class="">Spring Batch 이란?</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-batchstart-li">
  <input type="checkbox" id="m-docsspring-batchstart-check"/>
  <label for="m-docsspring-batchstart-check"><a href="/docs/spring-batch/start/" title="Kotlin으로 Spring Batch 만들기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-batchstart"><span class="">간단한 Spring Batch 구현</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-batchreferencescalability-li">
  <input type="checkbox" id="m-docsspring-batchreferencescalability-check"/>
  <label for="m-docsspring-batchreferencescalability-check"><a href="/docs/spring-batch/references/calability/" title="Spring Batch 스케일링 및 병렬 처리 | 공식 레퍼런스 번역" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-batchreferencescalability"><span class="">스케일링 및 병렬 처리</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-cloud-li">
  <input type="checkbox" id="m-docsspring-cloud-check"/>
  <label for="m-docsspring-cloud-check"><a href="/docs/spring-cloud/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-cloud"><span class="">Spring Cloud</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-cloud-data-flow-li">
  <input type="checkbox" id="m-docsspring-cloud-data-flow-check"/>
  <label for="m-docsspring-cloud-data-flow-check"><a href="/docs/spring-cloud-data-flow/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-cloud-data-flow"><span class="">Spring-Cloud-Data-Flow(SCDF)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-cloudquick-guide-li">
  <input type="checkbox" id="m-docsspring-cloudquick-guide-check"/>
  <label for="m-docsspring-cloudquick-guide-check"><a href="/docs/spring-cloud/quick-guide/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-cloudquick-guide"><span class="">간단한 Spring Cloud 구현</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspring-rest-docs-li">
  <input type="checkbox" id="m-docsspring-rest-docs-check"/>
  <label for="m-docsspring-rest-docs-check"><a href="/docs/spring-rest-docs/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspring-rest-docs"><span class="">Spring REST Docs</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-rest-docsquick-guide-li">
  <input type="checkbox" id="m-docsspring-rest-docsquick-guide-check"/>
  <label for="m-docsspring-rest-docsquick-guide-check"><a href="/docs/spring-rest-docs/quick-guide/" title="Kotlin으로 Spring REST Docs 만들기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-rest-docsquick-guide"><span class="">간단한 Spring REST Docs 구현</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsspringtutorial-li">
  <input type="checkbox" id="m-docsspringtutorial-check"/>
  <label for="m-docsspringtutorial-check"><a href="/docs/spring/tutorial/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsspringtutorial"><span class="">Spring Tutorial</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-retry-li">
  <input type="checkbox" id="m-docsspring-retry-check"/>
  <label for="m-docsspring-retry-check"><a href="/docs/spring-retry/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-retry"><span class="">Spring Retry</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsspring-bootactuator-li">
  <input type="checkbox" id="m-docsspring-bootactuator-check"/>
  <label for="m-docsspring-bootactuator-check"><a href="/docs/spring-boot/actuator/" title="Spring Boot Actuator - 애플리케이션 상태 확인, 모니터링 지원 기능" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsspring-bootactuator"><span class="">Spring Boot Actuator</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>


          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#12-도입">12. 도입</a>
      <ul>
        <li><a href="#121-문서-구조">12.1. 문서 구조</a></li>
      </ul>
    </li>
    <li><a href="#13-r2dbc-지원">13. R2DBC 지원</a>
      <ul>
        <li><a href="#131-입문">13.1. 입문</a></li>
        <li><a href="#132-예제-리포지토리">13.2. 예제 리포지토리</a></li>
        <li><a href="#133-spring을-사용하여-관계형-데이터베이스에-연결">13.3. Spring을 사용하여 관계형 데이터베이스에 연결</a></li>
        <li><a href="#134-r2dbcentityoperations-데이터-액세스-api">13.4. R2dbcEntityOperations 데이터 액세스 API</a></li>
      </ul>
    </li>
    <li><a href="#14-r2dbc-repository">14. R2DBC Repository</a>
      <ul>
        <li><a href="#141-사용방법">14.1. 사용방법</a></li>
        <li><a href="#142-쿼리-메소드">14.2. 쿼리 메소드</a></li>
        <li><a href="#1421-쿼리-변경">14.2.1. 쿼리 변경</a></li>
        <li><a href="#143-엔티티-콜백">14.3. 엔티티 콜백</a></li>
        <li><a href="#144-여러-데이터베이스에서-작업">14.4. 여러 데이터베이스에서 작업</a></li>
      </ul>
    </li>
    <li><a href="#15-감사">15. 감사</a>
      <ul>
        <li><a href="#151-기본">15.1. 기본</a></li>
        <li><a href="#152-r2dbc의-일반적인-감사-구성">15.2. R2DBC의 일반적인 감사 구성</a></li>
      </ul>
    </li>
    <li><a href="#16-매핑">16. 매핑</a>
      <ul>
        <li><a href="#161-객체-매핑의-기초">16.1. 객체 매핑의 기초</a></li>
        <li><a href="#162-약관-기반-매핑">16.2. 약관 기반 매핑</a></li>
        <li><a href="#163-매핑-설정">16.3. 매핑 설정</a></li>
        <li><a href="#164-메타데이터-기반-매핑">16.4. 메타데이터 기반 매핑</a></li>
        <li><a href="#1642-매핑-어노테이션-개요">16.4.2. 매핑 어노테이션 개요</a></li>
      </ul>
    </li>
    <li><a href="#17-kotlin-지원">17. Kotlin 지원</a>
      <ul>
        <li><a href="#171-요구사항">17.1. 요구사항</a></li>
        <li><a href="#172-null-안전-nullsafe">17.2. null 안전 (nullsafe)</a></li>
        <li><a href="#173-객체-매핑">17.3. 객체 매핑</a></li>
        <li><a href="#174-확장">17.4. 확장</a></li>
        <li><a href="#175-코루틴">17.5. 코루틴</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            <div class="taxonomy taxonomy-terms-cloud taxo-tags">
      <h5 class="taxonomy-title">Tags</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/algorithm/" data-taxonomy-term="algorithm"><span class="taxonomy-label">Algorithm</span><span class="taxonomy-count">61</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/android/" data-taxonomy-term="android"><span class="taxonomy-label">android</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/angular/" data-taxonomy-term="angular"><span class="taxonomy-label">Angular</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/angular2/" data-taxonomy-term="angular2"><span class="taxonomy-label">Angular2</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/angularjs/" data-taxonomy-term="angularjs"><span class="taxonomy-label">AngularJS</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/apache/" data-taxonomy-term="apache"><span class="taxonomy-label">Apache</span><span class="taxonomy-count">51</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/apache-hadoop/" data-taxonomy-term="apache-hadoop"><span class="taxonomy-label">Apache Hadoop</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/apache-kafka/" data-taxonomy-term="apache-kafka"><span class="taxonomy-label">Apache Kafka</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/apache-spark/" data-taxonomy-term="apache-spark"><span class="taxonomy-label">Apache Spark</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/apache-thrift/" data-taxonomy-term="apache-thrift"><span class="taxonomy-label">Apache Thrift</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/apache-zookeeper/" data-taxonomy-term="apache-zookeeper"><span class="taxonomy-label">Apache ZooKeeper</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/architecture/" data-taxonomy-term="architecture"><span class="taxonomy-label">Architecture</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/aws/" data-taxonomy-term="aws"><span class="taxonomy-label">AWS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/bdd/" data-taxonomy-term="bdd"><span class="taxonomy-label">BDD</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/bigdata/" data-taxonomy-term="bigdata"><span class="taxonomy-label">BigData</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/blog/" data-taxonomy-term="blog"><span class="taxonomy-label">Blog</span><span class="taxonomy-count">22</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/bootstrap/" data-taxonomy-term="bootstrap"><span class="taxonomy-label">Bootstrap</span><span class="taxonomy-count">10</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/bug/" data-taxonomy-term="bug"><span class="taxonomy-label">Bug</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/build/" data-taxonomy-term="build"><span class="taxonomy-label">Build</span><span class="taxonomy-count">42</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/c/" data-taxonomy-term="c"><span class="taxonomy-label">C</span><span class="taxonomy-count">86</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cache/" data-taxonomy-term="cache"><span class="taxonomy-label">Cache</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/caffeine/" data-taxonomy-term="caffeine"><span class="taxonomy-label">Caffeine</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/calibre/" data-taxonomy-term="calibre"><span class="taxonomy-label">Calibre</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cassandra/" data-taxonomy-term="cassandra"><span class="taxonomy-label">Cassandra</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cdn/" data-taxonomy-term="cdn"><span class="taxonomy-label">CDN</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/centos/" data-taxonomy-term="centos"><span class="taxonomy-label">CentOS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cerebro/" data-taxonomy-term="cerebro"><span class="taxonomy-label">Cerebro</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ci/" data-taxonomy-term="ci"><span class="taxonomy-label">CI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ci/" data-taxonomy-term="ci"><span class="taxonomy-label">CI</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cloud/" data-taxonomy-term="cloud"><span class="taxonomy-label">Cloud</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cloud-native/" data-taxonomy-term="cloud-native"><span class="taxonomy-label">Cloud Native</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/code/" data-taxonomy-term="code"><span class="taxonomy-label">Code</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/computer/" data-taxonomy-term="computer"><span class="taxonomy-label">Computer</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cors/" data-taxonomy-term="cors"><span class="taxonomy-label">CORS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/css/" data-taxonomy-term="css"><span class="taxonomy-label">CSS</span><span class="taxonomy-count">69</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/d3/" data-taxonomy-term="d3"><span class="taxonomy-label">D3</span><span class="taxonomy-count">18</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/d3.js/" data-taxonomy-term="d3.js"><span class="taxonomy-label">D3.js</span><span class="taxonomy-count">21</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/data/" data-taxonomy-term="data"><span class="taxonomy-label">Data</span><span class="taxonomy-count">11</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/data-structure/" data-taxonomy-term="data-structure"><span class="taxonomy-label">Data Structure</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/database/" data-taxonomy-term="database"><span class="taxonomy-label">Database</span><span class="taxonomy-count">297</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ddd/" data-taxonomy-term="ddd"><span class="taxonomy-label">DDD</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/design-pattern/" data-taxonomy-term="design-pattern"><span class="taxonomy-label">Design Pattern</span><span class="taxonomy-count">24</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/devops/" data-taxonomy-term="devops"><span class="taxonomy-label">DevOps</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/dns/" data-taxonomy-term="dns"><span class="taxonomy-label">DNS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/docker/" data-taxonomy-term="docker"><span class="taxonomy-label">Docker</span><span class="taxonomy-count">28</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/dto/" data-taxonomy-term="dto"><span class="taxonomy-label">dto</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/e-book/" data-taxonomy-term="e-book"><span class="taxonomy-label">e-Book</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/e-mail/" data-taxonomy-term="e-mail"><span class="taxonomy-label">E-Mail</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/eclipse/" data-taxonomy-term="eclipse"><span class="taxonomy-label">Eclipse</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/effective-java/" data-taxonomy-term="effective-java"><span class="taxonomy-label">Effective Java</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/elasticsearch/" data-taxonomy-term="elasticsearch"><span class="taxonomy-label">Elasticsearch</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/elastisearch/" data-taxonomy-term="elastisearch"><span class="taxonomy-label">Elastisearch</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/entity/" data-taxonomy-term="entity"><span class="taxonomy-label">entity</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/etym/" data-taxonomy-term="etym"><span class="taxonomy-label">ETYM</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/excel/" data-taxonomy-term="excel"><span class="taxonomy-label">Excel</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/flutter/" data-taxonomy-term="flutter"><span class="taxonomy-label">Flutter</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ftp/" data-taxonomy-term="ftp"><span class="taxonomy-label">FTP</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/game/" data-taxonomy-term="game"><span class="taxonomy-label">Game</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/garbage-collection/" data-taxonomy-term="garbage-collection"><span class="taxonomy-label">Garbage collection</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/gcp/" data-taxonomy-term="gcp"><span class="taxonomy-label">GCP</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/git/" data-taxonomy-term="git"><span class="taxonomy-label">Git</span><span class="taxonomy-count">46</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/github/" data-taxonomy-term="github"><span class="taxonomy-label">GitHub</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/gitops/" data-taxonomy-term="gitops"><span class="taxonomy-label">GitOps</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/go/" data-taxonomy-term="go"><span class="taxonomy-label">Go</span><span class="taxonomy-count">20</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/gradle/" data-taxonomy-term="gradle"><span class="taxonomy-label">Gradle</span><span class="taxonomy-count">13</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/grafana/" data-taxonomy-term="grafana"><span class="taxonomy-label">Grafana</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/graph-database/" data-taxonomy-term="graph-database"><span class="taxonomy-label">Graph Database</span><span class="taxonomy-count">12</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/graphql/" data-taxonomy-term="graphql"><span class="taxonomy-label">GraphQL</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/gremlin/" data-taxonomy-term="gremlin"><span class="taxonomy-label">Gremlin</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/guava/" data-taxonomy-term="guava"><span class="taxonomy-label">Guava</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/gulp/" data-taxonomy-term="gulp"><span class="taxonomy-label">gulp</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/handlebars/" data-taxonomy-term="handlebars"><span class="taxonomy-label">Handlebars</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/harbor/" data-taxonomy-term="harbor"><span class="taxonomy-label">Harbor</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/hbase/" data-taxonomy-term="hbase"><span class="taxonomy-label">HBase</span><span class="taxonomy-count">12</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/helm/" data-taxonomy-term="helm"><span class="taxonomy-label">Helm</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/html/" data-taxonomy-term="html"><span class="taxonomy-label">HTML</span><span class="taxonomy-count">65</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/http/" data-taxonomy-term="http"><span class="taxonomy-label">HTTP</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/hugo/" data-taxonomy-term="hugo"><span class="taxonomy-label">Hugo</span><span class="taxonomy-count">21</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/hyper-v/" data-taxonomy-term="hyper-v"><span class="taxonomy-label">Hyper-V</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ide/" data-taxonomy-term="ide"><span class="taxonomy-label">IDE</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/influxdb/" data-taxonomy-term="influxdb"><span class="taxonomy-label">InfluxDB</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/internet/" data-taxonomy-term="internet"><span class="taxonomy-label">Internet</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ip/" data-taxonomy-term="ip"><span class="taxonomy-label">IP</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/it-%EC%9A%A9%EC%96%B4/" data-taxonomy-term="it-%EC%9A%A9%EC%96%B4"><span class="taxonomy-label">IT 용어</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/java/" data-taxonomy-term="java"><span class="taxonomy-label">Java</span><span class="taxonomy-count">438</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/javadoc/" data-taxonomy-term="javadoc"><span class="taxonomy-label">Javadoc</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/javafx/" data-taxonomy-term="javafx"><span class="taxonomy-label">JavaFX</span><span class="taxonomy-count">12</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/javascript/" data-taxonomy-term="javascript"><span class="taxonomy-label">JavaScript</span><span class="taxonomy-count">205</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/jenkins/" data-taxonomy-term="jenkins"><span class="taxonomy-label">Jenkins</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/jpa/" data-taxonomy-term="jpa"><span class="taxonomy-label">JPA</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/jquery/" data-taxonomy-term="jquery"><span class="taxonomy-label">jQuery</span><span class="taxonomy-count">53</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/json/" data-taxonomy-term="json"><span class="taxonomy-label">JSON</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/jsp/" data-taxonomy-term="jsp"><span class="taxonomy-label">JSP</span><span class="taxonomy-count">44</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/junit/" data-taxonomy-term="junit"><span class="taxonomy-label">JUnit</span><span class="taxonomy-count">18</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/jvm/" data-taxonomy-term="jvm"><span class="taxonomy-label">JVM</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/jwt/" data-taxonomy-term="jwt"><span class="taxonomy-label">JWT</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/kibana/" data-taxonomy-term="kibana"><span class="taxonomy-label">Kibana</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/kotest/" data-taxonomy-term="kotest"><span class="taxonomy-label">Kotest</span><span class="taxonomy-count">14</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/kotlin/" data-taxonomy-term="kotlin"><span class="taxonomy-label">Kotlin</span><span class="taxonomy-count">70</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/kubernetes/" data-taxonomy-term="kubernetes"><span class="taxonomy-label">Kubernetes</span><span class="taxonomy-count">21</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/lan/" data-taxonomy-term="lan"><span class="taxonomy-label">LAN</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/laravel/" data-taxonomy-term="laravel"><span class="taxonomy-label">Laravel</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/license/" data-taxonomy-term="license"><span class="taxonomy-label">License</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/linux/" data-taxonomy-term="linux"><span class="taxonomy-label">Linux</span><span class="taxonomy-count">77</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/logback/" data-taxonomy-term="logback"><span class="taxonomy-label">Logback</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/lombok/" data-taxonomy-term="lombok"><span class="taxonomy-label">Lombok</span><span class="taxonomy-count">16</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/macos/" data-taxonomy-term="macos"><span class="taxonomy-label">macOS</span><span class="taxonomy-count">19</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/markdown/" data-taxonomy-term="markdown"><span class="taxonomy-label">markdown</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/maven/" data-taxonomy-term="maven"><span class="taxonomy-label">Maven</span><span class="taxonomy-count">42</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/message-queue/" data-taxonomy-term="message-queue"><span class="taxonomy-label">Message Queue</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/mongodb/" data-taxonomy-term="mongodb"><span class="taxonomy-label">MongoDB</span><span class="taxonomy-count">13</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/mqtt/" data-taxonomy-term="mqtt"><span class="taxonomy-label">MQTT</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/msa/" data-taxonomy-term="msa"><span class="taxonomy-label">MSA</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/mvc/" data-taxonomy-term="mvc"><span class="taxonomy-label">MVC</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/mybatis/" data-taxonomy-term="mybatis"><span class="taxonomy-label">MyBatis</span><span class="taxonomy-count">44</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/mysql/" data-taxonomy-term="mysql"><span class="taxonomy-label">MySQL</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/neo4j/" data-taxonomy-term="neo4j"><span class="taxonomy-label">Neo4j</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/network/" data-taxonomy-term="network"><span class="taxonomy-label">Network</span><span class="taxonomy-count">24</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/nginx/" data-taxonomy-term="nginx"><span class="taxonomy-label">Nginx</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/node.js/" data-taxonomy-term="node.js"><span class="taxonomy-label">Node.js</span><span class="taxonomy-count">11</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/nosql/" data-taxonomy-term="nosql"><span class="taxonomy-label">NoSQL</span><span class="taxonomy-count">49</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/oauth/" data-taxonomy-term="oauth"><span class="taxonomy-label">OAuth</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/os/" data-taxonomy-term="os"><span class="taxonomy-label">OS</span><span class="taxonomy-count">100</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/osi/" data-taxonomy-term="osi"><span class="taxonomy-label">OSI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/php/" data-taxonomy-term="php"><span class="taxonomy-label">php</span><span class="taxonomy-count">67</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/pinpoint/" data-taxonomy-term="pinpoint"><span class="taxonomy-label">Pinpoint</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/port/" data-taxonomy-term="port"><span class="taxonomy-label">Port</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/postgresql/" data-taxonomy-term="postgresql"><span class="taxonomy-label">PostgreSQL</span><span class="taxonomy-count">60</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/programming/" data-taxonomy-term="programming"><span class="taxonomy-label">Programming</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/prometheus/" data-taxonomy-term="prometheus"><span class="taxonomy-label">Prometheus</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/proxy/" data-taxonomy-term="proxy"><span class="taxonomy-label">Proxy</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/pyspark/" data-taxonomy-term="pyspark"><span class="taxonomy-label">PySpark</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/python/" data-taxonomy-term="python"><span class="taxonomy-label">Python</span><span class="taxonomy-count">34</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/rdb/" data-taxonomy-term="rdb"><span class="taxonomy-label">RDB</span><span class="taxonomy-count">11</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/rdbms/" data-taxonomy-term="rdbms"><span class="taxonomy-label">RDBMS</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/react/" data-taxonomy-term="react"><span class="taxonomy-label">React</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/redis/" data-taxonomy-term="redis"><span class="taxonomy-label">Redis</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/reflection/" data-taxonomy-term="reflection"><span class="taxonomy-label">Reflection</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/rest-api/" data-taxonomy-term="rest-api"><span class="taxonomy-label">REST API</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/rmi/" data-taxonomy-term="rmi"><span class="taxonomy-label">RMI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/robots/" data-taxonomy-term="robots"><span class="taxonomy-label">robots</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/rpc/" data-taxonomy-term="rpc"><span class="taxonomy-label">RPC</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/sass/" data-taxonomy-term="sass"><span class="taxonomy-label">SASS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/scm/" data-taxonomy-term="scm"><span class="taxonomy-label">SCM</span><span class="taxonomy-count">46</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/scsss/" data-taxonomy-term="scsss"><span class="taxonomy-label">SCSSS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/secure-coding-guide/" data-taxonomy-term="secure-coding-guide"><span class="taxonomy-label">Secure Coding Guide</span><span class="taxonomy-count">18</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/security/" data-taxonomy-term="security"><span class="taxonomy-label">Security</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/seo/" data-taxonomy-term="seo"><span class="taxonomy-label">SEO</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/servlet/" data-taxonomy-term="servlet"><span class="taxonomy-label">Servlet</span><span class="taxonomy-count">44</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/sigil/" data-taxonomy-term="sigil"><span class="taxonomy-label">Sigil</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/sitemap/" data-taxonomy-term="sitemap"><span class="taxonomy-label">Sitemap</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/sns/" data-taxonomy-term="sns"><span class="taxonomy-label">SNS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/software/" data-taxonomy-term="software"><span class="taxonomy-label">Software</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/solid/" data-taxonomy-term="solid"><span class="taxonomy-label">SOLID</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spinnaker/" data-taxonomy-term="spinnaker"><span class="taxonomy-label">Spinnaker</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spock/" data-taxonomy-term="spock"><span class="taxonomy-label">Spock</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring/" data-taxonomy-term="spring"><span class="taxonomy-label">Spring</span><span class="taxonomy-count">111</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-batch/" data-taxonomy-term="spring-batch"><span class="taxonomy-label">Spring Batch</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-boot/" data-taxonomy-term="spring-boot"><span class="taxonomy-label">Spring Boot</span><span class="taxonomy-count">40</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-data/" data-taxonomy-term="spring-data"><span class="taxonomy-label">Spring Data</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-data-r2dbc/" data-taxonomy-term="spring-data-r2dbc"><span class="taxonomy-label">Spring Data R2DBC</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-security/" data-taxonomy-term="spring-security"><span class="taxonomy-label">Spring Security</span><span class="taxonomy-count">10</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-web-reactive/" data-taxonomy-term="spring-web-reactive"><span class="taxonomy-label">Spring Web Reactive</span><span class="taxonomy-count">35</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/sql/" data-taxonomy-term="sql"><span class="taxonomy-label">SQL</span><span class="taxonomy-count">42</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/sqlite/" data-taxonomy-term="sqlite"><span class="taxonomy-label">SQLite</span><span class="taxonomy-count">108</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/stack/" data-taxonomy-term="stack"><span class="taxonomy-label">Stack</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/svg/" data-taxonomy-term="svg"><span class="taxonomy-label">SVG</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/svn/" data-taxonomy-term="svn"><span class="taxonomy-label">SVN</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/swift/" data-taxonomy-term="swift"><span class="taxonomy-label">Swift</span><span class="taxonomy-count">49</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/syntaxhighlighter/" data-taxonomy-term="syntaxhighlighter"><span class="taxonomy-label">SyntaxHighlighter</span><span class="taxonomy-count">11</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/tcp/" data-taxonomy-term="tcp"><span class="taxonomy-label">TCP</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/tdd/" data-taxonomy-term="tdd"><span class="taxonomy-label">TDD</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/telnet/" data-taxonomy-term="telnet"><span class="taxonomy-label">Telnet</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/testcontainers/" data-taxonomy-term="testcontainers"><span class="taxonomy-label">Testcontainers</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/testing/" data-taxonomy-term="testing"><span class="taxonomy-label">Testing</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/thymeleaf/" data-taxonomy-term="thymeleaf"><span class="taxonomy-label">Thymeleaf</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/tidb/" data-taxonomy-term="tidb"><span class="taxonomy-label">TiDB</span><span class="taxonomy-count">25</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/tomcat/" data-taxonomy-term="tomcat"><span class="taxonomy-label">Tomcat</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/transaction/" data-taxonomy-term="transaction"><span class="taxonomy-label">Transaction</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/udp/" data-taxonomy-term="udp"><span class="taxonomy-label">UDP</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ui/" data-taxonomy-term="ui"><span class="taxonomy-label">UI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ux/" data-taxonomy-term="ux"><span class="taxonomy-label">UX</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/vcs/" data-taxonomy-term="vcs"><span class="taxonomy-label">VCS</span><span class="taxonomy-count">46</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/virtualbox/" data-taxonomy-term="virtualbox"><span class="taxonomy-label">VirtualBox</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/virtualization/" data-taxonomy-term="virtualization"><span class="taxonomy-label">Virtualization</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/vo/" data-taxonomy-term="vo"><span class="taxonomy-label">vo</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/vpn/" data-taxonomy-term="vpn"><span class="taxonomy-label">VPN</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/vscode/" data-taxonomy-term="vscode"><span class="taxonomy-label">VSCode</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/vue.js/" data-taxonomy-term="vue.js"><span class="taxonomy-label">Vue.js</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/web/" data-taxonomy-term="web"><span class="taxonomy-label">WEB</span><span class="taxonomy-count">389</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/windows/" data-taxonomy-term="windows"><span class="taxonomy-label">Windows</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/xml/" data-taxonomy-term="xml"><span class="taxonomy-label">XML</span><span class="taxonomy-count">13</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/yaml/" data-taxonomy-term="yaml"><span class="taxonomy-label">YAML</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/zookeeper/" data-taxonomy-term="zookeeper"><span class="taxonomy-label">ZooKeeper</span><span class="taxonomy-count">2</span></a></li>
        </ul>
    </div>
  

          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/category/programming/spring/">Spring Framework</a></li>
  <li class="breadcrumb-item">
    <a href="/docs/spring-data-r2dbc/">Spring Data R2DBC</a></li>
  <li class="breadcrumb-item">
    <a href="/docs/spring-data-r2dbc/reference/">공식 레퍼런스 번역</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    참조 문서</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Spring Data R2DBC | 참조 문서</h1>
	
	<header class="article-meta">
		
		
			
				<div class="taxonomy taxonomy-terms-article taxo-tags">
  <h5 class="taxonomy-title">Tags:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-data-r2dbc/" data-taxonomy-term="spring-data-r2dbc"><span class="taxonomy-label">Spring Data R2DBC</span></a></li>
    <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring/" data-taxonomy-term="spring"><span class="taxonomy-label">Spring</span></a></li>
    <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/java/" data-taxonomy-term="java"><span class="taxonomy-label">Java</span></a></li>
    </ul>
</div>

			
		
		
	</header>
	
	<h2 id="12-도입">12. 도입</h2>
<h3 id="121-문서-구조">12.1. 문서 구조</h3>
<p>참조 문서의 이 부분에서는 Spring Data R2DBC에서 제공하는 핵심 기능에 대해 설명한다.</p>
<p>&ldquo;<a href="#13-r2dbc-%ec%a7%80%ec%9b%90">R2DBC 지원</a>&ldquo;은 R2DBC 모듈의 기능 세트를 소개한다.</p>
<p>&ldquo;<a href="#14-r2dbc-repository">R2DBC Repository</a>&ldquo;는 R2DBC 저장소 지원을 소개한다.</p>
<hr>
<h2 id="13-r2dbc-지원">13. R2DBC 지원</h2>
<p>R2DBC에는 다양한 기능이 포함되어 있다.</p>
<ul>
<li>R2DBC 드라이버 인스턴스의 Java 기반 <code>@Configuration</code> 클래스에 의한 Spring 구성 지원.</li>
<li>행과 POJO 간의 통합 객체 매핑을 사용하여 일반적인 R2DBC 작업을 수행할 때 생산성을 향상시키는 엔터티 바인딩 작업의 주요 클래스인 <code>R2dbcEntityTemplate</code>.</li>
<li>Spring의 변환 서비스(Conversion Service)와 통합된 기능이 풍부한 객체 매핑.</li>
<li>다른 메타데이터 형식을 지원하기 위해 확장 가능한 어노테이션 기반 매핑 메타데이터.</li>
<li>사용자 지정 쿼리 메소드 지원을 포함한 리포지토리 인터페이스의 자동 구현.</li>
</ul>
<p>대부분의 작업에서는 <code>R2dbcEntityTemplate</code> 또는 리포지토리 지원을 사용해야 하며, 모두 많은 매핑(rich mapping) 기능을 사용한다. <code>R2dbcEntityTemplate</code>는 Ad ad-hoc CRUD 작업과 같은 액세스 기능을 찾는다.</p>
<h3 id="131-입문">13.1. 입문</h3>
<p>작업 환경을 설정하는 쉬운 방법은 <a href="https://start.spring.io/" target="_blank" rel="noopener">start.spring.io<i class="fas fa-external-link-alt"></i></a>을 통해 Spring 기반 프로젝트를 만드는 것이다. 이렇게 하려면 :</p>
<ol>
<li>다음을 pom.xml 파일의 <code>dependencies</code> 요소에 추가한다.
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;dependencyManagement&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&lt;groupId&gt;</span>io.r2dbc<span style="color:#204a87;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&lt;artifactId&gt;</span>r2dbc-bom<span style="color:#204a87;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&lt;version&gt;</span>${r2dbc-releasetrain.version}<span style="color:#204a87;font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&lt;type&gt;</span>pom<span style="color:#204a87;font-weight:bold">&lt;/type&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&lt;scope&gt;</span>import<span style="color:#204a87;font-weight:bold">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;/dependencyManagement&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8f5902;font-style:italic">&lt;!-- other dependency elements omitted --&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;groupId&gt;</span>org.springframework.data<span style="color:#204a87;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;artifactId&gt;</span>spring-data-r2dbc<span style="color:#204a87;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;version&gt;</span>1.4.0<span style="color:#204a87;font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8f5902;font-style:italic">&lt;!-- a R2DBC driver --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;groupId&gt;</span>io.r2dbc<span style="color:#204a87;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;artifactId&gt;</span>r2dbc-h2<span style="color:#204a87;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;version&gt;</span>Arabba-SR10<span style="color:#204a87;font-weight:bold">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;/dependencies&gt;</span>
</span></span></code></pre></div></li>
<li>pom.xml의 Spring 버전을 다음과 같이 변경한다.
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;spring-framework.version&gt;</span>5.3.13<span style="color:#204a87;font-weight:bold">&lt;/spring-framework.version&gt;</span>
</span></span></code></pre></div></li>
<li>Maven의 Spring 마일스톤 리포지토리의 다음 위치를 <code>&lt;dependencies/&gt;</code> 요소와 동일한 레벨이되도록 <code>pom.xml</code>에 추가한다.
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;repositories&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;repository&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;id&gt;</span>spring-milestone<span style="color:#204a87;font-weight:bold">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;name&gt;</span>Spring Maven MILESTONE Repository<span style="color:#204a87;font-weight:bold">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;url&gt;</span>https://repo.spring.io/libs-milestone<span style="color:#204a87;font-weight:bold">&lt;/url&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;/repository&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;/repositories&gt;</span>
</span></span></code></pre></div></li>
</ol>
<p>리포지토리는 <a href="https://repo.spring.io/ui/native/milestone/org/springframework/data/" target="_blank" rel="noopener">여기에서 검색<i class="fas fa-external-link-alt"></i></a>할 수도 있다.</p>
<p>로깅 레벨을 <code>DEBUG</code>로 설정하여, 추가 정보를 표시할 수도 있다. 그렇게 하려면 <code>application.properties</code> 파일에 다음와 같은 내용이 포함되도록 편집한다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#c4a000">logging.level.org.springframework.r2dbc</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">DEBUG</span>
</span></span></code></pre></div><p>그런 다음에는 예를 들어, <code>Person</code> 클래스를 만들어 다음과 같이 영속화할 수 있다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Person</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">String</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">String</span> <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">age</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">String</span> <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">age</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">id</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">age</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">age</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">String</span> <span style="color:#000">getId</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">String</span> <span style="color:#000">getName</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">getAge</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">age</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">String</span> <span style="color:#000">toString</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#4e9a06">&#34;Person [id=&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">id</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#4e9a06">&#34;, name=&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#4e9a06">&#34;, age=&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">age</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#4e9a06">&#34;]&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>그 다음으로 다음과 같이 데이터베이스에 테이블 구조를 생성해야 한다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">CREATE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">TABLE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">person</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">id</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87">VARCHAR</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">255</span><span style="color:#000;font-weight:bold">)</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">PRIMARY</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">KEY</span><span style="color:#000;font-weight:bold">,</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87">VARCHAR</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">255</span><span style="color:#000;font-weight:bold">),</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#000">age</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87">INT</span><span style="color:#000;font-weight:bold">);</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>또한, 다음과 같이 실행할 메인 애플리케이션도 필요하다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">io.r2dbc.spi.ConnectionFactories</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">io.r2dbc.spi.ConnectionFactory</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">org.apache.commons.logging.Log</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">org.apache.commons.logging.LogFactory</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">reactor.test.StepVerifier</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">org.springframework.data.r2dbc.core.R2dbcEntityTemplate</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">R2dbcApp</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">Log</span> <span style="color:#000">log</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">LogFactory</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getLog</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">R2dbcApp</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">main</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">[]</span> <span style="color:#000">args</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">ConnectionFactory</span> <span style="color:#000">connectionFactory</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">ConnectionFactories</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;r2dbc:h2:mem:///test?options=DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">R2dbcEntityTemplate</span> <span style="color:#000">template</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">R2dbcEntityTemplate</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">connectionFactory</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDatabaseClient</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">sql</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;CREATE TABLE person&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#34;(id VARCHAR(255) PRIMARY KEY,&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#34;name VARCHAR(255),&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#34;age INT)&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">fetch</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">rowsUpdated</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">as</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">StepVerifier</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">create</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">expectNextCount</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">verifyComplete</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">insert</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">using</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;joe&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Joe&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">34</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">as</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">StepVerifier</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">create</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">expectNextCount</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">verifyComplete</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">select</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">first</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">doOnNext</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">it</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#000">log</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">info</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">it</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">as</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">StepVerifier</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">create</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">expectNextCount</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">verifyComplete</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>메인 프로그램을 실행하면, 앞의 예에서는 다음과 같이 출력된다.</p>
<pre tabindex="0"><code>2018-11-28 10:47:03,893 DEBUG amework.core.r2dbc.DefaultDatabaseClient: 310 - Executing SQL statement [CREATE TABLE person
  (id VARCHAR(255) PRIMARY KEY,
   name VARCHAR(255),
   age INT)]
2018-11-28 10:47:04,074 DEBUG amework.core.r2dbc.DefaultDatabaseClient: 908 - Executing SQL statement [INSERT INTO person (id, name, age) VALUES($1, $2, $3)]
2018-11-28 10:47:04,092 DEBUG amework.core.r2dbc.DefaultDatabaseClient: 575 - Executing SQL statement [SELECT id, name, age FROM person]
2018-11-28 10:47:04,436  INFO        org.spring.r2dbc.example.R2dbcApp:  43 - Person [id=&#39;joe&#39;, name=&#39;Joe&#39;, age=34]
</code></pre><p>이 간단한 예에서도 몇 가지 주의해야 할 사항이 있다</p>
<ul>
<li>표준의 <code>io.r2dbc.spi.ConnectionFactory</code> 객체를 사용하여, Spring Data R2DBC(<code>R2dbcEntityTemplate</code>)에서 주요 도우미 클래스의 인스턴스를 생성할 수 있다.</li>
<li>매퍼는 추가 메타데이터 없이, 표준 POJO 객체에서 작동한다(다만, 선택적으로 해당 정보를 제공할 수 있다. <a href="#16-%eb%a7%a4%ed%95%91">여기를 참조</a>하길 바란다.).</li>
<li>매핑 규칙에서는 필드 액세스를 사용할 수 있다. <code>Person</code> 클래스에는 getter 밖에 없다.</li>
<li>생성자의 인수 이름이 저장된 행의 열 이름과 일치하면, 그걸로 객체를 인스턴스화하는데 사용된다.</li>
</ul>
<h3 id="132-예제-리포지토리">13.2. 예제 리포지토리</h3>
<p><a href="https://github.com/spring-projects/spring-data-examples" target="_blank" rel="noopener">GitHub 리포지토리 및 몇 가지 예<i class="fas fa-external-link-alt"></i></a>를 다운로드하여 사용하여 라이브러리의 동작을 확인한다.</p>
<h3 id="133-spring을-사용하여-관계형-데이터베이스에-연결">13.3. Spring을 사용하여 관계형 데이터베이스에 연결</h3>
<p>관계형 데이터베이스와 Spring을 사용하는 경우에 첫번째 작업 중 하나는 IoC 컨테이너를 사용하여 <code>io.r2dbc.spi.ConnectionFactory</code> 객체를 만드는 것이다. <a href="#1332-r2dbc-%eb%93%9c%eb%9d%bc%ec%9d%b4%eb%b2%84">지원되는 데이터베이스와 드라이버</a>를 사용한다.</p>
<h4 id="1331-java-기반-메타데이터를-사용하여-connectionfactory-인스턴스-등록">13.3.1. Java 기반 메타데이터를 사용하여 <code>ConnectionFactory</code> 인스턴스 등록</h4>
<p>다음 예는 Java 기반 Bean 메타데이터를 사용하여 <code>io.r2dbc.spi.ConnectionFactory</code> 인스턴스를 등록하는 예를 보여준다.</p>
<p><strong>예 54: Java 기반 Bean 메타데이터를 사용하여 <code>io.r2dbc.spi.ConnectionFactory</code> 오브젝트 등록</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">ApplicationConfiguration</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">AbstractR2dbcConfiguration</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Bean</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">ConnectionFactory</span> <span style="color:#000">connectionFactory</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>이 접근 방법(approach)에서는 표준 <code>io.r2dbc.spi.ConnectionFactory</code> 인스턴스를 사용할 수 있으며, 컨테이너는 Spring의 <code>AbstractR2dbcConfiguration</code>을 사용한다. <code>ConnectionFactory</code> 인스턴스를 직접 등록하는 것과 비교하여 구성 지원에는 <code>@Repository</code> 어노테이션으로 선언된 데이터 액세스 클래스에 대해 R2DBC 예외를 Spring의 이식 가능한 DataAccessException 계층의 예외로 변환하는 <code>ExceptionTranslator</code> 구현을 컨테이너에 제공하는 추가 이점이 있다. 이 계층 구조와 @Repository의 사용은 <a href="https://docs.spring.io/spring/docs/5.3.13/reference/html/data-access.html" target="_blank" rel="noopener">Spring의 DAO 지원 기능<i class="fas fa-external-link-alt"></i></a>에 설명되어 있다.</p>
<p><code>AbstractR2dbcConfiguration</code>는 <code>DatabaseClient</code>도 등록한다. 이는 데이터베이스 상호 작용 및 리포지토리 구현에 필요하다.</p>
<h4 id="1332-r2dbc-드라이버">13.3.2. R2DBC 드라이버</h4>
<p>Spring Data R2DBC는 R2DBC의 플러그 가능한 SPI 메커니즘을 통해 드라이버를 지원한다. Spring Data R2DBC으로 R2DBC 사양을 구현하는 임의의 드라이버를 사용할 수 있다. Spring Data R2DBC는 각 데이터베이스의 특정 기능에 반응하기 때문에 <code>Dialect</code> 구현이 필요한다. 그렇지 않으면, 응용 프로그램이 시작되지 않는다. Spring Data R2DBC에는, 다음의 드라이버용의 다이어렉트 구현이 함께 제공된다.</p>
<ul>
<li><a href="https://github.com/r2dbc/r2dbc-h2" target="_blank" rel="noopener">H2<i class="fas fa-external-link-alt"></i></a> (<code>io.r2dbc:r2dbc-h2</code>)</li>
<li><a href="https://github.com/mariadb-corporation/mariadb-connector-r2dbc" target="_blank" rel="noopener">MariaDB<i class="fas fa-external-link-alt"></i></a> (<code>org.mariadb:r2dbc-mariadb</code>)</li>
<li><a href="https://github.com/r2dbc/r2dbc-mssql" target="_blank" rel="noopener">Microsoft SQL Server<i class="fas fa-external-link-alt"></i></a> (<code>io.r2dbc:r2dbc-mssql</code>)</li>
<li><a href="https://github.com/mirromutth/r2dbc-mysql" target="_blank" rel="noopener">MySQL<i class="fas fa-external-link-alt"></i></a> (<code>dev.miku:r2dbc-mysql</code>)</li>
<li><a href="https://github.com/jasync-sql/jasync-sql" target="_blank" rel="noopener">jasync-sql MySQL<i class="fas fa-external-link-alt"></i></a> (<code>com.github.jasync-sql:jasync-r2dbc-mysql</code>)</li>
<li><a href="https://github.com/pgjdbc/r2dbc-postgresql" target="_blank" rel="noopener">Postgres<i class="fas fa-external-link-alt"></i></a> (<code>io.r2dbc:r2dbc-postgresql</code>)</li>
<li><a href="https://github.com/oracle/oracle-r2dbc" target="_blank" rel="noopener">Oracle<i class="fas fa-external-link-alt"></i></a> (<code>com.oracle.database.r2dbc:oracle-r2dbc</code>)</li>
</ul>
<p>Spring Data R2DBC는 <code>ConnectionFactory</code>를 검사하는 것에 의해서 데이터베이스 세부 사항에 반응하고, 그에 따라 적절한 데이터베이스 다이렉트를 선택한다. 사용하는 드라이버가 Spring Data R2DBC 에 아직 인식되고 있지 않는 경우는, 독자적인 <a href="https://docs.spring.io/spring-data/r2dbc/docs/1.4.0/api/org/springframework/data/r2dbc/dialect/R2dbcDialect.html" target="_blank" rel="noopener"><code>R2dbcDialect</code><i class="fas fa-external-link-alt"></i></a>를 구성해야 한다.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Tip</h4>

    다이얼렉트는 <code>ConnectionFactory</code>로부터 <a href="https://docs.spring.io/spring-data/r2dbc/docs/1.4.0/api/org/springframework/data/r2dbc/dialect/DialectResolver.html" target="_blank" rel="noopener"><code>DialectResolver</code><i class="fas fa-external-link-alt"></i></a>에 의해 해결된다. 일반적으로 <code>ConnectionFactoryMetadata</code>를 검사한다. + <code>org.springframework.data.r2dbc.dialect.DialectResolver$R2dbcDialectProvider</code>로부터 <code>META-INF/spring.factories</code>를 구현하는 클래스를 등록하는 것으로, Spring에 <code>R2dbcDialect</code>를 자동 검출시킬 수가 있다. <code>DialectResolver</code>는 Spring의 <code>SpringFactoriesLoader</code>를 사용하여 클래스 패스로부터 다이얼렉트 프로바이더의 구현을 검출한다.

</div>

<h3 id="134-r2dbcentityoperations-데이터-액세스-api">13.4. R2dbcEntityOperations 데이터 액세스 API</h3>
<p><code>R2dbcEntityTemplate</code>는 Spring Data R2DBC의 핵심 진입점이다. 데이터를 쿼리, 삽입, 업데이트, 삭제와 같은 일반적인 임시(ad-hoc) 사용 사용를 위한 직접적인 엔티티 지향 방법과 보다 좁게 플루언트 인터페이스(fluent interface)를 제공한다.</p>
<blockquote>
<p>플루언트 인터페이스(fluent interface)는 메소드 체이닝에 상당 부분 기반한 객체 지향 API 설계 메소드이며, 소스 코드의 가독성을 산문과 유사하게 만드는 것이 목적이다. - 출처: <a href="https://ko.wikipedia.org/wiki/%ED%94%8C%EB%A3%A8%EC%96%B8%ED%8A%B8_%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4" target="_blank" rel="noopener">위키백과<i class="fas fa-external-link-alt"></i></a></p>
</blockquote>
<p>진입점(<code>insert()</code>, <code>select()</code>, <code>update()</code> 등)은 수행할 작업을 기반으로 하는 자연스러운 명명 스키마를 따른다. 진입점에 계속해서 API는 SQL문를 작성하고 실행하는 종료 메소드에 연결되는 문맥 의존의 메소드만을 제공하도록 설계되고 있다. Spring Data R2DBC는, <code>R2dbcDialect</code> 추상화를 하여 바인드 마커, 페이지네이션 지원 및 기본 드라이버에 의해 네이티브에 서포트되는 데이터형을 결정한다.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    모든 터미널 메소드는 항상 원하는 조작을 하는 <code>Publisher</code> 유형을 반환한다. 실제 명령문은 구독 시 데이터베이스로 전송된다.

</div>

<h4 id="1341-엔티티를-삽입하고-업데이트하는-방법">13.4.1. 엔티티를 삽입하고 업데이트하는 방법</h4>
<p><code>R2dbcEntityTemplate</code>에는 객체를 저장하고 삽입하는 편리한 방법이 있다. 변환 프로세스를 보다 세밀하게 제어하기 위해 Spring 컨버터를 <code>R2dbcCustomConversions</code>에 등록할 수 있다(예를 들면, <code>Converter&lt;Person, OutboundRow&gt;</code>, <code>Converter&lt;Row, Person&gt;</code>).</p>
<p>저장 작업을 사용하는 간단한 경우는 POJO를 저장하는 것이다. 이 경우에 테이블 이름은 클래스의 이름(전체 규정이 아님)에 의해 결정된다. 특정 컬렉션 이름을 사용하여 저장 작업을 호출할 수도 있다. 매핑 메타데이터를 사용하여 객체를 저장하는 컬렉션을 재정의할 수 있다.</p>
<p>삽입 또는 저장할 때에 <code>Id</code> 프로퍼티이 설정되지 않은 경우, 해당 값은 데이터베이스에서 자동으로 생성된다고 가정한다. 자동 생성의 경우에는 클래스내의 <code>Id</code> 프로퍼티 또는 필드의 타입은 <code>Long</code> 또는 <code>Integer</code>가 아니면 안된다.</p>
<p>다음 예제는 행을 삽입하고 그 내용을 얻는 방법을 보여준다.</p>
<p><strong>예 55:  R2dbcEntityTemplate를 사용하여 엔티티 삽입 및 검색</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">Person</span> <span style="color:#000">person</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;John&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Doe&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">saved</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">insert</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">person</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">loaded</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">selectOne</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">where</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;firstname&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">is</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;John&#34;</span><span style="color:#ce5c00;font-weight:bold">)),</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>다음 삽입 및 갱신 작업을 사용할 수 있다.</p>
<p>유사한 삽입 작업 세트도 사용할 수 있다.</p>
<ul>
<li>
<p><code>Mono&lt;T&gt; insert (T objectToSave)</code> : 객체를 기본 테이블에 삽입한다.</p>
</li>
<li>
<p><code>Mono&lt;T&gt; update (T objectToSave)</code> : 객체를 기본 테이블에 삽입한다.</p>
</li>
</ul>
<p>흐르는 API를 사용하여, 테이블 이름을 사용자 지정할 수 있다.</p>
<h4 id="1342-데이터-선택">13.4.2. 데이터 선택</h4>
<p><code>R2dbcEntityTemplate</code>의 <code>select(...)</code>와 <code>selectOne(...)</code> 메소드는 테이블로부터 데이터를 선택하는데 사용된다. 두 메소드 모두 <code>Query</code> 필드 프로젝션(field projection), <code>WHERE</code>절, <code>ORDER BY</code>절, 제한/오프셋 페이징을 정의하는 객체를 사용한다. 제한/오프셋 기능은 기본 데이터베이스에 관계없이 응용 프로그램에 투명한다. 이 기능은 각각의 SQL 플레이버간의 차이에 대응하기 위한 <code>R2dbcDialect</code> 추상화에 의해 지원되고 있다.</p>
<p><strong>예 56: <code>R2dbcEntityTemplate</code>을 사용하여 엔티티 선택</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">loaded</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">select</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">where</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;firstname&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">is</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;John&#34;</span><span style="color:#ce5c00;font-weight:bold">)),</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><h4 id="1343-fluent-api">13.4.3. Fluent API</h4>
<p>이 섹션에서는 플루언트 API의 사용 부분에 대해 설명한다. 다음 간단한 쿼리를 생각해 보자.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">people</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">select</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">all</span><span style="color:#ce5c00;font-weight:bold">();</span> <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span></code></pre></div><p>(1) <code>select(...)</code> 메소드에서 <code>Person</code>를 사용하면, 테이블 형식의 결과가 <code>Person</code> 결과 객체에 매핑된다.<br>
(2) <code>all()</code>행을 패칭(Fetching)하면 결과를 제한하지 않는 <code>Flux&lt;Person&gt;</code>가 반환된다.</p>
<p>다음 예제에서는 이름, <code>WHERE</code> 조건 및 <code>ORDER BY</code> 절로 테이블 이름을 지정하는 보다 복잡한 쿼리를 선언한다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">first</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">select</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">)</span>  <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">from</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;other_person&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">matching</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">where</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;firstname&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">is</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;John&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>     <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">and</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;lastname&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">in</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Doe&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;White&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">sort</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">by</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">desc</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;id&#34;</span><span style="color:#ce5c00;font-weight:bold">))))</span>                          <span style="color:#8f5902;font-style:italic">// (3)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">one</span><span style="color:#ce5c00;font-weight:bold">();</span>                                           <span style="color:#8f5902;font-style:italic">// (4)
</span></span></span></code></pre></div><p>(1) 테이블에서 이름으로 선택하면, 지정된 도메인 유형을 사용하는 행의 결과가 반환된다.
(2) 발행된 쿼리는 결과를 필터링으로 <code>firstname</code>와 <code>lastname</code> 열에 <code>WHERE</code> 조건을 선언한다.
(3) 결과는 각각의 컬럼 이름으로 재정렬될 수 있으며, 결과로 <code>ORDER BY</code> 절이 생성된다.
(4) 하나의 결과를 선택하면 한 행만 페치된다. 행을 소비하는 이 방법에서는 쿼리가 정확히 단일 결과를 반환할 것으로 예상된다. 쿼리의 결과가 둘 이상인 경우에 <code>Mono</code>라면 <code>IncorrectResultSizeDataAccessException</code>이 발생된다.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Tip</h4>

    <code>select(Class&lt;?&gt;)</code>를 통해 대상 유형을 지정하면, &ldquo;프로젝션&quot;을 결과에 직접 적용할 수 있다.

</div>

<p>다음 종료 방법을 사용하여 단일 엔티티 검색과 여러 엔터티 검색을 전환할 수 있다.</p>
<ul>
<li><code>first()</code>: 첫 번째 행만 사용하여 <code>Mono</code>를 반환한다. 쿼리가 결과를 반환하지 않으면, 반환된 <code>Mono</code>객체를 게시하지 않고 완료된다.</li>
<li><code>one()</code>: <code>Mono</code>를 반환하는 한 줄만 사용한다. 쿼리가 결과를 반환하지 않으면 반환된 <code>Mono</code> 객체를 게시하지 않고 완료된다. 쿼리가 여러 행을 반환하면 <code>Mono</code>는   <code>IncorrectResultSizeDataAccessException</code> 예외가 발생한다.</li>
<li><code>all()</code>: <code>Flux</code>을 반환하는 모든 반환된 행을 사용한다.</li>
<li><code>count()</code>: <code>Mono&lt;Long&gt;</code>을 반환하는 카운트 프로젝션을 적용한다.</li>
<li><code>exists()</code>: <code>Mono&lt;Boolean&gt;</code>를 반환하여, 쿼리가 행을 생성하는지 여부를 반환한다.</li>
</ul>
<p><code>select()</code> 진입점을 사용하여 <code>SELECT</code> 쿼리를 표현할 수 있다. 결과의 <code>SELECT</code> 쿼리는 자주 사용되는 절(<code>WHERE</code> 및 <code>ORDER BY</code>)을 지원하고 페이지네이션을 지원한다. 플루언트 API 스타일에 의해, 체인은 복수의 메소드를 함께 이해하면서, 코드를 이해하기 쉬워진다. 가독성을 높이기 위해 <code>Criteria</code> 인스턴스를 만드는 데 &lsquo;새로운&rsquo; 키워드를 사용하지 않는 정적 가져오기를 사용할 수 있다.</p>
<h5 id="criteria-클래스의-메소드">Criteria 클래스의 메소드</h5>
<p><code>Criteria</code> 클래스는 다음의 메소드를 제공한다. 이러한 메소드는 모두 SQL 연산자에 대응하고 있다.</p>
<ul>
<li><code>Criteria</code> <strong>and</strong> <code>(String column)</code> : 지정된 <code>property</code>을 가진 연결된 <code>Criteria</code>를 현재의 <code>Criteria</code>에 추가하고 새로 작성된 <code>Criteria</code>을 반환한다.</li>
<li><code>Criteria</code> <strong>or</strong> <code>(String column)</code> : 지정된 <code>property</code>을 가진 연결된 <code>Criteria</code>를 현재의 <code>Criteria</code>에 추가하고 새로 작성된 <code>Criteria</code>을 반환한다.</li>
<li><code>Criteria</code> <strong>greaterThan</strong> <code>(Object o)</code> : <code>&gt;</code> 연산자를 사용하여 기준을 만든다.</li>
<li><code>Criteria</code> <strong>greaterThanOrEquals</strong> <code>(Object o)</code> : <code>&gt;=</code> 연산자를 사용하여 기준을 만든다.</li>
<li><code>Criteria</code> <strong>in</strong> <code>(Object... o)</code> : varargs 인수에 <code>IN</code> 연산자를 사용하여 기준을 만든다.</li>
<li><code>Criteria</code> <strong>in</strong> <code>(Collection&lt;?&gt; collection)</code> : 컬렉션을 사용하여 <code>IN</code> 연산자를 사용하여 기준을 만든다.</li>
<li><code>Criteria</code> <strong>is</strong> <code>(Object o)</code> : 열 매칭(<code>property = value</code>)를 사용하여 기준을 만든다.</li>
<li><code>Criteria</code> <strong>isNull</strong> <code>()</code> :  <code>IS NULL</code> 연산자를 사용하여 기준을 만든다.</li>
<li><code>Criteria</code> <strong>isNotNull</strong> <code>()</code> :  <code>IS NOT NULL</code> 연산자를 사용하여 기준을 만든다.</li>
<li><code>Criteria</code> <strong>lessThan</strong> <code>(Object o)</code> :  <code>&lt;</code> 연산자를 사용하여 기준을 만든다.</li>
<li><code>Criteria</code> <strong>lessThanOrEquals</strong> <code>(Object o)</code> : <code>&lt;=</code> 연산자를 사용하여 기준을 만든다.</li>
<li><code>Criteria</code> <strong>like</strong> <code>(Object o)</code> : 이스케이프 문자 처리 없이 <code>LIKE</code> 연산자를 사용하여 기준을 만든다.</li>
<li><code>Criteria</code> <strong>not</strong> <code>(Object o)</code> : <code>!=</code> 연산자를 사용하여 기준을 만든다.</li>
<li><code>Criteria</code> <strong>notIn</strong> <code>(Object... o)</code> : varargs 인수에 <code>NOT IN</code> 연산자를 사용하여 기준을 만든다.</li>
<li><code>Criteria</code> <strong>notIn</strong> <code>(Collection&lt;?&gt; collection)</code> : 컬렉션을 사용하여 <code>NOT IN</code> 연산자를 사용하여 기준을 만든다.</li>
</ul>
<p><code>Criteria</code>은 <code>SELECT</code>, <code>UPDATE</code>, <code>DELETE</code> 쿼리를 사용할 수 있다.</p>
<h4 id="1344-데이터-삽입">13.4.4. 데이터 삽입</h4>
<p><code>insert()</code> 진입점을 사용하여 데이터를 삽입할 수 있다.</p>
<p>다음 간단한 형식화된 삽입 작업을 보도록 하자.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">insert</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">insert</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">using</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;John&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Doe&#34;</span><span style="color:#ce5c00;font-weight:bold">));</span> <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span></code></pre></div><p>(1) <code>into(...)</code> 메소드로 <code>Person</code>를 사용하면, 매핑 메타데이터를 기반으로 <code>INTO</code> 테이블이 설정된다. 또한 삽입할 <code>Person</code> 객체를 허용하는 <code>insert</code> 문을 준비한다.<br>
(2) 스칼라 <code>Person</code> 객체를 제공한다. 또는 <code>Publisher</code>를 지정하여 <code>INSERT</code> 명령문 스트림을 실행할 수 있다. 이 메소드는 모든 <code>null</code>이 아닌 값을 추출하고 삽입한다.</p>
<h4 id="1345-데이터-업데이트">13.4.5. 데이터 업데이트</h4>
<p><code>update()</code> 진입점을 사용하여 행을 업데이트할 수 있다. 데이터 업데이트는 할당을 지정하는 <code>Update</code>을 수락하고 업데이트할 테이블을 지정하는 것으로 시작된다. 또한 <code>Query</code>을 수락하여 <code>WHERE</code>절을 만든다.</p>
<p>다음 간단한 유형이 지정된 업데이트 작업을 보도록 하자.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">Person</span> <span style="color:#000">modified</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Integer</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">update</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">update</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">)</span>  <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">inTable</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;other_table&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>                           <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">matching</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">where</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;firstname&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">is</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;John&#34;</span><span style="color:#ce5c00;font-weight:bold">)))</span>   <span style="color:#8f5902;font-style:italic">// (3)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">apply</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">update</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;age&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">42</span><span style="color:#ce5c00;font-weight:bold">));</span>                        <span style="color:#8f5902;font-style:italic">// (4)
</span></span></span></code></pre></div><p>(1) <code>Person</code> 객체를 업데이트하고, 매핑 메타데이터를 기반으로 매핑을 적용한다.<br>
(2) <code>inTable(...)</code> 메소드를 호출하여, 다른 테이블 이름을 설정한다.<br>
(3) <code>WHERE</code> 절로 변환되는 쿼리를 지정한다.<br>
(4) <code>Update</code> 객체를 적용한다. 이 경우는 <code>age</code>를 <code>42</code>로 설정하고 영향을 받는 행 수를 반환한다.</p>
<h4 id="1346-데이터-삭제">13.4.6. 데이터 삭제</h4>
<p><code>delete()</code> 진입점을 사용하여 행을 삭제할 수 있다. 데이터 삭제는 삭제할 테이블 지정으로 시작하고 선택적으로 <code>Criteria</code>를 수락하여 <code>WHERE</code> 절을 만든다.</p>
<p>다음 간단한 삭제 작업을 보도록 하자.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Integer</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">delete</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">delete</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">)</span>  <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">from</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;other_table&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>                              <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">matching</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">where</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;firstname&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">is</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;John&#34;</span><span style="color:#ce5c00;font-weight:bold">)))</span>   <span style="color:#8f5902;font-style:italic">// (3)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">all</span><span style="color:#ce5c00;font-weight:bold">();</span>                                           <span style="color:#8f5902;font-style:italic">// (4)
</span></span></span></code></pre></div><p>(1) <code>Person</code> 객체를 삭제하고, 매핑 메타데이터를 기반으로 매핑을 적용한다.<br>
(2) <code>from(...)</code> 메소드를 호출하여, 다른 테이블 이름을 설정한다.<br>
(3) <code>WHERE</code> 절로 변환되는 쿼리를 지정한다.<br>
(4) 삭제 조작을 적용하여 영향을 받는 행 수를 리턴한다.</p>
<hr>
<h2 id="14-r2dbc-repository">14. R2DBC Repository</h2>
<p>이 장에서는 R2DBC의 리포지토리 지원 전문 분야에 대해 설명한다. 이 섹션에서는 <a href="/docs/spring-data/r2dbc/preface/#11-spring-data-%ec%a0%80%ec%9e%a5%ec%86%8c-%ec%9e%91%ec%97%85">Spring Data Repository 작업</a>에서 설명한 핵심 저장소 지원을 기반으로 한다. 이 섹션을 읽기 전에 여기에 설명된 기본 개념을 확실히 이해해야 한다.</p>
<h3 id="141-사용방법">14.1. 사용방법</h3>
<p>관계형 데이터베이스에 저장된 도메인 엔티티에 액세스하려면, 고급 리포지토리 지원을 사용하여 구현을 크게 용이하게 한다. 이렇게 하려면 리포지토리 인터페이스를 만든다. 다음의 <code>Person</code> 클래스를 보도록 하자.</p>
<p><strong>예 57: 샘플 Person 엔티티</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Person</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Id</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">Long</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8f5902;font-style:italic">// ... getters and setters omitted
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>다음 예는 이전의 <code>Person</code> 클래스의 저장소 인터페이스를 보여준다.</p>
<p><strong>예 58: Person 엔티티를 영속화하는 기본 리포지토리 인터페이스</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">PersonRepository</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">ReactiveCrudRepository</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">Long</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8f5902;font-style:italic">// additional custom query methods go here
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>R2DBC 리포지토리를 구성하려면 <code>@EnableR2dbcRepositories</code> 어노테이션을 사용할 수 있다. 기본 패키지가 구성되지 않은 경우 인프라스트럭처는 어노테이션이 달린 구성 클래스의 패키지를 스캔한다. 다음 예는 리포지토리에 Java 구성을 사용하는 방법을 보여준다.</p>
<p><strong>예 59: 리포지토리의 Java 구성</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@EnableR2dbcRepositories</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">ApplicationConfig</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">AbstractR2dbcConfiguration</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">ConnectionFactory</span> <span style="color:#000">connectionFactory</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>도메인 리포지토리는 <code>ReactiveCrudRepository</code> 상속되므로 엔터티에 액세스하기 위한 리액티브 CRUD 작업을 제공한다. <code>ReactiveCrudRepository</code>뿐만 아니라 <code>PagingAndSortingRepository</code>와 비슷한 정렬 기능을 추가하는 <code>ReactiveSortingRepository</code>도 있다. 리포지토리 인스턴스 작업은 클라이언트에 삽입하는 종속성 문제일 뿐이다. 다음 코드로 모든 <code>Person</code> 객체를 얻을 수 있다.</p>
<p><strong>예 60: 개인 엔티티에 대한 페이징 액세스</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@ExtendWith</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">SpringExtension</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@ContextConfiguration</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">PersonRepositoryTests</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">PersonRepository</span> <span style="color:#000">repository</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Test</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">readsAllEntitiesCorrectly</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">repository</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">findAll</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">as</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">StepVerifier</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">create</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">expectNextCount</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">verifyComplete</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Test</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">readsEntitiesByNameCorrectly</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">repository</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">findByFirstname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Hello World&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">as</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">StepVerifier</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">create</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">expectNextCount</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">verifyComplete</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>앞의 예에서는 Spring 단위 테스트 지원을 사용하여 응용 프로그램 컨텍스트를 만든다. 이렇게 하면 테스트 케이스에 어노테이션 기반 의존 주입이 수행된다. 테스트 메소드 내에서는 리포지토리를 사용하여 데이터베이스에 쿼리를 실행한다. 결과에 대한 기대를 검증하기 위해 테스트 지원으로 <code>StepVerifier</code> 사용한다.</p>
<h3 id="142-쿼리-메소드">14.2. 쿼리 메소드</h3>
<p>일반적으로 리포지토리에서 트리거하는 데이터 액세스의 대부분은 데이터베이스에 대해 실행되는 쿼리이다. 이러한 쿼리의 정의는 다음 예제와 같이 리포지토리 인터페이스에서 메소드를 선언하는 것이다.</p>
<p><strong>예 61: PersonRepository 및 쿼리 메소드</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">ReactivePersonRepository</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">ReactiveSortingRepository</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">Long</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">findByFirstname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">);</span>                                   <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">findByFirstname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Publisher</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">);</span>                        <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">findByFirstnameOrderByLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">Pageable</span> <span style="color:#000">pageable</span><span style="color:#ce5c00;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// (3)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">findByFirstnameAndLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">);</span>       <span style="color:#8f5902;font-style:italic">// (4)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">findFirstByLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">);</span>                                <span style="color:#8f5902;font-style:italic">// (5)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Query</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;SELECT * FROM person WHERE lastname = :lastname&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">findByLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">);</span>                                     <span style="color:#8f5902;font-style:italic">// (6)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Query</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;SELECT firstname, lastname FROM person WHERE lastname = $1&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">findFirstByLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">);</span>                                <span style="color:#8f5902;font-style:italic">// (7)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>(1) 이 메소드는 지정한 <code>firstname</code>을 가진 모든 사람들을 조회하는 쿼리이다. 쿼리는 <code>And</code> 및 <code>Or</code>를 연결할 수 있는 제약의 메소드 이름을 구문 분석하여 파생된다. 메소드 이름은 <code>SELECT  ...  FROM person WHERE firstname = :firstname</code>와 같은 쿼리 식이 된다.<br>
(2) 이 메소드는 지정된 <code>Publisher</code>에 의해 <code>firstname</code> 발급되면, 지정된 <code>firstname</code>을 가진 모든 사람의 쿼리를 나타낸다.<br>
(3) <code>Pageable</code>를 사용하여 오프셋 및 정렬 매개 변수를 데이터베이스에 전달한다.<br>
(4) 지정된 조건으로 단일 엔티티를 검색한다. 고유하지 않은 결과에 대해서는 <code>IncorrectResultSizeDataAccessException</code>으로 완료된다.<br>
(5) <code>&lt;4&gt;</code>가 아니면 쿼리에서 더 많은 결과 행을 생성하더라도 첫 번째 엔터티만 항상 보내진다.<br>
(6) <code>findByLastname</code> 메소드는 지정된 성을 가진 모든 사람들의 쿼리를 표시한다.<br>
(7) <code>firstname</code> 및 <code>lastname</code> 열만 보여주는 단일 <code>Person</code> 엔티티를 조회한다. 어노테이션이 있는 쿼리는 이 예에서 <code>Postgres</code> 바인딩 마커인 네이티브 바인드 마커를 사용한다.</p>
<p><code>@Query</code> 어노테이션에서 사용되는 <code>select</code> 문의 열은 각각의 속성에 대해 <code>NamingStrategy</code>에 의해 생성된 이름과 일치해야 한다. <code>select</code> 문과 일치하는 열이 포함되어 있지 않으면, 해당 속성이 설정되지 않는다. 해당 속성이 영속성 생성자에 필요한 경우는 null 또는 (프리미티브형의 경우) 디폴트치가 제공된다.</p>
<p>다음 표는 쿼리 메소드에서 지원되는 키워드를 보여준다.</p>
<p><strong>표 2: 쿼리 메소드에서 지원되는 키워드</strong></p>
<table>
<thead>
<tr>
<th>키워드</th>
<th>샘플</th>
<th>논리적 결과</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>After</code></td>
<td><code>findByBirthdateAfter(Date date)</code></td>
<td><code>birthdate &gt; date</code></td>
</tr>
<tr>
<td><code>GreaterThan</code></td>
<td><code>findByAgeGreaterThan(int age)</code></td>
<td><code>age &gt; age</code></td>
</tr>
<tr>
<td><code>GreaterThanEqual</code></td>
<td><code>findByAgeGreaterThanEqual(int age)</code></td>
<td><code>age &gt;= age</code></td>
</tr>
<tr>
<td><code>Before</code></td>
<td><code>findByBirthdateBefore(Date date)</code></td>
<td><code>birthdate &lt; date</code></td>
</tr>
<tr>
<td><code>LessThan</code></td>
<td><code>findByAgeLessThan(int age)</code></td>
<td><code>age &lt; age</code></td>
</tr>
<tr>
<td><code>LessThanEqual</code></td>
<td><code>findByAgeLessThanEqual(int age)</code></td>
<td><code>age &lt;= age</code></td>
</tr>
<tr>
<td><code>Between</code></td>
<td><code>findByAgeBetween(int from, int to)</code></td>
<td><code>age BETWEEN from AND to</code></td>
</tr>
<tr>
<td><code>NotBetween</code></td>
<td><code>findByAgeNotBetween(int from, int to)</code></td>
<td><code>age NOT BETWEEN from AND to</code></td>
</tr>
<tr>
<td><code>In</code></td>
<td><code>findByAgeIn(Collection&lt;Integer&gt; ages)</code></td>
<td><code>age IN (age1, age2, ageN)</code></td>
</tr>
<tr>
<td><code>NotIn</code></td>
<td><code>findByAgeNotIn(Collection ages)</code></td>
<td><code>age NOT IN (age1, age2, ageN)</code></td>
</tr>
<tr>
<td><code>IsNotNull, NotNull</code></td>
<td><code>findByFirstnameNotNull()</code></td>
<td><code>firstname IS NOT NULL</code></td>
</tr>
<tr>
<td><code>IsNull, Null</code></td>
<td><code>findByFirstnameNull()</code></td>
<td><code>firstname IS NULL</code></td>
</tr>
<tr>
<td><code>Like, StartingWith, EndingWith</code></td>
<td><code>findByFirstnameLike(String name)</code></td>
<td><code>firstname LIKE name</code></td>
</tr>
<tr>
<td><code>NotLike, IsNotLike</code></td>
<td><code>findByFirstnameNotLike(String name)</code></td>
<td><code>firstname NOT LIKE name</code></td>
</tr>
<tr>
<td>문자열의 <code>Containing</code></td>
<td><code>findByFirstnameContaining(String name)</code></td>
<td><code>firstname LIKE '%' + name +'%'</code></td>
</tr>
<tr>
<td>문자열의 <code>NotContaining</code></td>
<td><code>findByFirstnameNotContaining(String name)</code></td>
<td><code>firstname NOT LIKE '%' + name + '%'</code></td>
</tr>
<tr>
<td><code>(No keyword)</code></td>
<td><code>findByFirstname(String name)</code></td>
<td><code>firstname = name</code></td>
</tr>
<tr>
<td><code>Not</code></td>
<td><code>findByFirstnameNot(String name)</code></td>
<td><code>firstname != name</code></td>
</tr>
<tr>
<td><code>IsTrue, True</code></td>
<td><code>findByActiveIsTrue()</code></td>
<td><code>active IS TRUE</code></td>
</tr>
<tr>
<td><code>IsFalse, False</code></td>
<td><code>findByActiveIsFalse()</code></td>
<td><code>active IS FALSE</code></td>
</tr>
</tbody>
</table>
<h3 id="1421-쿼리-변경">14.2.1. 쿼리 변경</h3>
<p>이전 섹션에서는 특정 엔터티 또는 엔터티 컬렉션에 액세스하기 위한 쿼리를 선언하는 방법에 대해 설명하였다. 이전 표의 키워드를 사용하면 <code>delete...By</code> 또는 <code>remove...By</code>를 조합하여 일치하는 행을 삭제하는 파생 쿼리를 만들 수 있다.</p>
<p><strong>예 62: <code>Delete...By</code> 쿼리</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">ReactivePersonRepository</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">ReactiveSortingRepository</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Integer</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">deleteByLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">);</span>            <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Void</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">deletePersonByLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">);</span>         <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Boolean</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">deletePersonByLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">);</span>      <span style="color:#8f5902;font-style:italic">// (3)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>(1) <code>Mono&lt;Integer&gt;</code> 반환 유형을 사용하면, 영향을 받는 행 수를 반환한다.<br>
(2) <code>Void</code>를 사용하면 결과 값을 출력하지 않고 행이 성공적으로 삭제되었는지 여부를 보고한다.<br>
(3) <code>Boolean</code>를 사용하면 적어도 하나의 행이 삭제되었는지 여부를 보고한다.</p>
<p>이 접근 방식은 포괄적인 사용자 지정 기능에 적합하므로, 다음 예제와 같이 쿼리 메소드에 <code>@Modifying</code> 어노테이션을 붙여 매개 변수 바인딩만 필요한 쿼리를 변경할 수 있다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Modifying</span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Query</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;UPDATE person SET firstname = :firstname where lastname = :lastname&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Integer</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">setFixedFirstnameFor</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>변경 쿼리의 결과는 다음과 같다.</p>
<ul>
<li><code>Void</code>(또는 Kotlin <code>Unit</code>)은 업데이트 카운트를 버리고 완료를 기다린다.</li>
<li>영향을 받는 행 수를 출력하는 <code>Integer</code> 또는 다른 숫자 유형.</li>
<li>적어도 1개의 행이 갱신되었는지 어떤지를 출력하는 <code>Boolean</code>.</li>
</ul>
<p><code>@Modifying</code> 어노테이션은 <code>@Query</code> 어노테이션과 결합한 경우에만 관련이 있다. 파생된 사용자 지정 메소드에서는 이 어노테이션이 필요하지 않는다.</p>
<p>또는 <a href="/docs/spring-data/r2dbc/preface/#116-spring-data-%ec%a0%80%ec%9e%a5%ec%86%8c%ec%9d%98-%ec%bb%a4%ec%8a%a4%ed%85%80-%ea%b5%ac%ed%98%84">Spring Data 저장소의 커스텀 구현</a>에서 설명하고 있는 있는 기능을 사용하여 커스텀 변경 동작을 추가할 수 있다.</p>
<h4 id="1422-spel-표현식을-사용한-쿼리">14.2.2. SpEL 표현식을 사용한 쿼리</h4>
<p>쿼리 문자열 정의를 SpEL 식과 함께 사용하여 런타임에 동적 쿼리를 만들 수 있다. SpEL 식은 쿼리를 실행하기 직전에 평가되는 서술 값(predicate values)을 제공할 수 있다.</p>
<p>표현식은 모든 인수를 포함하는 배열을 통해 메소드 인수를 공개한다. 다음 쿼리는 <code>[0]</code>를 사용하여, <code>lastname</code>의 서술 값을 선언한다(이는 <code>:lastname</code> 매개 변수 바인딩과 동일).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Query</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;SELECT * FROM person WHERE lastname = :#{[0]}&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">findByQueryWithExpression</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span></code></pre></div><p>쿼리 문자열 SpEL은 쿼리를 향상시키는 강력한 방법이다. 그러나 이런 것들은 또한 불필요한 인수의 넓은 범위를 받아들일 수 있다. 쿼리에 불필요한 변경이 발생하지 않도록 쿼리에 전달하기 전에 문자열을 제거해야 한다.</p>
<p>표현식 지원은 Query SPI:<code>org.springframework.data.spel.spi.EvaluationContextExtension</code>를 통해 확장 가능하다. Query SPI는 속성과 기능을 제공하고, 루트 객체를 사용자 지정할 수 있다. 확장 기능은 쿼리를 만들 때 SpEL 평가할 시에 응용 프로그램 컨텍스트에서 가져온다.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    SpEL 표현식을 일반 매개 변수와 함께 사용하는 경우에는 네이티브 바인드 마커 대신 명명된 매개변수 표기법을 사용하여 적절한 바인드 순서를 보장한다.

</div>

<h4 id="1423-예시에-의한-문의-query-by-example">14.2.3. 예시에 의한 문의 (Query By Example)</h4>
<p>Spring Data R2DBC에서는 Query By Example을 사용하여 쿼리를 만들 수도 있다. 이 기술을 사용하면 &ldquo;프로브(probe)&rdquo; 객체를 사용할 수 있다. 기본적으로 비어 있거나 <code>null</code>이 아닌 모든 필드가 일치하는데 사용된다.</p>
<p>예를 들면 다음과 같다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">Employee</span> <span style="color:#000">employee</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">Employee</span><span style="color:#ce5c00;font-weight:bold">();</span> <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">employee</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Frodo&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">Example</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Employee</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">example</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Example</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">of</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">employee</span><span style="color:#ce5c00;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Employee</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">employees</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">repository</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">findAll</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">example</span><span style="color:#ce5c00;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// (3)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// do whatever with the flux
</span></span></span></code></pre></div><p>(1) 조건을 사용하여 도메인 객체를 만든다(<code>null</code> 필드는 무시된다).<br>
(2) 도메인 객체를 사용하여, <code>Example</code>을 만든다.<br>
(3) <code>R2dbcRepository</code>을 통해, 쿼리를 실행한다(<code>Mono</code>에는 <code>findOne</code>을 사용한다).</p>
<p>이는 도메인 객체를 사용하여 간단한 프로브를 만드는 방법을 보여준다. 이 경우는 <code>Frodo</code>와 같은 <code>Employee</code> 객체의 <code>name</code> 필드를 기반으로 쿼리를 실행한다. <code>null</code> 필드는 무시된다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000">Employee</span> <span style="color:#000">employee</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">Employee</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000">employee</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Baggins&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">employee</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setRole</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;ring bearer&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">ExampleMatcher</span> <span style="color:#000">matcher</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">matching</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withMatcher</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;name&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">endsWith</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withIncludeNullValues</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#8f5902;font-style:italic">// (3)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withIgnorePaths</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;role&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// (4)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">Example</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Employee</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">example</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Example</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">of</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">employee</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">matcher</span><span style="color:#ce5c00;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// (5)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Employee</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">employees</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">repository</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">findAll</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">example</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// do whatever with the flux
</span></span></span></code></pre></div><p>(1) 모든 필드와 일치하는 사용자 정의 <code>ExampleMatcher</code>를 만든다(<code>matchingAny()</code>를 사용하여 <strong>ANY</strong> 필드 일치)
(2) <code>name</code> 필드는 필드의 뒷부분과 일치하는 와일드카드를 사용한다.
(3) 열을 <code>null</code>과 일치시킨다(관계형 데이터베이스의 경우는 <code>NULL</code>이 <code>NULL</code>과 같지 않음을 잊지 말자).
(4) 쿼리를 만들 때에 <code>role</code> 필드를 무시한다.
(5) 사용자 정의 <code>ExampleMatcher</code>를 프로브에 연결한다.</p>
<p>모든 속성에 <code>withTransform()</code> 적용하여 쿼리를 만들기 전에 속성을 변환할 수도 있다. 예: 쿼리가 생성되기 전에 <code>toUpperCase()</code>을 <code>String</code> -based(기반) 속성에 적용할 수 있다.</p>
<p>예시적인 쿼리는 쿼리에 필요한 모든 필드를 미리 모르는 경우에 매우 유용하다. 사용자가 필드를 선택할 수 있는 웹 페이지에서 필터를 만드는 경우에 Query By Example은 이를 효율적인 쿼리에 유연하게 통합하는 좋은 방법이다.</p>
<h4 id="1424-엔티티-상태-검출-전략">14.2.4. 엔티티 상태 검출 전략</h4>
<p>다음 표는 엔터티가 새로운지에 대한 여부를 감지하기 위해 Spring Data가 제공하는 전략을 설명한다.</p>
<p><strong>표 3 : Spring Data에서 엔티티가 새로운지 여부를 감지하는 옵션</strong></p>
<table>
<thead>
<tr>
<th><code>@Id</code> - 속성 검사(기본값)</th>
<th>기본적으로 Spring Data는 지정된 엔티티의 식별자 속성을 검사한다. 기본 유형인 경우에는 식별자 속성이 <code>null</code> 또는 <code>0</code>인 엔티티는 새로운 것으로 간주된다. 그렇지 않으면 새로운 것이 아닌 것으로 간주된다.</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@Version</code> - 속성 검사</td>
<td><code>@Version</code>으로 어노테이션이 달린 속성이 존재하는 <code>null</code>인 경우 또는 기본 유형인 <code>0</code>의 버전 속성의 경우에 엔터티는 새로운 것으로 간주된다. 버전 속성은 존재하는 값이 다른 경우, 엔티티는 신규가 아닌 것으로 간주된다. 버전 속성이 존재하지 않으면 Spring Data는 식별자 속성의 검사로 되돌아 간다.</td>
</tr>
<tr>
<td><code>Persistable</code> 구현</td>
<td>엔티티가 <code>Persistable</code>를 구현하고 있는 경우, Spring Data 는 엔티티의 <code>isNew(...)</code> 메소드에 새로운 검출을 위양한다. 자세한 내용은 Javadoc 을 참조하라<br><br>참고:  <code>AccessType.PROPERTY</code>를 사용하면 <code>Persistable</code>의 속성이 검색되고 유지된다. 이를 방지하려면 <code>@Transient</code>을 사용한다.</td>
</tr>
<tr>
<td>사용자 정의 <code>EntityInformation</code> 구현 제공</td>
<td>모듈 고유의 리포지토리 팩토리의 서브 클래스를 작성하여 <code>getEntityInformation(...)</code> 메소드를 오버라이드(override) 하는 것으로, 리포지터리 베이스의 구현으로 사용되는 <code>EntityInformation</code> 추상화를 커스터마이즈 할 수 있다. 다음에 모듈 고유의 리포지토리 팩토리의 커스텀 구현을 Spring Bean 로서 등록할 필요가 있다. 이것이 필요한 것은 거의 없다.</td>
</tr>
</tbody>
</table>
<h4 id="1425-id-생성generation">14.2.5. ID 생성(Generation)</h4>
<p>Spring Data R2DBC는 ID를 사용하여 엔티티를 식별한다. 엔티티의 ID는 Spring Data의 <a href="https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/annotation/Id.html" target="_blank" rel="noopener"><code>@Id</code><i class="fas fa-external-link-alt"></i></a> 어노테이션이 붙어야 한다.</p>
<p>데이터베이스에 ID 열의 자동 증가(auto-increment) 열이 있는 경우는 생성된 값은 데이터베이스에 삽입된 후 엔터티로 설정된다.</p>
<p>Spring Data R2DBC는 엔티티가 새롭고 식별자의 값이 디폴트로 초기값이 되어 있는 경우, 식별자의 열의 값을 삽입하려고 하지 않는다. 이는 일반 유형의 경우는 <code>0</code>이 되고, 식별자 프로퍼티가 <code>Long</code>등의 수치 래퍼 유형을 사용하고 있는 경우는 <code>null</code> 이다.</p>
<p>중요한 제약 중 하나는 엔티티를 저장한 후에 엔티티가 새로운 것이 아니어야 한다는 것이다. 그 엔티티가 새로운지 여부는 엔티티 상태의 일부이다. 자동 증가 열은 ID 열의 값을 사용하여 Spring Data에 의해 ID를 설정하기 때문에 자동으로 수행된다.</p>
<h4 id="1426-낙관적-잠금-optimistic-locking">14.2.6. 낙관적 잠금 (Optimistic Locking)</h4>
<p><code>@Version</code> 어노테이션은 R2DBC 컨텍스트에서 JPA와 유사한 구문을 제공하여 업데이트가 일치하는 버전의 행에만 적용되도록 한다. 버전 속성의 실제 값은 다른 작업이 그 사이에 행을 변경할 때 업데이트가 영향을 주지 않도록 업데이트 쿼리에 추가된다. 이 경우는 <code>OptimisticLockingFailureException</code>가 throw 된다. 다음 예제는 이러한 기능을 보여준다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Table</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Person</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Id</span> <span style="color:#000">Long</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Version</span> <span style="color:#000">Long</span> <span style="color:#000">version</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">R2dbcEntityTemplate</span> <span style="color:#000">template</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">...;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">daenerys</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">insert</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Daenerys&#34;</span><span style="color:#ce5c00;font-weight:bold">));</span>                      <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">Person</span> <span style="color:#000">other</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">select</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                 <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">matching</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">where</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;id&#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">is</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">daenerys</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getId</span><span style="color:#ce5c00;font-weight:bold">())))</span>
</span></span><span style="display:flex;"><span>                 <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">first</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">block</span><span style="color:#ce5c00;font-weight:bold">();</span>                                                    <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">daenerys</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Targaryen&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">update</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">daenerys</span><span style="color:#ce5c00;font-weight:bold">);</span>                                                            <span style="color:#8f5902;font-style:italic">// (3)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">update</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">other</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">subscribe</span><span style="color:#ce5c00;font-weight:bold">();</span> <span style="color:#8f5902;font-style:italic">// emits OptimisticLockingFailureException        // (4)
</span></span></span></code></pre></div><p>(1) 먼저 행을 삽입한다. <code>version</code>로 <code>0</code>으로 설정된다.<br>
(2) 방금 삽입한 행을 로드한다. <code>version</code> 그것은 <code>0</code>으로 남아있다.<br>
(3) 행을 <code>version = 0</code>으로 업데이트한다. <code>lastname</code>을 설정하고 <code>version</code>을 <code>1</code>로 범프(bump)한다.
(4) <code>version = 0</code>이 아직 남아 있는 이전에 로드된 행을 업데이트해 보자. 현재 <code>version</code>는 <code>1</code>이므로 작업이 <code>OptimisticLockingFailureException</code>으로 실패한다.</p>
<h4 id="1427-프로젝션-projections">14.2.7. 프로젝션 (Projections)</h4>
<p>Spring Data 쿼리 메소드는 일반적으로 리포지토리에 의해 관리되는 집계 루트의 하나 이상의 인스턴스를 반환한다. 다만, 이러한 유형의 특정 속성을 기반으로 프로젝션을 만드는 것이 바람직할 수 있다. Spring Data 에서는 전용의 반환값형을 모델화하여 관리 대상 집합체의 부분 뷰를 보다 선택적으로 얻을 수 있다.</p>
<p>다음 예제와 같은 저장소 및 집계 루트 유형을 보도록 하자.</p>
<p><strong>예 63: 샘플 집계 및 리포지토리</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Person</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Id</span> <span style="color:#000">UUID</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Address</span> <span style="color:#000">address</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Address</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">String</span> <span style="color:#000">zipCode</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">city</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">street</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">PersonRepository</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">Repository</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">UUID</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">findByLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>여기에서 사람의 이름 속성만 검색한다고 해보자. Spring Data는 이를 달성하기 위해 어떤 의미를 가지고 있을까? 이 섹션의 나머지는 그 질문에 답한다.</p>
<h5 id="인터페이스-기반-프로젝션">인터페이스 기반 프로젝션</h5>
<p>쿼리 결과를 이름 속성에만 제한하는 가장 쉬운 방법은 다음 예제와 같이 읽을 속성의 접근자 메소드를 공개하는 인터페이스를 선언하는 것이다.</p>
<p><strong>예 64 : 속성의 서브 세트를 취득하는 프로젝션 인터페이스</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">NamesOnly</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getFirstname</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getLastname</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>여기서 중요한 것은 여기에 정의된 속성이 집계 경로의 속성과 정확히 일치한다는 것이다. 이렇게 하면 쿼리 메소드를 다음과 같이 추가할 수 있다.</p>
<p><strong>예 65: 쿼리 메소드에서 인터페이스 기반 프로젝션을 사용하는 리포지토리</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">PersonRepository</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">Repository</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">UUID</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">NamesOnly</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">findByLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>쿼리 실행 엔진은 반환된 각 요소에 대해 런타임에 해당 인터페이스의 프록시 인스턴스를 만들고 게시된 메소드에 대한 호출을 대상 객체로 전달한다.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    기본 메소드 (예 : <code>CrudRepository</code> 저장소 특정 리포지토리 인터페이스 또는 <code>Simple...Repository</code> 선언됨)를 재정의(override)하는 메소드를 <code>Repository</code> 선언하면 선언된 리턴 유형에 관계없이 기본 메소드가 호출된다. 기본 메소드는 프로젝션에 사용할 수 없으므로 호환 가능한 리턴 유형을 사용해야 한다. 일부 저장소 모듈은 <code>@Query</code> 어노테이션을 지원하여 재정의된 기본 메소드를 쿼리 메소드로 변환한다. 이 쿼리 메소드를 사용하여 프로젝션을 반환할 수 있다.

</div>

<p>프로젝션은 재귀적으로 사용할 수 있다. <code>Address</code> 정보의 일부를 포함하고 싶다면, 다음의 예와 같이 그렇게 하기 위해 투용 인터페이스를 작성하여 <code>getAddress()</code>의 선언으로부터 그 인터페이스를 반환한다.</p>
<p><strong>예 66 : 속성의 서브 세트를 취득하는 프로젝션 인터페이스</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">PersonSummary</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getFirstname</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getLastname</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">AddressSummary</span> <span style="color:#000">getAddress</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">AddressSummary</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">String</span> <span style="color:#000">getCity</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>메소드의 호출시에, 타겟 인스턴스의 <code>address</code> 프로퍼티를 받아와서 순서대로 프로젝션 프록시에 감싸지게 된다.</p>
<h5 id="닫힌-프로젝션-closed-projections">닫힌 프로젝션 (Closed Projections)</h5>
<p>접근자 메소드가 모든 대상 집합의 속성과 일치하는 프로젝션 인터페이스는 닫힌 프로젝션으로 간주된다. 다음 예제(이 섹션의 전반부에서도 사용했다)는 닫힌 프로젝션이다.</p>
<p><strong>예 67: 닫힌 프로젝션</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">NamesOnly</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getFirstname</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getLastname</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>닫힌 프로젝션을 사용하는 경우는 Spring Data는 쿼리 실행을 최적화할 수 있다. 이는 프로젝션 프록시 백업에 필요한 모든 속성을 알고 있기 때문이다. 자세한 내용은 참조 문서의 모듈별 부분을 참조하여라.</p>
<h5 id="열린-프로젝션-open-projections">열린 프로젝션 (Open Projections)</h5>
<p>다음 예제와 같이 <code>@Value</code> 어노테이션을 사용하여 프로젝션 인터페이스의 접근자 메소드를 사용하여 새 값을 계산할 수도 있다.</p>
<p><strong>예 68: 열린 프로젝션</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">NamesOnly</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Value</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;#{target.firstname + &#39; &#39; + target.lastname}&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getFullName</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>프로젝션을 지원하는 집계 루트는 <code>target</code> 변수에서 사용할 수 있다. <code>@Value</code>를 사용한 프로젝션 인터페이스는 개방 프로젝션이다. 이 경우 Spring Data는 쿼리 실행 최적화를 적용할 수 없다. 이는 SpEL 표현식이 집계 루트의 모든 속성을 사용할 수 있기 때문이다.</p>
<p><code>@Value</code>에서 사용되는 표현식은 너무 복잡해서는 안된다. String 변수에서 프로그래밍을 피하고 싶을 것이다. 매우 간단한 식의 경우에 첫번째 옵션은 다음의 예제와 같이 기본 메소드(Java 8에서 도입)를 사용하는 것이다.</p>
<p><strong>예 69: 사용자 정의 로직에 기본 메소드를 사용하는 프로젝션 인터페이스</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">NamesOnly</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getFirstname</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getLastname</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">default</span> <span style="color:#000">String</span> <span style="color:#000">getFullName</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">getFirstname</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">concat</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34; &#34;</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">concat</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">getLastname</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>이 접근 방식은 프로젝션 인터페이스에서 공개되는 다른 접근자 메소드에 순수한 기반으로 논리를 구현할 수 있어야 합니다. 더 유연한 두번째 옵션은 Spring Bean에 사용자 정의 로직을 구현하고 다음 예제와 같이 SpEL 표현식에서 호출하는 것이다.</p>
<p><strong>예 70: 간단한 Person 객체</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">MyBean</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getFullName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span> <span style="color:#000">person</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">NamesOnly</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Value</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;#{@myBean.getFullName(target)}&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getFullName</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>SpEL 표현식이 <code>myBean</code> 을 참조하여 <code>getFullName(...)</code> 메소드를 호출하고, 프로젝션 대상을 메소드 매개 변수로 전송하는 방법에 주목하자. SpEL식의 평가를 뒷받침하는 메소드는 메소드 매개 변수를 사용할 수도 있다. 이 매개 변수는 표현식에서 참조할 수 있다. 메소드의 매개 변수는 <code>args</code>라는 <code>Object</code> 배열을 통해 사용할 수 있다. 다음 예제에서는 <code>args</code> 배열에서 메소드 매개 변수를 검색하는 방법을 보여 준다.</p>
<p><strong>예 71: 샘플 Person 객체</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">NamesOnly</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Value</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;#{args[0] + &#39; &#39; + target.firstname + &#39;!&#39;}&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getSalutation</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">prefix</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>다시 말하지만, 더 복잡한 표현식의 경우 이전에 설명한 대로 Spring Bean을 사용하고 표현식이 메소드를 호출하도록 해야 한다.</p>
<h5 id="null-허용-래퍼-nullable-wrappers">null 허용 래퍼 (Nullable Wrappers)</h5>
<p>프로젝션 인터페이스의 Getter는 null 허용 래퍼를 사용하여 null의 안전성을 향상시킬 수 있다. 현재 지원되는 래퍼 유형은 다음과 같다.</p>
<ul>
<li><code>java.util.Optional</code></li>
<li><code>com.google.common.base.Optional</code></li>
<li><code>scala.Option</code></li>
<li><code>io.vavr.control.Option</code></li>
</ul>
<p><strong>예 72: null 허용 래퍼를 사용한 프로젝션 인터페이스</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">NamesOnly</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Optional</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">getFirstname</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>기본 프로젝션 값이 <code>null</code>이 아닌 경우, 값은 래퍼 유형의 현재 표현을 사용하여 반환된다. 백킹값(backing value)이 <code>null</code>의 경우, getter 메소드는 사용된 래퍼 타입의 빈 상태로 반환한다.</p>
<h5 id="클래스-기반-프로젝션dto">클래스 기반 프로젝션(DTO)</h5>
<p>프로젝션을 정의하는 또 다른 방법은 검색할 필드의 속성을 보유하는 값 유형 DTO(데이터 전송 객체)를 사용하는 것이다. 이러한 DTO 유형은 프록시가 발생하지 않고 중첩된 프로젝션을 적용할 수 없다는 점을 제외하면 프로젝션 인터페이스와 정확히 동일한 방식으로 사용할 수 있다.</p>
<p>저장소가 로드하는 필드를 제한하는 것으로 쿼리 실행을 최적화하는 경우, 로드되는 필드는 공개된 생성자의 매개변수 이름에서 결정된다.</p>
<p>다음 예는 프로젝션 DTO를 보여준다.</p>
<p><strong>예 73: 프로젝션 DTO</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">NamesOnly</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">NamesOnly</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">firstname</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">lastname</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getFirstname</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">firstname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">getLastname</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">lastname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8f5902;font-style:italic">// equals(...) and hashCode() implementations
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Tip</h4>

    <p><strong>프로젝션 DTO의 정형 코드 피하기</strong><br>
<code>@Value</code> 어노테이션을 제공하는 <a href="https://projectlombok.org/" target="_blank" rel="noopener">프로젝트 Lombok<i class="fas fa-external-link-alt"></i></a>을 사용하면, DTO 코드를 극적으로 단순화 할 수 있다(이전 인터페이스 예제에서 설명한 Spring의 <code>@Value</code> 어노테이션과 혼동하지 말자). Project Lombok의 <code>@Value</code> 어노테이션을 사용하는 경우는 앞의 샘플 DTO는 다음과 같다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Value</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">NamesOnly</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>Field는 기본적으로 <code>private final</code>이고, 클래스가 모든 필드를 가져와서 <code>equals(...)</code> 및 <code>hashCode()</code> 메소드를 자동으로 구현하는 생성자를 공개한다.</p>


</div>

<h5 id="동적-프로젝션">동적 프로젝션</h5>
<p>지금까지 컬렉션의 반환 유형 또는 요소 유형으로 프로젝션 유형을 사용했다. 단, 호출할 때에 사용할 유형을 선택할 수도 있다(이를 통해 동적으로 된다). 동적 프로젝션을 적용하려면 다음 예제와 같은 쿼리 메소드를 사용한다.</p>
<p><strong>예 74: 동적 프로젝션 매개변수를 사용하는 리포지토리</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">PersonRepository</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">Repository</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">UUID</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">T</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">T</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">findByLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">Class</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">T</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">type</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>이 방법을 사용하면 다음 예제와 같이 메소드를 사용하여 그대로 두거나 프로젝션을 적용하여 집계를 얻을 수 있다.</p>
<p><strong>예 75: 동적 프로젝션에 리포지토리 사용</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">someMethod</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">PersonRepository</span> <span style="color:#000">people</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">aggregates</span> <span style="color:#ce5c00;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">people</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">findByLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Matthews&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Flux</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">NamesOnly</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">aggregates</span> <span style="color:#ce5c00;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">people</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">findByLastname</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Matthews&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">NamesOnly</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><h5 id="결과-매핑">결과 매핑</h5>
<p>인터페이스 또는 DTO 프로젝션을 반환하는 쿼리 메소드는 실제 쿼리에서 생성된 결과를 기반으로 한다. 인터페이스 프로젝션은 일반적으로 잠재적인 <code>@Column</code> 유형 매핑을 고려하기 위해 먼저 도메인 유형에 대한 매핑 결과에 의존 하고, 실제 프로젝션 프록시는 잠재적으로 부분적으로 구체화된 엔터티를 사용하여 프로젝션 데이터를 공개한다.</p>
<p>DTO 프로젝션의 결과 매핑은 실제 쿼리 유형에 따라 다르다. 파생 쿼리는 도메인 유형을 사용하여 결과를 매핑하고 Spring Data는 도메인 유형에서 사용 가능한 속성에서만 DTO 인스턴스를 만든다. 도메인 유형에서 사용할 수 없는 DTO 속성 선언은 지원되지 않는다.</p>
<p>문자열 기반 쿼리는 실제 쿼리, 특히 필드 프로젝션과 결과 유형 선언이 밀접하게 관련되어 있기 때문에 서로 다른 접근 방식을 사용한다. <code>@Query</code>으로 어노테이션이 달린 쿼리 메소드에서 사용되는 DTO 프로젝션은 쿼리 결과를 DTO 유형에 직접 매핑한다. 도메인 유형의 필드 매핑은 고려되지 않는다. DTO 유형을 직접 사용하면 쿼리 메소드는 도메인 모델로 제한되지 않는 보다 동적인 프로젝션의 이점을 얻을 수 있다.</p>
<h3 id="143-엔티티-콜백">14.3. 엔티티 콜백</h3>
<p>Spring Data 인프라는, 특정의 메소드가 불려 가기 전후에 엔티티를 변경하기 위한 훅을 제공한다. 이른바 <code>EntityCallback</code> 인스턴스는 콜백 형식의 엔티티를 확인하고, 잠재적으로 변경하는 편리한 방법을 제공한다.<br>
<code>EntityCallback</code>는 특화된 <code>ApplicationListener</code>와 매우 비슷하다. 일부의 Spring Data 모듈은, 특정 엔티티의 변경을 허가하는 저장소 고유의 이벤트(<code>BeforeSaveEvent</code> 등)를 공개한다. 불변의 형태를 조작하는 경우 등, 이러한 이벤트는 문제를 일으킬 가능성이 있다. 또한 이벤트 발행은 <code>ApplicationEventMulticaster</code>에 따라 다르다. 비동기 <code>TaskExecutor</code>로 구성하면, 이벤트 처리를 스레드로 분기할 수 있으므로 예측할 수 없는 결과를 초래할 수 있다.</p>
<p>엔티티 콜백은 동기화 포인트와 리액티브 API를 모두 통합 포인트에 제공하여, 처리 체인의 명확하게 정의된 체크 포인트에서 순서 실행을 보장하며 잠재적으로 변경된 엔티티 또는 리액티브 래퍼 유형을 반환한다.</p>
<p>엔티티 콜백은 일반적으로 API 유형으로 분리된다. 이 분리는 동기 API가 동기 엔티티 콜백만을 고려하여 리액티브 구현이 리액티브 엔티티 콜백만을 고려하는 것을 의미한다.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    Entity Callback API는 Spring Data Commons 2.2에서 도입되었다. 엔티티 변경을 적용하는 권장 방법이다. 기존의 저장소 고유의 <code>ApplicationEvents</code>는, 등록되어 있을 가능성이 있는 <code>EntityCallback</code> 인스턴스를 호출하기 전에 공개된다.

</div>

<h4 id="1431-엔티티-콜백-구현">14.3.1. 엔티티 콜백 구현</h4>
<p><code>EntityCallback</code>는 제네릭스 유형 인수를 통해 도메인 유형과 직접 연결된다. 각 Spring Data 모듈에는 일반적으로 <code>EntityCallback</code> 엔티티 라이프사이클을 다루는 사전에 정의된 인터페이스 세트와 함께 제공된다.</p>
<p><strong>예 76: EntityCallback 구조</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@FunctionalInterface</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">BeforeSaveCallback</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">T</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">EntityCallback</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">T</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8f5902;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">   * Entity callback method invoked before a domain object is saved.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">   * Can return either the same or a modified instance.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">   *
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">   * @return the domain object to be persisted.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">   */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">T</span> <span style="color:#000">onBeforeSave</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">T</span> <span style="color:#000">entity</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#ce5c00;font-weight:bold">&gt;,</span> <span style="color:#000">String</span> <span style="color:#000">collection</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#0000cf;font-weight:bold">3</span><span style="color:#ce5c00;font-weight:bold">&gt;);</span> <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>(1) 엔티티가 저장되기 전에 호출되는 <code>BeforeSaveCallback</code> 고유한 메소드. 잠재적으로 변경된 인스턴스를 반환한다.<br>
(2) 영속화하기 직전의 엔티티이다.<br>
(3) 엔터티가 유지되는 <em>컬렉션</em>과 같은 여러 저장소 특정 인수이다.</p>
<p><strong>예 77: 리액티브 EntityCallback 구조</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@FunctionalInterface</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">ReactiveBeforeSaveCallback</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">T</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">EntityCallback</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">T</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8f5902;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">   * Entity callback method invoked on subscription, before a domain object is saved.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">   * The returned Publisher can emit either the same or a modified instance.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">   *
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">   * @return Publisher emitting the domain object to be persisted.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">   */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Publisher</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">T</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">onBeforeSave</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">T</span> <span style="color:#000">entity</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#ce5c00;font-weight:bold">&gt;,</span> <span style="color:#000">String</span> <span style="color:#000">collection</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#0000cf;font-weight:bold">3</span><span style="color:#ce5c00;font-weight:bold">&gt;);</span> <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>(1) 엔티티가 저장되기 전에 구독 시에 호출되는 <code>BeforeSaveCallback</code> 고유 메소드. 잠재적으로 변경된 인스턴스를 발행한다.<br>
(2) 영속화하기 직전의 엔티티이다.<br>
(3) 엔티티가 영속화되는 <em>컬렉션</em>과 같은 여러 저장소 특정 인수이다.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    옵션의 엔티티 콜백 파라미터는 구현 Spring Data 모듈에 의해 정의되어 <code>EntityCallback.callback()</code>의 호출 사이트로부터 추측된다.

</div>

<p>다음 예제와 같이 애플리케이션 요구에 맞는 인터페이스를 구현한다.</p>
<p><strong>예 78: 예 BeforeSaveCallback</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">DefaultingEntityCallback</span> <span style="color:#204a87;font-weight:bold">implements</span> <span style="color:#000">BeforeSaveCallback</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;,</span> <span style="color:#000">Ordered</span> <span style="color:#ce5c00;font-weight:bold">{</span>      <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Object</span> <span style="color:#000">onBeforeSave</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span> <span style="color:#000">entity</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">String</span> <span style="color:#000">collection</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>                   <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">collection</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#34;user&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#8f5902;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#8f5902;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">getOrder</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#0000cf;font-weight:bold">100</span><span style="color:#ce5c00;font-weight:bold">;</span>                                                                  <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>(1) 요구 사항에 따라 콜백 구현.
(2) 동일한 도메인 유형의 엔티티 콜백이 여러 개인 경우에 엔티티 콜백을 순서를 정할 수 있다. 순서는 가장 낮은 우선 순위를 따른다.</p>
<h4 id="1432-엔티티-콜백-등록">14.3.2. 엔티티 콜백 등록</h4>
<p><code>EntityCallback</code> Bean은 <code>ApplicationContext</code>에 등록되어 있는 경우에 저장소 고유의 구현에 의해 선택된다. 대부분의 템플릿 API는 이미 <code>ApplicationContextAware</code>가 구현되어 있으므로 <code>ApplicationContext</code>에 액세스할 수 있다.</p>
<p>다음 예는 유효한 엔티티 콜백 등록 모음을 설명한다.</p>
<p><strong>예 79:  EntityCallback Bean 등록 예</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Order</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#ce5c00;font-weight:bold">)</span>                                                           <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#5c35cc;font-weight:bold">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">First</span> <span style="color:#204a87;font-weight:bold">implements</span> <span style="color:#000">BeforeSaveCallback</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Person</span> <span style="color:#000">onBeforeSave</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span> <span style="color:#000">person</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#8f5902;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">DefaultingEntityCallback</span> <span style="color:#204a87;font-weight:bold">implements</span> <span style="color:#000">BeforeSaveCallback</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;,</span>
</span></span><span style="display:flex;"><span>                                                           <span style="color:#000">Ordered</span> <span style="color:#ce5c00;font-weight:bold">{</span> <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Object</span> <span style="color:#000">onBeforeSave</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span> <span style="color:#000">entity</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">String</span> <span style="color:#000">collection</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">getOrder</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#0000cf;font-weight:bold">100</span><span style="color:#ce5c00;font-weight:bold">;</span>                                                   <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">EntityCallbackConfiguration</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#5c35cc;font-weight:bold">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">BeforeSaveCallback</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">unorderedLambdaReceiverCallback</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>    <span style="color:#8f5902;font-style:italic">// (3)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">BeforeSaveCallback</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;)</span> <span style="color:#000">it</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#8f5902;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">UserCallbacks</span> <span style="color:#204a87;font-weight:bold">implements</span> <span style="color:#000">BeforeConvertCallback</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">&gt;,</span>
</span></span><span style="display:flex;"><span>                                        <span style="color:#000">BeforeSaveCallback</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>    <span style="color:#8f5902;font-style:italic">// (4)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Person</span> <span style="color:#000">onBeforeConvert</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">User</span> <span style="color:#000">user</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#8f5902;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Person</span> <span style="color:#000">onBeforeSave</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">User</span> <span style="color:#000">user</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#8f5902;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>(1) <code>BeforeSaveCallback</code>은 <code>@Order</code> 어노테이션에 선언된 순서대로 수신한다.<br>
(2) <code>BeforeSaveCallback</code>은 <code>Ordered</code> 인터페이스 구현을 통해 순서대로 수신한다.
(3) 람다 식을 사용한 <code>BeforeSaveCallback</code>. 기본적으로 순서 지정되지 않고 마지막에 호출된다. 람다 식으로 구현된 콜백은 입력 정보를 공개하지 않으므로 할당할 수 없는 엔터티로 호출하면 콜백 처리량에 영향을 준다. <code>class</code> 또는 <code>enum</code>를 사용하여, 콜백 Bean 유형 필터링을 사용할 수 았다.<br>
(4) 단일 구현 클래스에 여러 엔티티 콜백 인터페이스를 결합한다.</p>
<h4 id="1433-특정-entitycallbacks-저장">14.3.3. 특정 EntityCallbacks 저장</h4>
<p>Spring Data R2DBC는 검사 지원에 <code>EntityCallback</code> API를 사용하여 다음 콜백에 응답한다.</p>
<p><strong>표 4: 지원되는 엔티티 콜백</strong></p>
<table>
<thead>
<tr>
<th>콜백</th>
<th>방법</th>
<th>설명</th>
<th>순서</th>
</tr>
</thead>
<tbody>
<tr>
<td>BeforeConvertCallback</td>
<td><code>onBeforeConvert(T entity, SqlIdentifier table)</code></td>
<td>도메인 객체가 <code>OutboundRow</code>로 변환되기 전에 호출된다.</td>
<td><code>Ordered.LOWEST_PRECEDENCE</code></td>
</tr>
<tr>
<td>AfterConvertCallback</td>
<td><code>onAfterConvert(T entity, SqlIdentifier table)</code></td>
<td>도메인 객체가 로드된 후에 호출된다.<br>행에서 읽은 후에 도메인 객체를 변경할 수 있다.</td>
<td><code>Ordered.LOWEST_PRECEDENCE</code></td>
</tr>
<tr>
<td>AuditingEntityCallback</td>
<td><code>onBeforeConvert(T entity, SqlIdentifier table)</code></td>
<td>생성 또는 수정은 검사 가능한 엔터티를 표시하는 것이다.</td>
<td>100</td>
</tr>
<tr>
<td>BeforeSaveCallback</td>
<td><code>onBeforeSave(T entity, OutboundRow row, SqlIdentifier table)</code></td>
<td>도메인 객체가 저장되기 전에 호출된다. <br>맵핑된 모든 엔티티 정보를 포함하는 <code>OutboundRow</code> 영속성을 위해 대상을 변경할 수 있다.</td>
<td><code>Ordered.LOWEST_PRECEDENCE</code></td>
</tr>
<tr>
<td>AfterSaveCallback</td>
<td><code>onAfterSave(T entity, OutboundRow row, SqlIdentifier table)</code></td>
<td>도메인 객체가 저장된 후에 호출된다.<br>도메인 객체를 변경하여 저장 후 반환되도록 할 수 있다. <code>OutboundRow</code>에는 맵핑된 모든 엔티티 정보가 포함된다.</td>
<td><code>Ordered.LOWEST_PRECEDENCE</code></td>
</tr>
</tbody>
</table>
<h3 id="144-여러-데이터베이스에서-작업">14.4. 여러 데이터베이스에서 작업</h3>
<p>여러 개의 잠재적으로 다른 데이터베이스로 작업하는 경우에는 응용 프로그램은 구성에 다른 접근 방식을 필요하다. 제공되는 <code>AbstractR2dbcConfiguration</code> 지원 클래스는 <code>Dialect</code>이 파생된 하나의  <code>ConnectionFactory</code>을 가정한다. 즉, 여러 데이타베이스에서 동작하도록 Spring Data R2DBC를 구성하려면 몇개의 Bean 를 스스로 정의해야 한다.</p>
<p>R2DBC 리포지토리는 리포지토리를 구현하기 위해 <code>R2dbcEntityOperations</code>를 필요로 한다. <code>AbstractR2dbcConfiguration</code>를 사용하지 않고 리포지토리를 스캔하는 간단한 구성은 다음과 같다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@EnableR2dbcRepositories</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">basePackages</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;com.acme.mysql&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">entityOperationsRef</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;mysqlR2dbcEntityOperations&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">static</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">MySQLConfiguration</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#5c35cc;font-weight:bold">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#5c35cc;font-weight:bold">@Qualifier</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;mysql&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">ConnectionFactory</span> <span style="color:#000">mysqlConnectionFactory</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#ce5c00;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#5c35cc;font-weight:bold">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">R2dbcEntityOperations</span> <span style="color:#000">mysqlR2dbcEntityOperations</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#5c35cc;font-weight:bold">@Qualifier</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;mysql&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#000">ConnectionFactory</span> <span style="color:#000">connectionFactory</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">DatabaseClient</span> <span style="color:#000">databaseClient</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DatabaseClient</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">create</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">connectionFactory</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">R2dbcEntityTemplate</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">databaseClient</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">MySqlDialect</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">INSTANCE</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p><code>@EnableR2dbcRepositories</code>에서는 <code>databaseClientRef</code> 또는 <code>entityOperationsRef</code> 중에 하나를 통해 구성할 수 있다. 다양한 <code>DatabaseClient</code> Bean을 사용하면 동일한 유형의 여러 데이터베이스에 연결할 때 유용하다. 서로 다른 다이렉트 데이터베이스 시스템을 사용하는 경우에는 <code>@EnableR2dbcRepositories</code>(entityOperationsRef = &hellip;)`를 대신에 사용하도록 한다.</p>
<hr>
<h2 id="15-감사">15. 감사</h2>
<h3 id="151-기본">15.1. 기본</h3>
<p>Spring Data는 엔티티를 만들거나 변경한 사용자와 변경이 발생한 시기를 투명하게 추적하기 위한 고급 지원을 제공한다. 이 기능을 활용하려면 어노테이션을 사용하거나 인터페이스를 구현하여 정의할 수 있는 감사 메타데이터를 엔터티 클래스에 설치해야 한다. 또한 필요한 인프라 구성 요소를 등록하려면 어노테이션 구성 또는 XML 구성을 통해 감사를 활성화해야 한다. 구성 샘플에 대해서는 저장소별 섹션을 참조하여라.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    작성일과 변경일만 추적하는 애플리케이션에서는 <code>AuditorAware</code> 지정할 필요는 없다.

</div>

<h4 id="1511-어노테이션-기반-감사-메타데이터">15.1.1. 어노테이션 기반 감사 메타데이터</h4>
<p>엔티티를 만들거나 수정한 사용자 기록하려면 <code>@CreatedBy</code>와 <code>@LastModifiedBy</code>, 변경이 발생하였을 때 기록하려면 <code>@CreatedDate</code>와 <code>@LastModifiedDate</code>를 제공한다.</p>
<p><strong>예 80: 감사 대상 엔티티</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Customer</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@CreatedBy</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">User</span> <span style="color:#000">user</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@CreatedDate</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">Instant</span> <span style="color:#000">createdDate</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8f5902;font-style:italic">// ... further properties omitted
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>보시다시피, 어떤 정보를 기록하는지에 따라 어노테이션을 선택적으로 적용할 수 있다. 변경이 수행되었을 때에 기록하는 어노테이션은 타입 Joda-Time, <code>DateTime</code>, 레거시 Java <code>Date</code> 및 <code>Calendar</code>, JDK8의 일자와 시각 타입와 <code>long</code> 또는  <code>Long</code>의 프로퍼티로 사용할 수 있다.</p>
<p>감사 메타데이터는 반드시 루트 레벨 엔터티에 존재할 필요는 없지만, 아래에 표시된 대로 포함된 엔터티에 추가할 수 있다(실제로 사용되는 저장소에 따라 다름).</p>
<p><strong>예 81: 포함된 엔터티의 메타데이터 감사</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Customer</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">AuditMetadata</span> <span style="color:#000">auditingMetadata</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8f5902;font-style:italic">// ... further properties omitted
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">AuditMetadata</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@CreatedBy</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">User</span> <span style="color:#000">user</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@CreatedDate</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">Instant</span> <span style="color:#000">createdDate</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><h4 id="1512-인터페이스-기반-감사-메타데이터">15.1.2. 인터페이스 기반 감사 메타데이터</h4>
<p>어노테이션을 사용하여 감사 메타데이터를 정의하지 않으려면 도메인 클래스에 <code>Auditable</code> 인터페이스를 구현할 수 있다. 모든 감사 속성의 setter 메소드를 공개한다.</p>
<h4 id="1513-auditoraware">15.1.3. <code>AuditorAware</code></h4>
<p><code>@CreatedBy</code> 또는 <code>@LastModifiedBy</code>를 사용하는 경우는 감사 인프라는 어떤 식으로든 현재 보안 주체를 인식해야 한다. 이를 위해 현재 사용자 또는 애플리케이션과 상호 작용하는 시스템이 누구인지를 인프라에 알리기 위해 구현해야 하는  <code>AuditorAware&lt;T&gt;</code> SPI 인터페이스를 제공한다. 제네릭 클래스 <code>T</code>는 <code>@CreatedBy</code> 또는 <code>@LastModifiedBy</code> 어노테이션이 붙은 속성 유형을 정의한다.</p>
<p>다음 예제는 스프링 시큐리티의 <code>Authentication</code> 객체를 사용하여 인터페이스를 구현을 보여준다.</p>
<p><strong>예 82: Spring Security 기반 <code>AuditorAware</code> 구현</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SpringSecurityAuditorAware</span> <span style="color:#204a87;font-weight:bold">implements</span> <span style="color:#000">AuditorAware</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Optional</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">getCurrentAuditor</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">Optional</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ofNullable</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">SecurityContextHolder</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getContext</span><span style="color:#ce5c00;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">map</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">SecurityContext</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">getAuthentication</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">filter</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Authentication</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">isAuthenticated</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">map</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Authentication</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">getPrincipal</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">map</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cast</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>구현은 Spring Security에서 제공하는 <code>Authentication</code> 객체에 액세스하여 <code>UserDetailsService</code> 구현으로 작성한 커스텀 <code>UserDetails</code> 인스턴스를 검색한다. 여기에서는 <code>UserDetails</code> 구현을 통해 도메인 사용자를 공개하고 있지만, 발견된 <code>Authentication</code>에 따라 어디서나 검색할 수 있다고 가정한다.</p>
<h4 id="1514-reactiveauditoraware">15.1.4. <code>ReactiveAuditorAware</code></h4>
<p>리액티브 인프라를 사용하는 경우는 컨텍스트 정보를 활용하여 <code>@CreatedBy</code> 또는 <code>@LastModifiedBy</code> 정보를 제공할 수 있다. 애플리케이션과 상호 작용하는 현재 사용자 또는 시스템이 누구인지를 인프라에 알리기 위해 구현해야 하는  <code>ReactiveAuditorAware&lt;T&gt;</code> SPI 인터페이스를 제공한다. 제네릭 형식 <code>T</code>은 <code>@CreatedBy</code> 또는 <code>@LastModifiedBy</code> 어노테이션이 달린 속성이 어떤 형식이어야 하는지를 정의한다.</p>
<p>다음의 예는 리액티브 Spring Security의 <code>Authentication</code> 객체를 사용하는 인터페이스의 구현을 나타내고 있다.</p>
<p><strong>예 83: Spring Security 기반 <code>ReactiveAuditorAware</code> 구현</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SpringSecurityAuditorAware</span> <span style="color:#204a87;font-weight:bold">implements</span> <span style="color:#000">ReactiveAuditorAware</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Mono</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">getCurrentAuditor</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">ReactiveSecurityContextHolder</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getContext</span><span style="color:#ce5c00;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">map</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">SecurityContext</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">getAuthentication</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">filter</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Authentication</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">isAuthenticated</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">map</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Authentication</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">getPrincipal</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">map</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cast</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>구현은 Spring Security가 제공하는 <code>Authentication</code> 객체에 액세스하여, <code>UserDetailsService</code> 구현으로 작성한 사용자 정의 <code>UserDetails</code> 인스턴스를 검색한다. 여기에서는 <code>UserDetails</code> 구현을 통해 도메인 사용자를 공개하고 있지만 발견된 <code>Authentication</code> 에 따라 어디서나 검색할 수 있다고 가정한다.</p>
<h3 id="152-r2dbc의-일반적인-감사-구성">15.2. R2DBC의 일반적인 감사 구성</h3>
<p>Spring Data R2DBC 1.2부터 다음 예제와 같이 구성 클래스에 <code>@EnableR2dbcAuditing</code> 어노테이션을 달아 감사를 활성화 할 수 있다.</p>
<p><strong>예 84: JavaConfig를 사용하여 감사 활성화</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@EnableR2dbcAuditing</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Config</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Bean</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">ReactiveAuditorAware</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">AuditableUser</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">myAuditorProvider</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">AuditorAwareImpl</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>유형 <code>ReactiveAuditorAware</code>의 Bean을 <code>ApplicationContext</code>에 공개하면 감사 인프라는 자동으로 이를 가져오고, 이를 사용하여 도메인 유형으로 설정할 현재 사용자를 결정한다. <code>ApplicationContext</code>에 복수의 구현이 등록되어 있는 경우는 <code>@EnableR2dbcAuditing</code>의 <code>auditorAwareRef</code> 속성을 명시적으로 설정하는 것으로 사용할 구현을 선택할 수 있다.</p>
<hr>
<h2 id="16-매핑">16. 매핑</h2>
<p><code>MappingR2dbcConverter</code>에서는 풍부한 매핑 지원을 제공한다. <code>MappingR2dbcConverter</code>는 도메인 객체를 데이터 행에 매핑할 수 있는 풍부한 메타데이터 모델이 있다. 매핑 메타데이터 모델은 도메인 객체의 어노테이션을 사용하여 만들어 진다. 다만 인프라는 메타데이터 정보의 유일한 소스로 어노테이션을 사용하는 것에 제한되지 않는다. <code>MappingR2dbcConverter</code>에는 다음 일련의 규칙에 따라 추가 메타데이터를 제공하지 않고 객체를 행에 매핑할 수 있다.</p>
<p>이 섹션에서는 객체를 행에 매핑하는 규칙을 사용하는 방법과 어노테이션 기반 매핑 메타데이터에서 이러한 규칙을 재정의하는 방법과 <code>MappingR2dbcConverter</code>의 기능에 대해 설명한다.</p>
<h3 id="161-객체-매핑의-기초">16.1. 객체 매핑의 기초</h3>
<p>이 섹션에서는 Spring Data 객체 매핑, 객체 생성, 필드 및 속성 액세스, 가변성 및 불변성의 기초에 대해 설명한다. 이 섹션은 기본이 되는 데이터 스토어(JPA 등)의 오브젝트 매핑을 사용하지 않는 Spring Data 모듈에게만 적용되는 것에 주의하자. 또한 인덱스, 컬럼 이름 및 필드 이름의 사용자 정의와 같이 저장소별 오브젝트 맵핑에 대해서는 저장소 특정 섹션을 참조하여라.</p>
<p>Spring Data 객체 매핑의 중심적인 역할은 도메인 객체의 인스턴스를 작성하여 스토어 네이티브 데이터 구조를 그것들에 매핑 하는 것이다. 즉, 두 가지 기본 단계가 필요하다.</p>
<ol>
<li>공개된 생성자 중에 하나를 사용하여 인스턴스 생성.</li>
<li>공개된 모든 속성을 구체화하는 인스턴스 설정.</li>
</ol>
<h4 id="1611-객체-생성">16.1.1. 객체 생성</h4>
<p>Spring Data는 그 형태의 오브젝트의 구체화에 사용되는 영속 엔티티의 생성자를 자동적으로 검출하려고 한다. 해결 알고리즘은 다음과 같이 동작한다.</p>
<ol>
<li>생성자가 1개 밖에 없는 경우는 그 생성자가 사용된다.</li>
<li>생성자가 여러 개 있고 그 중 하나만 <code>@PersistenceConstructor</code> 어노테이션이 달린 경우는 그 생성자가 사용된다.</li>
<li>인수가 없는 생성자가 있는 경우는 그 생성자가 사용된다. 다른 생성자는 무시된다.</li>
</ol>
<p>값의 결정은 생성자의 인수 이름이 엔티티의 속성 이름과 일치한다고 가정한다. 즉, 매핑의 모든 커스터마이즈(다른 데이터스토어 열 또는 필드명 등)를 포함한 속성이 설정되는 것처럼 결정된다. 또한 클래스 파일에서 사용할 수 있는 매개변수 이름 정보 또는 생성자에 존재하는 <code>@ConstructorProperties</code> 어노테이션이 필요하다.</p>
<p>값의 결정은은 스토어 고유의 SpEL 식을 사용한 Spring Framework의 <code>@Value</code>값 어노테이션을 사용해 커스터마이즈 할 수 있다. 자세한 내용은 저장소별 맵핑 섹션을 참조하여라.</p>
<div class="td-card card border me-4">
<div class="card-body">
    <p class="card-text">
        
##### 객체 생성에 대해 자세히 알아보기

리플렉션의 오버헤드를 피하기 위해 Spring Data 객체의 생성은 기본적으로 런타임에 생성된 팩토리 클래스를 사용하며 도메인 클래스 생성자를 직접 호출한다. 즉, 이 예제의 유형:
```java
class Person {
  Person(String firstname, String lastname) { ... }
}
```

런타임 시에 이것과 의미적으로 동등한 팩토리 클래스를 생성한다.
```java
class PersonObjectInstantiator implements ObjectInstantiator {

  Object newInstance(Object... args) {
    return new Person((String) args[0], (String) args[1]);
  }
}
```
이렇게하면 리플렉션보다 약 10% 성능이 향상된다. 도메인 클래스가 이러한 최적화의 대상이 되기 위해서는 일련의 제약을 따를 필요가 있다.

- private 클래스가 아니어야 한다.
- 비정적(non-static) 내부 클래스(inner class)가 아니어야 한다.
- CGLib 프록시 클래스가 아니어야 한다.
- Spring Data에서 사용되는 생성자는 private이 아니어야 한다.

이러한 조건 중 하나라도 일치하게 되면 Spring Data는 리플렉션을 통해 엔터티 인스턴스화로 대체된다.
</p>
      </div>
  </div>

<h4 id="1612-속성-설정">16.1.2. 속성 설정</h4>
<p>엔티티의 인스턴스가 생성되면 Spring Data는 해당 클래스의 나머지 모든 영구 속성을 설정한다. 엔티티의 생성자에 의해 이미 입력되어 있지 않은 경우(즉, 생성자 인수 목록을 통해 사용), ID property가 최초로 입력되어 순환 오브젝트 참조의 해결이 가능하게 된다. 그런 다음 생성자에 의해 아직 설정되지 않은 모든 비일시적 속성이 엔터티 인스턴스로 설정된다. 이를 위해 다음과 같은 알고리즘을 사용한다.</p>
<ol>
<li>속성이 불변인 <code>with...</code> 메소드를 공개하는 경우(아래 참조), <code>with...</code> 메소드를 사용하여 새 속성 값을 갖는 새로운 엔터티 인스턴스를 만든다.</li>
<li>속성의 접근(즉, getter 및 setter를 통한 액세스)가 정의되고 있는 경우, setter 메소드를 호출하고 있다.</li>
<li>속성을 변경할 수 있는 경우는 필드를 직접 설정한다.</li>
<li>속성이 불변의 경우는 영속화 조작(객체 생성을 참조)로 사용되는 생성자를 사용하여 인스턴스의 복사본을 생성한다.</li>
<li>기본적으로 필드 값을 직접 설정한다.</li>
</ol>
<div class="td-card card border me-4">
<div class="card-body">
    <p class="card-text">
        
##### 속성 설정에 대해 자세히 알아보기

[객체 생성 최적화](##객체-생성에-대해-자세히-알아보기)와 마찬가지로 Spring Data 런타임 생성되는 접근자 클래스(accessor classes)를 사용하여 엔터티 인스턴스와 상호 작용한다.
```java
class Person {

  private final Long id;
  private String firstname;
  private @AccessType(Type.PROPERTY) String lastname;

  Person() {
    this.id = null;
  }

  Person(Long id, String firstname, String lastname) {
    // Field assignments
  }

  Person withId(Long id) {
    return new Person(id, this.firstname, this.lastame);
  }

  void setLastname(String lastname) {
    this.lastname = lastname;
  }
}
```

**예 85: 생성된 속성 접근자**
```java
class PersonPropertyAccessor implements PersistentPropertyAccessor {

  private static final MethodHandle firstname;              // (2)

  private Person person;                                    // (1)

  public void setProperty(PersistentProperty property, Object value) {

    String name = property.getName();

    if ("firstname".equals(name)) {
      firstname.invoke(person, (String) value);             // (2)
    } else if ("id".equals(name)) {
      this.person = person.withId((Long) value);            // (3)
    } else if ("lastname".equals(name)) {
      this.person.setLastname((String) value);              // (4)
    }
  }
}
```
(1) PropertyAccessor는 기본이 되는 오브젝트의 가변 인스턴스를 보관 유지한다. 이렇게 하지 않으면 불변 속성을 변경할 수 있기 때문이다.  
(2) 기본적으로 Spring Data는 필드 액세스를 사용하여 속성 값을 읽거나 쓸수 있다. `private` 필드의 가시성 규칙에 따라 `MethodHandles` 필드와 상호 작용하는데 사용된다.  
(3) 클래스는 식별자의 설정에 사용되는 `withId(...)` 메소드를 공개한다. 인스턴스가 데이터 스토어에 삽입되어 식별자가 생성되었을 때에 `withId(...)`를 호출하면, 새로운 `Person` 객체가 생성된다. 이후에 모든 변경은 새로운 인스턴스에서 수행되며, 이전 인스턴스는 변경되지 않는다.  
(4) property-access를 사용하면, `MethodHandles`를 사용하지 않고 직접 메소드를 호출할 수가 있다.  

이렇게 하면 리플렉션보다 약 25% 성능이 향상된다. 도메인 클래스가 이러한 최적화의 대상이 되기 위해서는 일련의 제약을 따를 필요가 있다.

- 유형은 디폴트 또는 `java` 패키지에 존재해서는 안된다.
- 형식과 그 생성자는 `public`이여야 한다.
- 내부(inner) 클래스인 형태는 `static`이여야 한다.
- 사용되는 Java 런타임은 원래 `ClassLoader` 클래스를 선언할 수 있도록 해야 한다. Java 9 이후에는 특정의 제한이 있다.

기본적으로 Spring Data는 생성된 속성 접근자를 사용하려고 하고, 제한이 감지되면 리플렉션 기반의 접근자로 폴백(falls back)한다.
</p>
      </div>
  </div>

<p>다음 엔티티를 살펴보자.</p>
<p><strong>예 86: 샘플 엔티티</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Person</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#5c35cc;font-weight:bold">@Id</span> <span style="color:#000">Long</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">;</span>                                                <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">;</span>                                 <span style="color:#8f5902;font-style:italic">// (2)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">LocalDate</span> <span style="color:#000">birthday</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">age</span><span style="color:#ce5c00;font-weight:bold">;</span>                                                    <span style="color:#8f5902;font-style:italic">// (3)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">String</span> <span style="color:#000">comment</span><span style="color:#ce5c00;font-weight:bold">;</span>                                                   <span style="color:#8f5902;font-style:italic">// (4)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#5c35cc;font-weight:bold">@AccessType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Type</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">PROPERTY</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#000">String</span> <span style="color:#000">remarks</span><span style="color:#ce5c00;font-weight:bold">;</span>                        <span style="color:#8f5902;font-style:italic">// (5)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#000">Person</span> <span style="color:#000">of</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">LocalDate</span> <span style="color:#000">birthday</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span> <span style="color:#8f5902;font-style:italic">// (6)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">null</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">birthday</span><span style="color:#ce5c00;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">Period</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">between</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">birthday</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">LocalDate</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">now</span><span style="color:#ce5c00;font-weight:bold">()).</span><span style="color:#c4a000">getYears</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Long</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">String</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">String</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">LocalDate</span> <span style="color:#000">birthday</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">age</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span> <span style="color:#8f5902;font-style:italic">// (6)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">id</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">firstname</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">firstname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">lastname</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">lastname</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">birthday</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">birthday</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">age</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">age</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">Person</span> <span style="color:#000">withId</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Long</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>                                                  <span style="color:#8f5902;font-style:italic">// (1)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">firstname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">lastname</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">birthday</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">age</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">setRemarks</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">remarks</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>                                         <span style="color:#8f5902;font-style:italic">// (5)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">remarks</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">remarks</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>(1) 식별자 속성은 <code>final</code> 이지만, 생성자로 <code>null</code>이 설정된다. 클래스는 식별자의 설정에 사용되는 <code>withId(...)</code> 메소드를 공개한다. 인스턴스가 데이터 스토어에 삽입되어 식별자가 생성되었을 때. 원래 <code>Person</code> 인스턴스는 새로운 인스턴스가 생성될 때 변경되지 않는다. 일반적으로 저장소 관리되는 다른 속성에도 동일한 패턴이 적용되지만 영속화 작업을 위해 변경해야 할 수도 있다. 영속화 생성자(6을 참조)는 사실상 본사본 생성자이며, 속성의 설정은 새로운 식별자 값이 적용된 새로운 인스턴스의 생성으로 변환되기 때문에, wither 메소드는 옵션이다.<br>
(2) <code>firstname</code>와 <code>lastname</code> 속성은 getter를 개입시켜 잠재적으로 공개되는 통상의 불변의 속성이다.<br>
(3) <code>age</code> 속성은 불변이지만, <code>birthday</code> 속성에서 파생된다. 표시된 설계에서 Spring Data는 선언된 유일한 생성자를 사용하기 때문에 데이터베이스 값은 기본 설정보다 우선한다. 계산이 선호되는 경우에도 이 생성자는 매개 변수로 <code>age</code> 받는 것이 중요하다(무시될 수 있음). 그렇지 않으면 속성 생성 단계가 age 필드를 설정하려고 하고, 불변으로 <code>with...</code> 메소드가 있다.<br>
(4) <code>comment</code> 속성은 가변적이며, 필드를 직접 설정하는 것으로 입력된다.<br>
(5) <code>remarks</code> 속성은 가변적이며, <code>comment</code> 필드를 직접 설정하거나 setter 메소드를 호출하여 설정한다.<br>
(6) 이 클래스는 오브젝트 생성 위한 팩토리 메소드와 생성자를 을 공개한다. 여기에서 핵심이 되는 아이디어는 추가 생성자 대신 팩토리 메소드를 사용하여 <code>@PersistenceConstructor</code> 생성자를 명확히 할 필요성을 피하는 것이다. 대신 속성의 기본 설정은 팩토리 메소드 내에서 처리된다.</p>
<h4 id="1613-일반적인-권장-사항">16.1.3. 일반적인 권장 사항</h4>
<ul>
<li><em>불변 객체를 고집</em> — 불변 객체는 생성자만 호출하여 객체를 구체화하므로 쉽게 생성할 수 있다. 또, 이것에 의해, 클라이언트 오브젝트가 오브젝트의 상태를 조작할 수 있도록 하는 setter 메소드가 도메인 오브젝트에 흩어지는 것을 방지한다. 필요한 경우는 패키지가 동일한 위치에 배치된 제한된 유형에서만 호출할 수 있도록 패키지를 보호하는 것이 좋다. 생성자 전용 실체화는 속성 설정보다 최대 30% 빠르다.</li>
<li><em>all-args 생성자 제공</em> — 엔터티를 불변의 값으로 모델링할 수 없거나, 원하지 않는 경우에도 객체 매핑이 속성 설정을 건너뛸 수 있으므로 엔터티의 모든 속성을 인수로 사용한다. 제공하는 것은 가치가 있다. 최적의 성능을 위해.</li>
<li><em><code>@PersistenceConstructor</code>을 회피하기 위해 오버로드 된 생성자 대신 팩토리 메소드를 사용한다.</em> — 최적의 성능에 필요한 모든 인수 생성자는 일반적으로 자동 생성 식별자 등을 생략한 애플리케이션 사용 사례별 생성자를 공개한다. 이러한 all-args 생성자의 변형을 공개하는 정적 팩토리 메소드.</li>
<li><em>생성된 인스턴스 생성 클래스와 프로퍼티 액세서 클래스를 사용할 수 있도록 하는 제약을 반드시 지켜야 한다.</em></li>
<li><em>생성되는 식별자에 대해서는 모든 인수의 영속화 생성자(권장) 또는 <code>with...</code> 메소드와 조합된 <code>final</code> 필드를 사용한다.</em></li>
<li><em>Lombok을 사용하여 보일러 플레이트 코드를 피한다.</em> — 영속화 작업은 일반적으로 모든 인수를 취하는 생성자를 필요로하므로 선언은 필드 할당에 대한 보일러 플레이트 매개 변수의 지루한 반복이지만 Lombok의 <code>@AllArgsConstructor</code>을 사용하면 피할 수 있다.</li>
</ul>
<h5 id="속성-재정의">속성 재정의</h5>
<p>Java를 사용하면 도메인 클래스를 유연하게 설계할 수 있다. 이 경우에 서브 클래스는 슈퍼 클래스로 같은 이름으로 벌써 선언되고 있는 property를 정의할 수 있다. 다음 예제를 보도록 하자.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SuperType</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">CharSequence</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">SuperType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">CharSequence</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">field</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">CharSequence</span> <span style="color:#000">getField</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">setField</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">CharSequence</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">field</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SubType</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">SuperType</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">String</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">SubType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">super</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">field</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">String</span> <span style="color:#000">getField</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">setField</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">field</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#8f5902;font-style:italic">// optional
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>      <span style="color:#204a87;font-weight:bold">super</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setField</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>두 클래스 모두 할당 가능한 유형을 사용하여 <code>field</code> 를 정의한다. 그러나 <code>SubType</code>은 <code>SuperType.field</code>을 쉐도우(shadow)한다. 클래스 설계에 따라서는 생성자를 사용하는 것은 <code>SuperType.field</code>을 설정을 위한 유일한 기본 접근 방식일 수 있다. 또는 setter인 <code>super.setField(...)</code>를 호출하여 <code>SuperType</code>으로 <code>field</code> 설정할 수 있다. 속성은 동일한 이름을 공유하지만, 두 가지 다른 값을 나타낼 수 있으므로 이러한 메커니즘은 어느 정도 충돌을 일으킬 수 있다. Spring Data는 형태가 할당 가능하지 않은 경우, 수퍼 유형의 속성을 스킵 한다. 즉, 재정의된 속성의 유형은 재정의로 등록된 수퍼 유형의 속성 유형에 할당할 수 있어야 한다. 그렇지 않은 경우, 슈퍼 타입의 속성는 일시적인 것으로 간주된다. 일반적으로 개별 속성 이름을 사용하는 것이 좋다.</p>
<p>Spring Data 모듈은 일반적으로 다른 값을 유지하는 재정의된 속성을 지원한다. 프로그래밍 모델의 관점에서 고려해야 할 몇 가지 사항이 있다.</p>
<ol>
<li>어떤 속성을 영속화해야 하나(기본적으로 선언된 모든 속성이 된다)? 이는 <code>@Transient</code> 어노테이션을 달면 속성을 제외할 수 있다.</li>
<li>데이터 스토어의 속성을 나타내는 방법은? 다른 값에 대해 동일한 필드/열 이름을 사용하면, 일반적으로 데이터가 손상되므로 명시적 필드/열 이름을 사용하여 속성 중 하나 이상에 어노테이션을 달아야 한다.</li>
<li>슈퍼 프로퍼티는 일반적으로 setter의 구현을 한층 더 상정하지 않고 설정할 수 없기 때문에, <code>@AccessType(PROPERTY)</code>의 사용은 사용할 수 없다.</li>
</ol>
<h4 id="1614-kotlin-지원">16.1.4. Kotlin 지원</h4>
<p>Spring Data는 Kotlin 사양을 준수하여 객체를 만들고 수정할 수 있다.</p>
<h5 id="kotlin-객체-만들기">Kotlin 객체 만들기</h5>
<p>Kotlin 클래스는 인스턴스화가 지원되고 있어 모든 클래스는 디폴트가 불변이며, 가변 속성를 정의하려면 명시적인 프로퍼티 선언이 필요하다. 다음의 <code>data</code> 클래스  <code>Person</code>를 보도록 하자.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">data</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Person</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">id</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">String</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">String</span><span style="color:#000;font-weight:bold">)</span>
</span></span></code></pre></div><p>위의 클래스는 명시적인 생성자를 가진 일반적인 클래스로 컴파일된다. 다른 생성자를 추가하여 이 클래스를 사용자 지정한 다음 <code>@PersistenceConstructor</code>에 어노테이션을 달아 생성자 설정을 보여준다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">data</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Person</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">id</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">String</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">String</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#5c35cc;font-weight:bold">@PersistenceConstructor</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">constructor</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">id</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">String</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">id</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;unknown&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>Kotlin은 매개변수가 제공되지 않을 때 기본값을 사용할 수 있도록 하여 매개변수 옵션을 지원한다. Spring Data가 파라미터의 디폴트 설정을 가지는 생성자를 검출했을 경우, 데이터 스토어가 값을 제공하지 않는 (또는 단순히  null를 반환하는) 경우. Kotlin는 파라미터의 디폴트 설정을 적용할 수 있기 때문에, 이러한 파라미터는 존재하지 않는다. <code>name</code> 매개 변수의 기본 설정을 적용하는 다음 클래스를 보도록 하자.</p>
<pre tabindex="0"><code>data class Person(var id: String, val name: String = &#34;unknown&#34;)
</code></pre><p><code>name</code> 매개 변수 중 하나 결과의 일부가 아니거나 해당 값이 <code>null</code>일 경우에는 <code>name</code>은 <code>&quot;unknown&quot;</code>으로 기본 설정이 된다.</p>
<h5 id="kotlin-데이터-클래스의-속성-설정">Kotlin 데이터 클래스의 속성 설정</h5>
<p>Kotlin 에서는 모든 클래스는 디폴트로 불변이며, 가변 속성를 정의하려면 명시적인 속성 선언이 필요하다. 다음의 <code>data</code> 클래스 <code>Person</code>를 보도록 하자.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">data</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Person</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">id</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">String</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">String</span><span style="color:#000;font-weight:bold">)</span>
</span></span></code></pre></div><p>이 클래스는 사실상 불변이다. Kotlin이 기존 객체의 모든 속성 값을 복사하여 메소드에 인수로 제공된 속성 값을 적용하는 새로운 객체 인스턴스를 만드는 <code>copy(...)</code> 메소드를 생성할 때 새 인스턴스를 만들 수 있다.</p>
<h4 id="kotlin-재정의-속성">Kotlin 재정의 속성</h4>
<p>Kotlin에서 <a href="https://kotlinlang.org/docs/inheritance.html#overriding-properties" target="_blank" rel="noopener">속성 재정의<i class="fas fa-external-link-alt"></i></a>를 선언하여, 하위 클래스의 속성을 변경할 수 있다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">open</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SuperType</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">open</span> <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">field</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Int</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SubType</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">field</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Int</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">SuperType</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">field</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>이러한 처리 방식은 <code>field</code>라는 이름의 2개 속성이 렌더링 된다. Kotlin은 각 클래스의 각 속성에 대한 속성 액세서(getter 및 setter)를 생성한다. 사실상 코드는 다음과 같다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SuperType</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">SuperType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">field</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">getField</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">setField</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">field</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SubType</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">SuperType</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">SubType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">super</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">field</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">getField</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">setField</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">field</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">field</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p><code>SubType</code>의 Getter와 setter는 <code>SubType.field</code>만을 설정하여, <code>SuperType.field</code>는 설정하지 않는다. 이러한 처리 방식에서는 생성자를 사용하는 것이  <code>SuperType.field</code>를 설정하는 유일한 기본 방법이다. <code>SubType</code>에 메소드를 추가하여 <code>this.SuperType.field =  ...</code>를 통해 <code>SuperType.field</code>을 설정할 수 있지만, 지원되는 규칙의 범위를 벗어난다. 속성은 동일한 이름을 공유하지만 두 가지 다른 값을 나타낼 수 있으므로 속성 재정의로 인해 어느 정도 충돌이 발생한다. 일반적으로 개별 속성 이름을 사용하는 것이 좋다.</p>
<p>Spring Data 모듈은 일반적으로 다른 값을 유지하는 재정의된 속성을 지원한다. 프로그래밍 모델의 관점에서 고려해야 할 몇 가지 사항이 있다.</p>
<ol>
<li>어떤 속성을 영속화해야 하나(기본적으로 선언된 모든 속성이 된다)? 이들에 <code>@Transient</code> 어노테이션을 달면 속성을 제외할 수 있다.</li>
<li>데이터 스토어의 속성을 나타내는 방법은? 다른 값에 대해 동일한 필드/열 이름을 사용하면 일반적으로 데이터가 손상되므로 명시적 필드/열 이름을 사용하여 속성 중 하나 이상에 어노테이션을 달아야 한다.</li>
<li>슈퍼 속성을 설정할 수 없기 때문에 <code>@AccessType(PROPERTY)</code>은 사용할 수 없다.</li>
</ol>
<h3 id="162-약관-기반-매핑">16.2. 약관 기반 매핑</h3>
<p><code>MappingR2dbcConverter</code>에는 추가 매핑 메타데이터가 제공되지 않은 경우에 객체를 행에 매핑하는 몇 가지 규칙이 있다. 규칙은 다음과 같다.</p>
<ul>
<li>짧은 Java 클래스명은, 다음의 방법으로 테이블명에 맵 된다. <code>com.bigbank.SavingsAccount</code> 클래스는 <code>SAVINGS_ACCOUNT</code> 테이블 이름에 매핑된다. 동일한 이름의 매핑이 필드를 열 이름에 매핑하는데 적용된다. 예: <code>firstName</code> 필드는 <code>FIRST_NAME</code> 열에 맵핑된다. 사용자 지정 <code>NamingStrategy</code>을 제공하여 이 매핑을 제어할 수 있다. 자세한 내용은 &ldquo;매핑 설정&quot;을 참조한다. 속성 이름이나 클래스 이름에서 파생된 테이블 이름과 열 이름은 기본적으로 따옴표 없이 SQL 문에서 사용된다. <code>R2dbcMappingContext.setForceQuote(true)</code>를 설정하여 이 동작을 제어할 수 있다.</li>
<li>중첩된 객체는 지원되지 않는다.</li>
<li>컨버터는 등록되어 있는 Spring 컨버터를 사용하여, 객체 속성의 디폴트의 매핑을 행의 열과 값에 덮어쓴다.</li>
<li>오브젝트의 필드는 행의 열과의 변환에 사용된다. public <code>JavaBean</code> 속성은 사용되지 않는다.</li>
<li>생성자 인수 이름이 행의 최상위 컬럼 이름과 일치하는 단일 0이 아닌 인수 생성자가 있는 경우는 해당 생성자가 사용된다. 그렇지 않으면, 인수가 없는 생성자가 사용된다. 인수가 0이 아닌 생성자가 복수인 경우, 예외가 슬로우 된다.</li>
</ul>
<h3 id="163-매핑-설정">16.3. 매핑 설정</h3>
<p>기본적으로 (명시적으로 설정되지 않는 한) <code>DatabaseClient</code>을 생성하면 <code>MappingR2dbcConverter</code> 인스턴스가 만들어 진다. <code>MappingR2dbcConverter</code> 자신의 인스턴스를 만들 수 있다. 독자적인 인스턴스를 작성하는 것으로, Spring 컨버터를 등록하여 데이타베이스와의 사이에 특정의 클래스를 매핑 할 수 있다.</p>
<p>Java 기반 메타데이터를 사용하여 <code>MappingR2dbcConverter</code>, <code>DatabaseClient</code>, <code>ConnectionFactory</code>을 구성할 수 있다. 다음 예제에서는 Spring의 Java 기반 구성을 사용한다.</p>
<p><code>R2dbcMappingContext to</code>의 <code>setForceQuote</code>를 <code>true</code>로 설정하면, 클래스 및 속성으로부터 파생한 테이블명과 열명이 데이타베이스 고유의 인용부호와 함께 사용된다. 이는 이러한 이름에 예약된 SQL 단어(예: 정렬)를 사용해도 문제가 없음을 의미한다. 이렇게 하려면 <code>AbstractR2dbcConfiguration</code>의 <code>r2dbcMappingContext(Optional&lt;NamingStrategy&gt;)</code>를 재정의한다. Spring Data는 그러한 이름의 대문자 소문자를 인용부호가 사용되어 있지 않은 경우에 구성 끝난 데이타베이스에서도 사용되는 형식으로 변환한다. 이름에 키워드나 특수 문자를 사용하지 않는 한, 테이블을 만들 때 따옴표로 묶지 않은 이름을 사용할 수 있다. SQL 표준을 준수하는 데이터베이스의 경우, 이는 이름이 대문자로 변환됨을 의미한다. 인용 문자와 이름의 대문자화의 방법은 사용되는 <code>Dialect</code>에 의해 제어된다. 사용자 정의 다이렉트를 구성하는 방법은 &ldquo;R2DBC 드라이버&quot;를 참조한다.</p>
<p><strong>예 87: R2DBC 매핑 지원을 구성하는 @Configuration 클래스</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">MyAppConfig</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">AbstractR2dbcConfiguration</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">ConnectionFactory</span> <span style="color:#000">connectionFactory</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">ConnectionFactories</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;r2dbc:...&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8f5902;font-style:italic">// the following are optional
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">protected</span> <span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Object</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">getCustomConverters</span><span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Converter</span><span style="color:#ce5c00;font-weight:bold">&lt;?,</span> <span style="color:#ce5c00;font-weight:bold">?&gt;&gt;</span> <span style="color:#000">converterList</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">ArrayList</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Converter</span><span style="color:#ce5c00;font-weight:bold">&lt;?,</span> <span style="color:#ce5c00;font-weight:bold">?&gt;&gt;();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">converterList</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">add</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">org</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">springframework</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">data</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">r2dbc</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">test</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">PersonReadConverter</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">converterList</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">add</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">org</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">springframework</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">data</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">r2dbc</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">test</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">PersonWriteConverter</span><span style="color:#ce5c00;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">converterList</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p><code>AbstractR2dbcConfiguration</code>에는 <code>ConnectionFactory</code>를 정의하는 메소드를 구현할 필요가 있다.</p>
<p><code>r2dbcCustomConversions</code> 메소드를 재정의하는 것으로 컨버터에 컨버터를 추가할 수 있다.</p>
<p>사용자 정의 <code>NamingStrategy</code>는 Bean으로 등록하여 구성할 수 있다. <code>NamingStrategy</code>는 클래스와 속성의 이름을 테이블과 열의 이름으로 변환하는 방법을 제어한다.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    <code>AbstractR2dbcConfiguration</code>는 <code>DatabaseClient</code> 인스턴스를 만들고, <code>databaseClient</code>라는 이름으로 컨테이너에 등록한다.

</div>

<h3 id="164-메타데이터-기반-매핑">16.4. 메타데이터 기반 매핑</h3>
<p>Spring Data R2DBC 지원 내부의 객체 매핑 기능을 최대한으로 활용하려면 패핑된 객체에 <code>@Table</code> 어노테이션을 붙여야 한다. 매핑 프레임워크에 이 어노테이션을 붙일 필요는 없지만(어노테이션이 없어도 POJO는 올바르게 매핑된다), 클래스 경로 스캐너로 도메인 오브젝트를 찾아 전처리하여 필요한 메타데이터를 추출할 수 있다. 이 어노테이션을 사용하지 않는 경우에는 매핑 프레임워크는 도메인 객체의 속성과 메소드를 인식할 수 있도록 내부 메타데이터 모델을 구축해야 하므로 도메인 객체를 처음 저장할 때 응용 프로그램의 성능이 약간 떨어진다. 영속화한다. 다음 예는 도메인 객체를 보여준다.</p>
<p><strong>예 88: 도메인 객체의 예</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">package</span> <span style="color:#000">com.mycompany.domain</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Table</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Person</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#5c35cc;font-weight:bold">@Id</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">Long</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">Integer</span> <span style="color:#000">ssn</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">String</span> <span style="color:#000">firstName</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#000">String</span> <span style="color:#000">lastName</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div>

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Info</h4>

    <code>@Id</code> 어노테이션은 어떤 속성을 기본 키(primary key)로 사용할 것인지를 매퍼에 알려준다.

</div>

<h4 id="1641-기본-유형-매핑">16.4.1. 기본 유형 매핑</h4>
<p>다음 표에서는 엔터티의 속성 유형이 매핑에 어떤 영향을 주는지 설명한다.</p>
<table>
<thead>
<tr>
<th>소스</th>
<th>유형</th>
<th>타겟 유형</th>
<th>댓글</th>
</tr>
</thead>
<tbody>
<tr>
<td>Primitive 유형과 wrapper 유형</td>
<td>패스스루(Passthru)</td>
<td>&ldquo;명시적인 컨버터&quot;를 사용하여 사용자 정의할 수 있다.</td>
<td></td>
</tr>
<tr>
<td>JSR-310 날짜/시간형</td>
<td>패스스루(Passthru)</td>
<td>&ldquo;명시적인 컨버터&quot;를 사용하여 사용자 정의할 수 있다.</td>
<td></td>
</tr>
<tr>
<td><code>String</code>, <code>BigInteger</code>, <code>BigDecimal</code>, <code>UUID</code></td>
<td>패스스루(Passthru)</td>
<td>&ldquo;명시적인 변환기&quot;를 사용하여 사용자 정의할 수 있다.</td>
<td></td>
</tr>
<tr>
<td><code>Enum</code></td>
<td><code>String</code></td>
<td>&ldquo;명시적인 컨버터&quot;를 등록하여 사용자 정의할 수 있다.</td>
<td></td>
</tr>
<tr>
<td><code>Blob</code>, <code>Clob</code></td>
<td>패스스루(Passthru)</td>
<td>명시적인 변환기 를 사용하여 사용자 정의할 수 있다.</td>
<td></td>
</tr>
<tr>
<td><code>byte[]</code>, <code>ByteBuffer</code></td>
<td>패스스루(Passthru)</td>
<td>바이너리 페이로드로 간주된다.</td>
<td></td>
</tr>
<tr>
<td><code>Collection&lt;T&gt;</code></td>
<td><code>T</code>의 배열</td>
<td>구성된 &ldquo;드라이버&quot;에서 지원되는 경우는 배열 유형으로의 변환, 그렇지 않으면 지원되지 않는다.</td>
<td></td>
</tr>
<tr>
<td>Primitive 유형, wrapper 유형, <code>String</code> 배열</td>
<td>래퍼형 배열(예: <code>int[]</code> → <code>Integer[]</code>)</td>
<td>구성된 드라이버 에서 지원되는 경우는 배열 유형으로의 변환, 그렇지 않으면 지원되지 않는다.</td>
<td></td>
</tr>
<tr>
<td>드라이버 특정 유형</td>
<td>패스스루(Passthru)</td>
<td>사용된 <code>R2dbcDialect</code>로부터 심플 타입으로서 컨트리뷰트(Contributed).</td>
<td></td>
</tr>
<tr>
<td>복잡한 객체</td>
<td>대상 유형은 등록 <code>Converter</code>에 따라 다르다.</td>
<td>&ldquo;명시적인 컨버터&quot;가 필요한다. 그렇지 않으면 지원되지 않는다.</td>
<td></td>
</tr>
</tbody>
</table>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Info</h4>

    열의 네이티브 데이터 형식은 R2DBC 드라이버의 형식 매핑에 따라 다르다. 드라이버는 기하학 유형과 같은 추가적인 단순 유형을 제공할 수 있다.

</div>

<h3 id="1642-매핑-어노테이션-개요">16.4.2. 매핑 어노테이션 개요</h3>
<p><code>MappingR2dbcConverter</code>는 메타데이터를 사용하여 객체의 행에 매핑을 구동할 수 있다. 다음 어노테이션을 사용할 수 있다.</p>
<ul>
<li><code>@Id</code>: 기본 키를 표시하기 위해 필드 레벨에서 적용된다.</li>
<li><code>@Table</code>: 이 클래스가 데이터베이스에 매핑의 후보인 것을 나타내기 위해서, 클래스 레벨로 적용된다. 데이터베이스가 저장된 테이블의 이름을 지정할 수 있다.</li>
<li><code>@Transient</code>: 기본적으로 모든 필드가 행에 매핑된다. 이 어노테이션은 적용되는 필드를 데이터베이스에 저장하는 것에서 제외된다. 컨버터는 생성자 인수의 값을 구체화할 수 없으므로 영속적 생성자 내에서 임시 속성을 사용할 수 없다.</li>
<li><code>@PersistenceConstructor</code>: 지정된 생성자 매핑한다 — 패키지에서 보호된 것 — 데이터베이스에서 객체를 인스턴스화할 때 사용한다. 생성자의 인수는 이름에 의해 취득한 행의 값에 매핑된다.</li>
<li><code>@Value</code>: 이 어노테이션은 Spring Framework의 일부이다. 매핑 프레임워크 내에서 생성자 인수에 적용할 수 있다. 이렇게 하면 Spring 표현식 언어 문을 사용하여 도메인 객체를 만드는데 사용되기 전에 데이터베이스에서 검색된 키 값을 변환할 수 있다. 특정 행의 열을 참조하려면 다음과 같은 표현식을 사용해야 한다. : <code>@Value(&quot;#root.myProperty&quot;)</code> 여기에서 root는 지정된 <code>Row</code> 루트를 가리킨다.</li>
<li><code>@Column</code>: 필드 레벨에서 적용되어 행에 표시되는 열의 이름을 기술하여 클래스의 필드명과는 다른 이름으로 한다. <code>@Column</code> 어노테이션에 지정된 이름은 SQL문에서 사용되는 경우 항상 따옴표로 묶는다. 대부분의 데이터베이스에서는 이는 이러한 이름으로 대소문자를 구별한다는 것을 의미한다. 또한 이러한 이름에 특수 문자를 사용할 수 있음을 의미한다. 그러나 다른 도구에서 문제가 발생할 수 있으므로 권장하지 않는다.</li>
<li><code>@Version</code>: 필드 레벨에서 적용되며 낙관적 잠금에 사용되며 저장 조작 변경 사항을 확인한다. 값은 <code>null</code>(일반 유형의 경우는 <code>zero</code>)이며, 엔티티가 신규이기 위한 마커로 간주된다. 최초로 저장되는 값은 <code>zero</code>(일반 유형의 경우는 one)이다. 버전은 업데이트할 때마다 자동으로 증가한다. 자세한 내용은 &ldquo;낙관적 잠금&quot;을 참조한다.</li>
</ul>
<p>매핑 메타데이터 인프라는 기술 독립적인 별도의 <code>spring-data-commons</code> 프로젝트에 정의되어 있다. 어노테이션 기반 메타데이터를 지원하기 위해 R2DBC 지원은 특정 서브클래스를 사용한다. 다른 전략을 도입할 수도 있다(수요가 있는 경우).</p>
<h4 id="1643-커스터마이즈-된-객체-구축">16.4.3. 커스터마이즈 된 객체 구축</h4>
<p>맵핑 서브시스템을 사용하면 생성자에 <code>@PersistenceConstructor</code> 어노테이션을 추가하여 오브젝트의 구성을 사용자 정의할 수 있다. 생성자 매개 변수에 사용되는 값은 다음과 같은 방법으로 확인된다.</p>
<ul>
<li>매개 변수에 <code>@Value</code> 어노테이션이 지정된 경우, 지정된 표현식이 평가되고 결과가 매개변수 값으로 사용된다.</li>
<li>Java 유형에 입력 행의 지정된 필드와 이름이 일치하는 프로퍼티가 있는 경우, 그 프로퍼티 정보를 사용하여 입력 필드 값를 전달하는 적절한 생성자 파라미터를 선택힌다. 이는 매개변수 이름 정보가 Java <code>.class</code> 파일에 있는 경우에만 작동한다. 이는 디버그 정보를 사용해 소스를 컴파일 하는지, Java8의 <code>javac</code>의 <code>-parameters</code> 커멘드 라인 스위치를 사용해 실현할 수 있다.</li>
<li>그렇지 않은 경우, <code>MappingException</code>는 throw 되어 지정된 생성자 파라미터를 바인드 할 수 없었던 것을 나타낸다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">OrderItem</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#5c35cc;font-weight:bold">@Id</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">String</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">quantity</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#204a87;font-weight:bold">double</span> <span style="color:#000">unitPrice</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">OrderItem</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">quantity</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">double</span> <span style="color:#000">unitPrice</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">id</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">quantity</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">quantity</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">this</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">unitPrice</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">unitPrice</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8f5902;font-style:italic">// getters/setters ommitted
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><h4 id="1644-명시적인-컨버터를-사용한-매핑-재정의">16.4.4. 명시적인 컨버터를 사용한 매핑 재정의</h4>
<p>객체를 보관 및 조회하는 경우, <code>R2dbcConverter</code>인스턴스를 사용하여 모든 Java 형태로부터 <code>OutboundRow</code> 인스턴스에의 매핑을 처리하면 편리한 일이 자주 있다. 다만 <code>R2dbcConverter</code> 인스턴스에서 대부분의 작업을 수행할 수 있지만 성능을 최적화하기 위해 특정 유형의 변환을 선택적으로 처리할 수 있다.</p>
<p>변환을 직접 선택적으로 처리하려면 하나 이상의 <code>org.springframework.core.convert.converter.Converter</code> 인스턴스를 <code>R2dbcConverter</code>에 등록한다.</p>
<p><code>AbstractR2dbcConfiguration</code>의 <code>r2dbcCustomConversions</code> 메소드를 사용하여, 컨버터를 구성할 수 있다. 이 섹세의 첫번째 예는 Java를 사용하여 구성을 수행하는 방법을 보여준다.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    사용자 정의 최상위 엔티티 변환에는 변환에 비대칭 유형이 필요하다. 수신 데이터는 R2DBC의 <code>Row</code>에서 추출된다. 송신 데이터(INSERT/UPDATE 문에서 사용됨)는 <code>OutboundRow</code>으로 표시되며 나중에 명령문으로 어셈블된다.

</div>

<p>Spring 컨버터 구현의 다음의 예는, Row 로부터 <code>Person</code> POJO 로 변환한다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@ReadingConverter</span>
</span></span><span style="display:flex;"><span> <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">PersonReadConverter</span> <span style="color:#204a87;font-weight:bold">implements</span> <span style="color:#000">Converter</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Row</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Person</span> <span style="color:#000">convert</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Row</span> <span style="color:#000">source</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Person</span> <span style="color:#000">p</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">source</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;id&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">),</span><span style="color:#000">source</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;name&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAge</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">source</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;age&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">Integer</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>컨버터는 특정 속성에 적용된다. 컬렉션 속성(예: <code>Collection&lt;Person&gt;</code>)은 반복되며 요소별로 변환된다. 컬렉션 컨버터(예: <code>Converter&lt;List&lt;Person&gt;&gt;</code>, <code>OutboundRow</code>)는 지원되지 않는다.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    R2DBC는 박스화된 프리미티브(<code>int.class</code>가 아니라 <code>Integer.class</code>)를 사용하여 프리미티브 값을 반환한다.

</div>

<p>다음 예제는 <code>Person</code>에서 <code>OutboundRow</code>으로 변환한다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@WritingConverter</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">PersonWriteConverter</span> <span style="color:#204a87;font-weight:bold">implements</span> <span style="color:#000">Converter</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Person</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">OutboundRow</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">OutboundRow</span> <span style="color:#000">convert</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Person</span> <span style="color:#000">source</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">OutboundRow</span> <span style="color:#000">row</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">OutboundRow</span><span style="color:#ce5c00;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">put</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;id&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">SettableValue</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">from</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">source</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getId</span><span style="color:#ce5c00;font-weight:bold">()));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">put</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;name&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">SettableValue</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">from</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">source</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getFirstName</span><span style="color:#ce5c00;font-weight:bold">()));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">put</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;age&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">SettableValue</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">from</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">source</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getAge</span><span style="color:#ce5c00;font-weight:bold">()));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><h4 id="명시적인-컨버터를-사용한-열거형-매핑-재정의">명시적인 컨버터를 사용한 열거형 매핑 재정의</h4>
<p><a href="https://github.com/pgjdbc/r2dbc-postgresql#postgres-enum-types" target="_blank" rel="noopener">Postgres<i class="fas fa-external-link-alt"></i></a>와 같은 일부 데이터베이스는 데이터베이스별 열거형 열 유형을 사용하여 열거형 값을 네이티브에 쓸 수 있다. Spring Data는 이식성을 극대화하기 위해 기본적으로 <code>Enum</code> 값을 <code>String</code> 값으로 변환한다. 실제 열거 값을 유지하려면 소스 유형과 대상 유형이 실제 열거 유형을 사용하여 <code>Enum.name()</code> 변환을 사용하지 않도록 하는 <code>@Writing</code> 변환기를 등록하한다. 또한 드라이버가 열거형을 나타내는 방법을 인식할 수 있도록 드라이버 레벨에서 열거형을 구성해야 한다.</p>
<p>다음의 예는, Color 열거치를 네이티브에 읽어내기 위한 관련 컴퍼넌트를 나타내고 있다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">enum</span> <span style="color:#000">Color</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Grey</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">Blue</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">ColorConverter</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">EnumWriteSupport</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Color</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Product</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#5c35cc;font-weight:bold">@Id</span> <span style="color:#204a87;font-weight:bold">long</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Color</span> <span style="color:#000">color</span><span style="color:#ce5c00;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><hr>
<h2 id="17-kotlin-지원">17. Kotlin 지원</h2>
<p><a href="https://kotlinlang.org/" target="_blank" rel="noopener">Kotlin<i class="fas fa-external-link-alt"></i></a>는 JVM(및 기타 플랫폼)을 타겟으로 하는 정적으로 형식화된 언어로, 간결하고 우아한 코드를 작성할 수 있는 동시에, Java로 작성된 기존의 라이브러리와의 뛰어난 <a href="https://kotlinlang.org/docs/java-interop.html" target="_blank" rel="noopener">상호 운용성<i class="fas fa-external-link-alt"></i></a>을 제공한다.</p>
<p>Spring Data는 Kotlin에 대한 퍼스트 클래스 지원을 제공하며 개발자는 Spring Data가 Kotlin 네이티브 프레임워크인 것처럼 Kotlin 응용 프로그램을 만들 수 있다.</p>
<p>Kotlin에서 Spring 애플리케이션을 빌드하는 가장 쉬운 방법은 Spring Boot와 전용 Kotlin을 활용하는 것이다. 이 포괄적인 자습서 에서는 <a href="https://start.spring.io/" target="_blank" rel="noopener">start.spring.io<i class="fas fa-external-link-alt"></i></a>를 사용하여 Kotlin에서 Spring Boot 애플리케이션을 빌드하는 방법을 설명한다.</p>
<h3 id="171-요구사항">17.1. 요구사항</h3>
<p>Spring Data는 1.3 Kotlin (영어)을 지원한다. <a href="https://jfrog.com/distribution/?bintrayRD=1" target="_blank" rel="noopener">kotlin-stdlib<i class="fas fa-external-link-alt"></i></a>(또는 kotlin-stdlib-jdk8 다음과 같은 변형 중 하나 및 kotlin-reflect 클래스 경로에 있어야 한다. <a href="https://start.spring.io/" target="_blank" rel="noopener">start.spring.io<i class="fas fa-external-link-alt"></i></a>를 통해 Kotlin 프로젝트를 부트 스트랩하는 경우 기본적으로 제공된다.</p>
<h3 id="172-null-안전-nullsafe">17.2. null 안전 (nullsafe)</h3>
<p>Kotlin의 주요 기능 중 하나는 컴파일 할시에 <code>null</code> 값을 깔끔히 처리하는 <a href="https://kotlinlang.org/docs/null-safety.html" target="_blank" rel="noopener"><code>null</code> 안전<i class="fas fa-external-link-alt"></i></a>이다. 이는 <code>Optional</code> 래퍼의 비용을 들이지 않아도 <code>null</code> 값 선언과 &lsquo;값 또는 값 없음&rsquo; 시멘틱을 표현하여 응용 프로그램의 안전성을 높일 수 있다. (Kotlin에서는 null 허용 값을 가진 함수 구조를 사용할 수 있다. <a href="https://www.baeldung.com/kotlin/null-safety" target="_blank" rel="noopener">&ldquo;Kotlin null 안전에 대한 포괄적인 가이드&rdquo;<i class="fas fa-external-link-alt"></i></a>를 참조하여라.)</p>
<p>Java 에서는 유형 시스템으로 null 안전성을 표현할 수 없지만, Spring Data API에서는 <code>org.springframework.lang</code> 패키지로 선언된 <a href="https://jcp.org/en/jsr/detail?id=305" target="_blank" rel="noopener">JSR-305<i class="fas fa-external-link-alt"></i></a> 도구 친화적인 어노테이션을 넣었다. 기본적으로 Kotlin에서 사용되는 Java API의 유형은 <a href="https://kotlinlang.org/docs/java-interop.html#null-safety-and-platform-types" target="_blank" rel="noopener">플랫폼 유형<i class="fas fa-external-link-alt"></i></a>로서 인식된다. JSR-305 어노테이션 및 Spring null 허용 여부 주석에 대한 Kotlin 지원은 컴파일 시간에 null 관련 문제를 처리할 수 있는 이점과 함께 Kotlin 개발자에게 전체 Spring Data API에 대한 null 안전성을 제공한다.</p>
<p>Spring Data 리포지터리에 null 안전성이 어떻게 적용되는가에 대해서는 <a href="/docs/spring-data/r2dbc/preface/#1147-%eb%a6%ac%ed%8f%ac%ec%a7%80%ed%86%a0%eb%a6%ac-%eb%a9%94%ec%86%8c%eb%93%9c%ec%9d%98-null-%ec%b2%98%eb%a6%ac">&ldquo;리포지터리 메소드의 null 처리&rdquo;</a>를 참조하여라.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Tip</h4>

    <p><code>-Xjsr305</code> 컴파일러 플래그에 다음 옵션을 추가하여 JSR-305 체크를 구성할 수 있다.<code>-Xjsr305={strict|warn|ignore}</code></p>
<p>Kotlin 버전 1.1+의 경우, 기본 동작은 <code>-Xjsr305=warn</code>와 동일하다. <code>strict</code> 값은 Spring Data API의 null의 안전성을 고려할 필요가 있다. Spring API에서 추론된 Kotlin 유형. 다만, Spring API 의 null 가능성 선언이 마이너 릴리스간에서도 진화하여 앞으로 더 많은 체크가 추가될 가능성이 있는 것을 알고 사용할 필요가 있다.</p>


</div>



<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    제네릭스형의 인수, 가변 인수, 배열 요소의 NULL 가능성은 아직 서포트되고 있지 않습니다만, 향후의 릴리스로 지원될 예정이다.

</div>

<h3 id="173-객체-매핑">17.3. 객체 매핑</h3>
<p>Kotlin 객체를 구체화하는 방법에 대한 자세한 내용은 <a href="#1614-kotlin-%ec%a7%80%ec%9b%90">Kotlin 지원</a>을 참조한다.</p>
<h3 id="174-확장">17.4. 확장</h3>
<p><a href="https://kotlinlang.org/docs/extensions.html" target="_blank" rel="noopener">Kotlin 확장<i class="fas fa-external-link-alt"></i></a>는 기존 클래스를 추가 기능으로 확장하는 기능을 제공한다. Spring Data Kotlin API는 이러한 확장 기능을 사용하여 기존 Spring API에 새로운 Kotlin 고유의 유용한 기능을 추가한다.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    Kotlin 확장 기능을 사용하려면 가져오기를 해야 한다. 정적 가져오기와 마찬가지로 대부분의 경우 IDE는 자동으로 가져오기를 제안해야 한다.

</div>

<p>예를 들어, <a href="https://kotlinlang.org/docs/inline-functions.html#reified-type-parameters" target="_blank" rel="noopener">Kotlin 구체화된 유형 매개변수<i class="fas fa-external-link-alt"></i></a>는 JVM <a href="https://docs.oracle.com/javase/tutorial/java/generics/erasure.html" target="_blank" rel="noopener">제네릭스 유형 삭제<i class="fas fa-external-link-alt"></i></a>에 대한 해결 방법을 제공하고 Spring Data는 이 기능을 활용하기 위한 몇 가지 확장 기능을 제공한다. 이를 통해 더 나은 Kotlin API를 사용할 수 있다.</p>
<p>Java 로 <code>SWCharacter</code> 객체 목록를 검색하려면, 일반적으로 다음과 같이 작성한다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#000">Flux</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">SWCharacter</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000">characters</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">select</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">from</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">SWCharacter</span><span style="color:#000;font-weight:bold">.</span><span style="color:#204a87;font-weight:bold">class</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">fetch</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">all</span><span style="color:#000;font-weight:bold">();</span>
</span></span></code></pre></div><p>Kotlin 및 Spring Data 확장을 사용하면 대신 다음과 같이 작성할 수 있다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">characters</span> <span style="color:#000;font-weight:bold">=</span>  <span style="color:#000">client</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">select</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">from</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">SWCharacter</span><span style="color:#000;font-weight:bold">&gt;().</span><span style="color:#000">fetch</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">all</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// or (both are equivalent)
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">characters</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Flux</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">SWCharacter</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">select</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">from</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">fetch</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">all</span><span style="color:#000;font-weight:bold">()</span>
</span></span></code></pre></div><p>Java와 마찬가지로 Kotlin의 <code>characters</code>은 엄격하게 형식화되었지만, Kotlin의 정교한 형식 추론으로 구문을 줄일 수 있다.</p>
<p>Spring Data R2DBC는 다음과 같은 확장 기능을 제공한다.</p>
<ul>
<li><code>DatabaseClient</code> 그리고 <code>Criteria</code>의 제네릭 지원을 구체화하였다.</li>
<li>DatabaseClient의 코루틴 확장.</li>
</ul>
<h3 id="175-코루틴">17.5. 코루틴</h3>
<p>Kotlin <a href="https://kotlinlang.org/docs/coroutines-overview.html" target="_blank" rel="noopener">코루틴<i class="fas fa-external-link-alt"></i></a>는 논블록킹 코드를 명령적으로 기술하는 것을 가능하게 하는 경량 thread이다. 언어 측면에서 <code>suspend</code> 함수는 비동기 작업의 추상화를 제공하며, 라이브러리 측면에서는 <a href="https://github.com/Kotlin/kotlinx.coroutines" target="_blank" rel="noopener"><code>kotlinx.coroutines</code><i class="fas fa-external-link-alt"></i></a>는 <a href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/async.html" target="_blank" rel="noopener"><code>async { }</code><i class="fas fa-external-link-alt"></i></a>와 같은 함수와 <a href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/index.html" target="_blank" rel="noopener">Flow<i class="fas fa-external-link-alt"></i></a>와 같은 유형을 제공한다.</p>
<p>Spring Data 모듈은 다음 범위에서 코루틴에 대한 지원을 제공한다.</p>
<ul>
<li>Kotlin 확장으로 <a href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-deferred/index.html" target="_blank" rel="noopener">Deferred<i class="fas fa-external-link-alt"></i></a>와 [Flow] (<a href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/index.html" target="_blank" rel="noopener">https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/index.html<i class="fas fa-external-link-alt"></i></a>) 반환 값을 지원한다.</li>
</ul>
<h4 id="1751-종속성">17.5.1. 종속성</h4>
<p>코루틴 지원, <code>kotlinx-coroutines-core</code>, <code>kotlinx-coroutines-reactive</code>, <code>kotlinx-coroutines-reactor</code> 종속성은 클래스 경로에 있을 때 활성화된다.</p>
<p><strong>예 89: Maven pom.xml에 추가할 종속성</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;groupId&gt;</span>org.jetbrains.kotlinx<span style="color:#204a87;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;artifactId&gt;</span>kotlinx-coroutines-core<span style="color:#204a87;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;groupId&gt;</span>org.jetbrains.kotlinx<span style="color:#204a87;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;artifactId&gt;</span>kotlinx-coroutines-reactive<span style="color:#204a87;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;groupId&gt;</span>org.jetbrains.kotlinx<span style="color:#204a87;font-weight:bold">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&lt;artifactId&gt;</span>kotlinx-coroutines-reactor<span style="color:#204a87;font-weight:bold">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;/dependency&gt;</span>
</span></span></code></pre></div>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    지원되는 버전 <code>1.3.0</code> 이상.

</div>

<h4 id="1752-reactive는-코루틴으로-어떻게-변환될까">17.5.2. Reactive는 코루틴으로 어떻게 변환될까?</h4>
<p>반환 값의 경우은 Reactive API에서 Coroutines API로의 변환은 다음과 같다.</p>
<ul>
<li><code>fun handler(): Mono&lt;Void&gt;</code>가 <code>suspend fun handler()</code>이 된다.</li>
<li><code>fun handler(): Mono&lt;T&gt;</code>는 <code>Mono</code> 비울 수 있는지 여부에 따라 <code>suspend fun handler(): T</code> 또는 <code>suspend fun handler(): T?</code>이 된다. (보다 정적으로 형식화되는 이점이 있다)</li>
<li><code>fun handler(): Flux&lt;T&gt;</code>는 <code>fun handler(): Flow&lt;T&gt;</code>이 된다.</li>
</ul>
<p><a href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/index.html" target="_blank" rel="noopener">Flow<i class="fas fa-external-link-alt"></i></a>는 코루틴 세계 <code>Flux</code> 에 해당하며 핫 스트림 또는 콜드 스트림, 유한 스트림 또는 무한 스트림에 적합하지만 주요 차이점은 다음과 같다.</p>
<ul>
<li><code>Flow</code> 는 푸시(push) 기반이고, <code>Flux</code>는 푸시풀 하이브리드(push-pull hybrid)이다.</li>
<li>백 프레셔는 일시 중단 기능을 통해 구현된다.</li>
<li><code>Flow</code> 에는 <a href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/collect.html" target="_blank" rel="noopener">단일 중단 <code>collect</code> 메소드<i class="fas fa-external-link-alt"></i></a>만 있고, 운영자는 확장 기능으로 구현된다.</li>
<li>코루틴 덕분에 <a href="https://github.com/Kotlin/kotlinx.coroutines/tree/master/kotlinx-coroutines-core/common/src/flow/operators" target="_blank" rel="noopener">연산자는 쉽게 구현할 수 있다.<i class="fas fa-external-link-alt"></i></a></li>
<li>확장을 통해 사용자 정의 연산자를 <code>Flow</code>에 추가할 수 있다.</li>
<li>수집 작업이 기능을 중단한다.</li>
<li><a href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/map.html" target="_blank" rel="noopener"><code>map</code> 연산자<i class="fas fa-external-link-alt"></i></a>는 일시 중단 기능 매개 변수를 사용하므로 비동기 조작을 지원한다(flatMap필수 없음).</li>
</ul>
<p>코루틴과 동시에 코드를 실행하는 방법과 같은 자세한 내용은 Spring, 코루틴 및 Kotlin 플로우로 반응한다. 이 블로그 게시물을 참조하여라.</p>
<p>코루틴과 동시에 코드를 실행하는 방법을 비롯한 자세한 내용은 <a href="https://spring.io/blog/2019/04/12/going-reactive-with-spring-coroutines-and-kotlin-flow" target="_blank" rel="noopener">Spring, Coroutines 및 Kotlin Flow로 반응하기<i class="fas fa-external-link-alt"></i></a>에 대한 이 블로그 게시물을 참조한다.</p>
<h4 id="1753-리포지토리">17.5.3. 리포지토리</h4>
<p>코루틴 리포지토리의 예는 다음과 같다</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">CoroutineRepository</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">CoroutineCrudRepository</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">User</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">String</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">suspend</span> <span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">findOne</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">id</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">String</span><span style="color:#000;font-weight:bold">):</span> <span style="color:#000">User</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">findByFirstname</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">firstname</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">String</span><span style="color:#000;font-weight:bold">):</span> <span style="color:#000">Flow</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">User</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">suspend</span> <span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">findAllByFirstname</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">id</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">String</span><span style="color:#000;font-weight:bold">):</span> <span style="color:#000">List</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">User</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>코루틴 리포지토리는 리액티브 리포지토리에 구축되어 Kotlin의 코루틴을 통한 데이터 액세스의 비 차단성을 공개한다. 코루틴 리포지토리의 메소드는 쿼리 메소드 또는 커스텀 구현의 어느쪽이든에 의해 서포트할 수 있다. 커스텀 구현 메소드를 호출하면, 코루틴의 호출이 실제의 구현 메소드에 전파된다. 커스텀 메소드가 <code>suspend-able</code>의 경우, 구현 메소드가 <code>Mono</code>나 <code>Flux</code>등의 리액티브형을 반환할 필요는 없다.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Info</h4>

    코루틴 리포지토리는 리포지토리가 <code>CoroutineCrudRepository</code> 인터페이스를 상속하는 경우에만 발견된다.

</div>


	<br>

<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8543127460401091"
     crossorigin="anonymous"></script>

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-8543127460401091"
     data-ad-slot="3689386360"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<br>
<script src="https://utteranc.es/client.js"
        repo="devkuma/blog-comments"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>	
	
	
	
<div class="text-muted mt-5 pt-3 border-top">
    최종 수정 : 2021-12-28</div>

</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Toolkit" aria-label="Toolkit">
    <a target="_blank" rel="noopener" href="https://toolkit.devkuma.com" aria-label="Toolkit">
      <i class="fas fa-tools"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Favorites" aria-label="Favorites">
    <a target="_blank" rel="noopener" href="/favorites/" aria-label="Favorites">
      <i class="fa fa-star"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/devkuma" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Blog" aria-label="Blog">
    <a target="_blank" rel="noopener" href="https://blog.devkuma.com" aria-label="Blog">
      <i class="fab fa-blogger"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Facebook" aria-label="Facebook">
    <a target="_blank" rel="noopener" href="https://www.facebook.com/redfreek2c" aria-label="Facebook">
      <i class="fab fa-facebook"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2024
    <span class="td-footer__authors">The devkuma</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <style>
.markmap > svg {
  width: 100%;
  height: 300px;
}
</style>
<script>
window.markmap = {
  autoLoader: {
      manual: true,
      onReady() {
        const { autoLoader, builtInPlugins } = window.markmap;
        autoLoader.transformPlugins = builtInPlugins.filter(plugin => plugin.name !== 'prism');
      },
  },
};
</script>
<script src="https://cdn.jsdelivr.net/npm/markmap-autoloader"></script>
<script src='/js/deflate.js'></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
      integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
        integrity="sha512-LQNxIMR5rXv7o+b1l8+N1EZMfhG7iFZ9HhnbJkTp4zjNr5Wvst75AqUeFDxeRUa7l5vEDyUiAip//r+EFLLCyA=="
        crossorigin="anonymous">
</script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/mhchem.min.js"
        integrity="sha512-mxjNw/u1lIsFC09k/unscDRY3ofIYPVFbWkP8slrePcS36ht4d/OZ8rRu5yddB2uiqajhTcLD8+jupOWuYPebg=="
        crossorigin="anonymous">
</script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
       integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" crossorigin="anonymous"
       onload='renderMathInElement(document.body, null);'>
</script>
<script src="/js/main.min.2f85d4ec1ab4f7035a711b6a99287a4254c19ff36a2312be1a3ce579b247cc9c.js" integrity="sha256-L4XU7Bq09wNacRtqmSh6QlTBn/NqIxK&#43;GjzlebJHzJw=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js" integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>