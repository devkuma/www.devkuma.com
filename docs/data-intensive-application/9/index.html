<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="ko" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>데이터 중심 애플리케이션 설계 | 09장. 일관성과 합의 | devkuma</title>
<meta name="description" content="발표자 : 이호준, 조성직
이번 장에서는 내결함성을 지닌 분산 시스템을 구축하기 위해 사용하는 알고리즘과 프로토콜을 알아본다.
일관성 보장 약한보장
복제 데이터 베이스는 대부분 최소한 최종적 일관성을 제공하나, 언제 수렴될지 모른다. 강한보장
데이터 시스템이 선택적으로 제공 올바르게 사용하기 쉬우나 시스템 성능이 나쁘거나 내결함성이 약할수도 있다.
선형성 공통적으로 사용되는 가장 강한 일관성 모델 중 하나 단 하나의 DB 복제본만 있다고 가정 (원자적 일관성 - atomic consistency) 최신성 보장 (recency guarantee) - read 시 최신 값을 보장">
<meta property="og:title" content="데이터 중심 애플리케이션 설계 | 09장. 일관성과 합의" />
<meta property="og:description" content="발표자 : 이호준, 조성직
이번 장에서는 내결함성을 지닌 분산 시스템을 구축하기 위해 사용하는 알고리즘과 프로토콜을 알아본다.
일관성 보장 약한보장
복제 데이터 베이스는 대부분 최소한 최종적 일관성을 제공하나, 언제 수렴될지 모른다. 강한보장
데이터 시스템이 선택적으로 제공 올바르게 사용하기 쉬우나 시스템 성능이 나쁘거나 내결함성이 약할수도 있다.
선형성 공통적으로 사용되는 가장 강한 일관성 모델 중 하나 단 하나의 DB 복제본만 있다고 가정 (원자적 일관성 - atomic consistency) 최신성 보장 (recency guarantee) - read 시 최신 값을 보장" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.devkuma.com/docs/data-intensive-application/9/" /><meta property="article:section" content="210_Data-Science_BigData" />
<meta property="article:published_time" content="2022-04-15T00:00:00+09:00" />
<meta property="article:modified_time" content="2022-04-15T00:00:00+09:00" />
<meta itemprop="name" content="데이터 중심 애플리케이션 설계 | 09장. 일관성과 합의">
<meta itemprop="description" content="발표자 : 이호준, 조성직
이번 장에서는 내결함성을 지닌 분산 시스템을 구축하기 위해 사용하는 알고리즘과 프로토콜을 알아본다.
일관성 보장 약한보장
복제 데이터 베이스는 대부분 최소한 최종적 일관성을 제공하나, 언제 수렴될지 모른다. 강한보장
데이터 시스템이 선택적으로 제공 올바르게 사용하기 쉬우나 시스템 성능이 나쁘거나 내결함성이 약할수도 있다.
선형성 공통적으로 사용되는 가장 강한 일관성 모델 중 하나 단 하나의 DB 복제본만 있다고 가정 (원자적 일관성 - atomic consistency) 최신성 보장 (recency guarantee) - read 시 최신 값을 보장"><meta itemprop="datePublished" content="2022-04-15T00:00:00+09:00" />
<meta itemprop="dateModified" content="2022-04-15T00:00:00+09:00" />
<meta itemprop="wordCount" content="4757">
<meta itemprop="keywords" content="Database,NoSQL,Data,RDB," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="데이터 중심 애플리케이션 설계 | 09장. 일관성과 합의"/>
<meta name="twitter:description" content="발표자 : 이호준, 조성직
이번 장에서는 내결함성을 지닌 분산 시스템을 구축하기 위해 사용하는 알고리즘과 프로토콜을 알아본다.
일관성 보장 약한보장
복제 데이터 베이스는 대부분 최소한 최종적 일관성을 제공하나, 언제 수렴될지 모른다. 강한보장
데이터 시스템이 선택적으로 제공 올바르게 사용하기 쉬우나 시스템 성능이 나쁘거나 내결함성이 약할수도 있다.
선형성 공통적으로 사용되는 가장 강한 일관성 모델 중 하나 단 하나의 DB 복제본만 있다고 가정 (원자적 일관성 - atomic consistency) 최신성 보장 (recency guarantee) - read 시 최신 값을 보장"/>




<link rel="preload" href="/scss/main.min.695544aee9037a846071a69467a9628abd261c7078b43ce271247e13ce97907e.css" as="style">
<link href="/scss/main.min.695544aee9037a846071a69467a9628abd261c7078b43ce271247e13ce97907e.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.3.min.js"
  integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
  crossorigin="anonymous"></script>

<link rel="canonical" href="https://www.devkuma.com/docs/data-intensive-application/9/">
<link rel="apple-touch-icon" href="/logo/180x180.jpg">
<link rel="apple-touch-icon" sizes="76x76" href="/logo/76x76.jpg">
<link rel="apple-touch-icon" sizes="120x120" href="/logo/120x120.jpg">
<link rel="apple-touch-icon" sizes="152x152" href="/logo/152x152.jpg">
<link rel="alternate" type="application/rss+xml" title="프로그램 개발 지식 공유, devkuma" href="https://www.devkuma.com/docs/index.xml" />

<meta name="google-site-verification" content="H-H39pWMNsr140LTp2QECNnXtOVbixbDubFbZV668hg" />
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FW3TZ3QLYR"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-FW3TZ3QLYR');
}
</script>
  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar navbar-dark js-navbar-scroll">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="#fff" stroke="none"><path d="M775 4993c-268-38-509-215-618-453-71-155-67-24-67-1986 0-1958-5-1818 65-1971 43-94 86-155 162-230 117-115 283-198 448-223 48-7 618-10 1840-8l1770 3 75 23c231 70 408 216 505 417 81 168 75 7 75 1995 0 1969 5 1824-67 1980-96 211-277 360-528 436-57 18-150 19-1845 20-982 1-1798-1-1815-3zm543-584c53-11 123-30 154-44 144-61 319-213 379-328 19-36 22-37 57-31 20 4 44 10 52 14 20 10 119 30 250 50 228 35 454 36 695 4 91-12 256-47 299-63 16-7 29-10 30-9 1 2 18 28 38 58 115 178 309 304 533 348 39 8 272 8 310 0 103-21 141-34 233-80 157-77 285-206 357-356 54-113 72-195 73-329 1-103-5-142-44-273-25-87-148-259-223-315-40-29-50-51-32-71 5-5 21-38 36-74 61-145 96-253 110-340 3-19 11-60 17-90 13-62 17-434 5-520-16-123-37-209-76-325-56-165-174-395-246-477-11-13-35-43-54-68-44-58-254-267-306-305-22-17-42-32-45-35-18-18-235-161-275-181-16-9-54-28-83-44-29-15-55-26-57-23-2 2 6 16 18 30 12 15 30 35 39 47 37 44 109 161 134 217 42 92 69 194 81 304 46 396-119 758-455 996-261 186-532 256-862 225-205-19-372-77-540-185-142-92-289-241-378-382-110-175-166-481-127-699 37-203 125-383 260-533 31-34 51-62 44-62-22 0-198 89-304 153-55 34-140 93-190 131-92 70-307 279-360 350-17 22-39 51-50 65-19 25-38 52-97 146-66 106-175 374-191 472-3 16-8 39-11 53-40 177-41 522-2 725 3 17 8 44 11 60 16 86 81 266 130 359 15 27 14 30-7 44-77 53-208 204-252 291-97 188-96 485 2 677 33 66 129 191 183 238 192 171 465 239 737 185zm1414-2174c55-12 137-48 168-72 62-48 81-69 1e2-108 36-74 28-162-19-224-31-42-138-121-162-121-10 0-20-4-23-9-23-36-255-49-366-20-283 72-386 274-224 436 55 55 149 107 215 118 19 3 35 8 37 9 9 10 225 3 274-9z"/><path d="M3885 4013c-85-13-182-63-243-126l-33-34 40-26c22-15 43-27 45-27 9 0 225-150 252-175 6-5 36-30 65-55 66-55 172-159 222-219 23-26 42-41 51-38 23 9 91 108 112 162 13 35 19 76 18 135 0 76-3 92-34 155-57 119-168 210-289 238-58 14-152 18-206 10z"/><path d="M985 3976c-92-29-162-80-221-161-62-86-79-149-72-275 6-98 31-158 1e2-234l37-41 48 55c154 179 350 348 548 472 28 18 52 33 54 35 9 6-64 75-105 99-77 45-145 62-251 62-54 0-116-6-138-12z"/></g></svg></span><span class="navbar-brand__name">devkuma</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      
			<li class="dropdown sub-menu d-none d-lg-block">
				<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class='fas fa-keyboard'></i>
          <span>Programming</span>
				</a>
        <ul class="dropdown-menu">
					
					<a class="dropdown-item" href="/docs/category/programming/design/">Design and Development</a>
					
					<a class="dropdown-item" href="/docs/category/programming/jvm/">JVM Based Programming</a>
					
					<a class="dropdown-item" href="/docs/category/programming/spring/">Spring framework</a>
					
					<a class="dropdown-item" href="/docs/category/programming/web/">Web Programming</a>
					
					<a class="dropdown-item" href="/docs/category/programming/etc/">그밖에 Programming</a>
					
					<a class="dropdown-item" href="/docs/category/programming/tools/">Programming Tools</a>
					
				</ul>
			</li>
      <li class="d-lg-none">
        <a class="nav-link" href="/docs/category/programming/" role="button">
          <span>Programming</span>
				</a>
      </li>
      
			
      
			<li class="dropdown sub-menu d-none d-lg-block">
				<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class='fas fa-database'></i>
          <span>Data Science</span>
				</a>
        <ul class="dropdown-menu">
					
					<a class="dropdown-item" href="/docs/category/data-science/big-data/">Big Data</a>
					
					<a class="dropdown-item" href="/docs/category/data-science/rdb/">Relational Database</a>
					
					<a class="dropdown-item" href="/docs/category/data-science/nosql/">NoSQL Database</a>
					
					<a class="dropdown-item" href="/docs/category/data-science/graph-db/">Graph Databse</a>
					
				</ul>
			</li>
      <li class="d-lg-none">
        <a class="nav-link" href="/docs/category/data-science/" role="button">
          <span>Data Science</span>
				</a>
      </li>
      
			
      
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/docs/category/dev-ops/" >
          <span class="d-none d-lg-inline"><i class='fas fa-cogs'></i></span>
          <span>DevOps</span>
          
        </a>
			</li>
			
      
			<li class="dropdown sub-menu d-none d-lg-block">
				<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class='fas fa-desktop'></i>
          <span>Computer</span>
				</a>
        <ul class="dropdown-menu">
					
					<a class="dropdown-item" href="/docs/category/computer/basic/">컴퓨터 기본 지식</a>
					
					<a class="dropdown-item" href="/docs/category/operating-system/">Operating System</a>
					
					<a class="dropdown-item" href="/docs/category/network/">Network</a>
					
				</ul>
			</li>
      <li class="d-lg-none">
        <a class="nav-link" href="/docs/category/computer/" role="button">
          <span>Computer</span>
				</a>
      </li>
      
			
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search">
  <div class="td-search__icon"></div>
  <input type="search" class="td-search__input form-control td-search-input" placeholder="사이트에서 검색…" aria-label="사이트에서 검색…" autocomplete="off">
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
  <script>
    $(function() {
    $("#td-section-nav a").removeClass("active");
    $("#td-section-nav #m-docsdata-intensive-application9").addClass("active"); 
    $("#td-section-nav #m-docsdata-intensive-application9-li span").addClass("td-sidebar-nav-active-item"); 
    $("#td-section-nav #m-docsdata-intensive-application9").parents("li").addClass("active-path"); 
    $("#td-section-nav li.active-path").addClass("show"); 
    $("#td-section-nav li.active-path").children("input").prop('checked', true);
    $("#td-section-nav #m-docsdata-intensive-application9-li").siblings("li").addClass("show");  
    $("#td-section-nav #m-docsdata-intensive-application9-li").children("ul").children("li").addClass("show");  
    $("#td-sidebar-menu").toggleClass("d-none"); 
    });
  </script>
  <div id="td-sidebar-menu" class="td-sidebar__inner d-none">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search">
  <div class="td-search__icon"></div>
  <input type="search" class="td-search__input form-control td-search-input" placeholder="사이트에서 검색…" aria-label="사이트에서 검색…" autocomplete="off">
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscategorydata-sciencebig-data-li">
  <a href="/docs/category/data-science/big-data/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docscategorydata-sciencebig-data"><span class="">Big Data</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsbig-data-li">
  <input type="checkbox" id="m-docsbig-data-check"/>
  <label for="m-docsbig-data-check"><a href="/docs/big-data/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsbig-data"><span class="">Big Data</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbig-dataterm-li">
  <input type="checkbox" id="m-docsbig-dataterm-check"/>
  <label for="m-docsbig-dataterm-check"><a href="/docs/big-data/term/" title="빅데이터 분석 기반이란? 데이터 파이프라인 구축" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsbig-dataterm"><span class="">빅데이터, 파이프라인 구축</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmqttintro-li">
  <input type="checkbox" id="m-docsmqttintro-check"/>
  <label for="m-docsmqttintro-check"><a href="/docs/mqtt/intro/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsmqttintro"><span class="">MQTT</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbig-datastream-processing-li">
  <input type="checkbox" id="m-docsbig-datastream-processing-check"/>
  <label for="m-docsbig-datastream-processing-check"><a href="/docs/big-data/stream-processing/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsbig-datastream-processing"><span class="">스트림 처리란? OSS 엔진 소개</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapache-hadoop-li">
  <input type="checkbox" id="m-docsapache-hadoop-check"/>
  <label for="m-docsapache-hadoop-check"><a href="/docs/apache-hadoop/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsapache-hadoop"><span class="">Apache Hadoop</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapache-spark-li">
  <input type="checkbox" id="m-docsapache-spark-check"/>
  <label for="m-docsapache-spark-check"><a href="/docs/apache-spark/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsapache-spark"><span class="">Apache Spark</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspyspark-li">
  <input type="checkbox" id="m-docspyspark-check"/>
  <label for="m-docspyspark-check"><a href="/docs/pyspark/" title="PySpark 개념 및 주요 기능" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspyspark"><span class="">PySpark</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsdata-intensive-application-li">
  <input type="checkbox" id="m-docsdata-intensive-application-check"/>
  <label for="m-docsdata-intensive-application-check"><a href="/docs/data-intensive-application/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsdata-intensive-application"><span class="">데이터 중심 애플리케이션 설계</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdata-intensive-application02-li">
  <input type="checkbox" id="m-docsdata-intensive-application02-check"/>
  <label for="m-docsdata-intensive-application02-check"><a href="/docs/data-intensive-application/02/" title="데이터 중심 애플리케이션 설계 | 02장. 데이터 모델과 질의 언어" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdata-intensive-application02"><span class="">02장. 데이터 모델과 질의 언어</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdata-intensive-application03-li">
  <input type="checkbox" id="m-docsdata-intensive-application03-check"/>
  <label for="m-docsdata-intensive-application03-check"><a href="/docs/data-intensive-application/03/" title="데이터 중심 애플리케이션 설계 | 03장. 저장소와 검색" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdata-intensive-application03"><span class="">03장. 저장소와 검색</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdata-intensive-application04-li">
  <input type="checkbox" id="m-docsdata-intensive-application04-check"/>
  <label for="m-docsdata-intensive-application04-check"><a href="/docs/data-intensive-application/04/" title="데이터 중심 애플리케이션 설계 | 04장. 부호화 발전" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdata-intensive-application04"><span class="">04장. 부호화 발전</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdata-intensive-application05-li">
  <input type="checkbox" id="m-docsdata-intensive-application05-check"/>
  <label for="m-docsdata-intensive-application05-check"><a href="/docs/data-intensive-application/05/" title="데이터 중심 애플리케이션 설계 | 05장. 복제" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdata-intensive-application05"><span class="">05장. 복제</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdata-intensive-application06-li">
  <input type="checkbox" id="m-docsdata-intensive-application06-check"/>
  <label for="m-docsdata-intensive-application06-check"><a href="/docs/data-intensive-application/06/" title="데이터 중심 애플리케이션 설계 | 06장. 파티셔닝" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdata-intensive-application06"><span class="">06장. 파티셔닝</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdata-intensive-application7-li">
  <input type="checkbox" id="m-docsdata-intensive-application7-check"/>
  <label for="m-docsdata-intensive-application7-check"><a href="/docs/data-intensive-application/7/" title="데이터 중심 애플리케이션 설계 | 07장. 트랜잭션" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdata-intensive-application7"><span class="">07장. 트랜잭션</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdata-intensive-application8-li">
  <input type="checkbox" id="m-docsdata-intensive-application8-check"/>
  <label for="m-docsdata-intensive-application8-check"><a href="/docs/data-intensive-application/8/" title="데이터 중심 애플리케이션 설계 | 08장. 분산 시스템의 골치거리" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdata-intensive-application8"><span class="">08장. 분산 시스템의 골치거리</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdata-intensive-application9-li">
  <input type="checkbox" id="m-docsdata-intensive-application9-check"/>
  <label for="m-docsdata-intensive-application9-check"><a href="/docs/data-intensive-application/9/" title="데이터 중심 애플리케이션 설계 | 09장. 일관성과 합의" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdata-intensive-application9"><span class="">09장. 일관성과 합의</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdata-intensive-application10-li">
  <input type="checkbox" id="m-docsdata-intensive-application10-check"/>
  <label for="m-docsdata-intensive-application10-check"><a href="/docs/data-intensive-application/10/" title="데이터 중심 애플리케이션 설계 | 10장. 일괄 처리" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdata-intensive-application10"><span class="">10장. 일괄 처리</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdata-intensive-application11-li">
  <input type="checkbox" id="m-docsdata-intensive-application11-check"/>
  <label for="m-docsdata-intensive-application11-check"><a href="/docs/data-intensive-application/11/" title="데이터 중심 애플리케이션 설계 | 11장. 스트림 처리" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdata-intensive-application11"><span class="">11장. 스트림 처리</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsapache-kafka-li">
  <input type="checkbox" id="m-docsapache-kafka-check"/>
  <label for="m-docsapache-kafka-check"><a href="/docs/apache-kafka/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsapache-kafka"><span class="">Apache Kafka</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapache-kafkaintro-li">
  <input type="checkbox" id="m-docsapache-kafkaintro-check"/>
  <label for="m-docsapache-kafkaintro-check"><a href="/docs/apache-kafka/intro/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsapache-kafkaintro"><span class="">Apache Kafka 개념 소개</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapache-kafkainstall-li">
  <input type="checkbox" id="m-docsapache-kafkainstall-check"/>
  <label for="m-docsapache-kafkainstall-check"><a href="/docs/apache-kafka/install/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsapache-kafkainstall"><span class="">Apache Kafka 설치 및 확인</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapache-kafkaclient-li">
  <input type="checkbox" id="m-docsapache-kafkaclient-check"/>
  <label for="m-docsapache-kafkaclient-check"><a href="/docs/apache-kafka/client/" title="Java로 간단한 Apache Kafka Producer/Consumer 클라이언트 만들기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsapache-kafkaclient"><span class="">Producer/Consumer 클라이언트</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapache-kafkawhat-li">
  <input type="checkbox" id="m-docsapache-kafkawhat-check"/>
  <label for="m-docsapache-kafkawhat-check"><a href="/docs/apache-kafka/what/" title="Kafka 상세 개념 | 원래 Kafka란?" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsapache-kafkawhat"><span class="">Kafka 상세 개념</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapache-kafkastrems-li">
  <input type="checkbox" id="m-docsapache-kafkastrems-check"/>
  <label for="m-docsapache-kafkastrems-check"><a href="/docs/apache-kafka/strems/" title="Kafka Streams를 사용한 스트림 처리 어플리케이션 개발" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsapache-kafkastrems"><span class="">Kafka Streams</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapache-phoenix-li">
  <input type="checkbox" id="m-docsapache-phoenix-check"/>
  <label for="m-docsapache-phoenix-check"><a href="/docs/apache-phoenix/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsapache-phoenix"><span class="">Apache Phoenix</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsapache-zookeeper-li">
  <input type="checkbox" id="m-docsapache-zookeeper-check"/>
  <label for="m-docsapache-zookeeper-check"><a href="/docs/apache-zookeeper/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsapache-zookeeper"><span class="">Apache ZooKeeper</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapache-zookeeperoverview-li">
  <input type="checkbox" id="m-docsapache-zookeeperoverview-check"/>
  <label for="m-docsapache-zookeeperoverview-check"><a href="/docs/apache-zookeeper/overview/" title="ZooKeeper 오픈 소스의 운용 관리·운용 자동화" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsapache-zookeeperoverview"><span class="">ZooKeeper 개요</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapache-zookeeperinstall-li">
  <input type="checkbox" id="m-docsapache-zookeeperinstall-check"/>
  <label for="m-docsapache-zookeeperinstall-check"><a href="/docs/apache-zookeeper/install/" title="ZooKeeper 설치 방법" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsapache-zookeeperinstall"><span class="">ZooKeeper 설치</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapache-zookeeperdocker-install-li">
  <input type="checkbox" id="m-docsapache-zookeeperdocker-install-check"/>
  <label for="m-docsapache-zookeeperdocker-install-check"><a href="/docs/apache-zookeeper/docker-install/" title="ZooKeeper Docker로 설치하여 개발환경으로 구축하기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsapache-zookeeperdocker-install"><span class="">ZooKeeper Docker 설치</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapache-zookeeperjava-api-li">
  <input type="checkbox" id="m-docsapache-zookeeperjava-api-check"/>
  <label for="m-docsapache-zookeeperjava-api-check"><a href="/docs/apache-zookeeper/java-api/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsapache-zookeeperjava-api"><span class="">ZooKeeper API</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docstidb-li">
  <input type="checkbox" id="m-docstidb-check"/>
  <label for="m-docstidb-check"><a href="/docs/tidb/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docstidb"><span class="">TiDB</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docstidbabout-li">
  <input type="checkbox" id="m-docstidbabout-check"/>
  <label for="m-docstidbabout-check"><a href="/docs/tidb/about/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docstidbabout"><span class="">TiDB에 대해서</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidboverview-li">
  <input type="checkbox" id="m-docstidboverview-check"/>
  <label for="m-docstidboverview-check"><a href="/docs/tidb/overview/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidboverview"><span class="">TiDB 소개</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbexperimental-features-li">
  <input type="checkbox" id="m-docstidbexperimental-features-check"/>
  <label for="m-docstidbexperimental-features-check"><a href="/docs/tidb/experimental-features/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbexperimental-features"><span class="">TiDB의 실험 기능</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbmysql-compatibility-li">
  <input type="checkbox" id="m-docstidbmysql-compatibility-check"/>
  <label for="m-docstidbmysql-compatibility-check"><a href="/docs/tidb/mysql-compatibility/" title="TiDB - MySQL과의 호환성" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbmysql-compatibility"><span class="">MySQL 호환성</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbtidb-limitations-li">
  <input type="checkbox" id="m-docstidbtidb-limitations-check"/>
  <label for="m-docstidbtidb-limitations-check"><a href="/docs/tidb/tidb-limitations/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbtidb-limitations"><span class="">TiDB 제한 사항</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docstidbtutorial-li">
  <input type="checkbox" id="m-docstidbtutorial-check"/>
  <label for="m-docstidbtutorial-check"><a href="/docs/tidb/tutorial/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docstidbtutorial"><span class="">TiDB 설치</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbhardware-and-software-requirements-li">
  <input type="checkbox" id="m-docstidbhardware-and-software-requirements-check"/>
  <label for="m-docstidbhardware-and-software-requirements-check"><a href="/docs/tidb/hardware-and-software-requirements/" title="TiDB 소프트웨어 및 하드웨어 권장 사항" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbhardware-and-software-requirements"><span class="">소프트웨어 및 하드웨어 권장 사항</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbinstalltiup-li">
  <input type="checkbox" id="m-docstidbinstalltiup-check"/>
  <label for="m-docstidbinstalltiup-check"><a href="/docs/tidb/install/tiup/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbinstalltiup"><span class="">TiUP 설치</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbinstalllinux-li">
  <input type="checkbox" id="m-docstidbinstalllinux-check"/>
  <label for="m-docstidbinstalllinux-check"><a href="/docs/tidb/install/linux/" title="TiDB 로컬 설치 - 테스트 환경 구축" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbinstalllinux"><span class="">TiDB 로컬 설치</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbinstalldocker-compose-li">
  <input type="checkbox" id="m-docstidbinstalldocker-compose-check"/>
  <label for="m-docstidbinstalldocker-compose-check"><a href="/docs/tidb/install/docker-compose/" title="TiDB Docker 설치 - 테스트 환경 구축" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbinstalldocker-compose"><span class="">TiDB Docker 설치</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbquick-start-with-tidb-li">
  <input type="checkbox" id="m-docstidbquick-start-with-tidb-check"/>
  <label for="m-docstidbquick-start-with-tidb-check"><a href="/docs/tidb/quick-start-with-tidb/" title="TiDB 단일 컴퓨터에서 운영 환경 클러스터 배포 시뮬레이션" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbquick-start-with-tidb"><span class="">TiDB 배포 시뮬레이션</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbproduction-deployment-using-tiup-li">
  <input type="checkbox" id="m-docstidbproduction-deployment-using-tiup-check"/>
  <label for="m-docstidbproduction-deployment-using-tiup-check"><a href="/docs/tidb/production-deployment-using-tiup/" title="TiUP를 사용하여 TiDB 클러스터 배포" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbproduction-deployment-using-tiup"><span class="">TiDB 클러스터 배포</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docstidbquick-start-li">
  <input type="checkbox" id="m-docstidbquick-start-check"/>
  <label for="m-docstidbquick-start-check"><a href="/docs/tidb/quick-start/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docstidbquick-start"><span class="">퀵 스타트</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbquick-start-with-htap-li">
  <input type="checkbox" id="m-docstidbquick-start-with-htap-check"/>
  <label for="m-docstidbquick-start-with-htap-check"><a href="/docs/tidb/quick-start-with-htap/" title="TiDB HTAP 퀵 스타트 가이드" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbquick-start-with-htap"><span class="">HTAP 사용하기</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbbasic-sql-operations-li">
  <input type="checkbox" id="m-docstidbbasic-sql-operations-check"/>
  <label for="m-docstidbbasic-sql-operations-check"><a href="/docs/tidb/basic-sql-operations/" title="TiDB의 SQL 살펴보기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbbasic-sql-operations"><span class="">TiDB로 SQL 배우기</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbexplore-htap-li">
  <input type="checkbox" id="m-docstidbexplore-htap-check"/>
  <label for="m-docstidbexplore-htap-check"><a href="/docs/tidb/explore-htap/" title="TiDB HTAP 살펴보기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbexplore-htap"><span class="">HTAP 배우기</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbimport-example-data-li">
  <input type="checkbox" id="m-docstidbimport-example-data-check"/>
  <label for="m-docstidbimport-example-data-check"><a href="/docs/tidb/import-example-data/" title="TiDB 샘플 데이터베이스 가져오기" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbimport-example-data"><span class="">샘플 데이터베이스 가져오기</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docstidbcluster-architecture-li">
  <input type="checkbox" id="m-docstidbcluster-architecture-check"/>
  <label for="m-docstidbcluster-architecture-check"><a href="/docs/tidb/cluster-architecture/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docstidbcluster-architecture"><span class="">클러스터 아키텍처</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbarchitecture-li">
  <input type="checkbox" id="m-docstidbarchitecture-check"/>
  <label for="m-docstidbarchitecture-check"><a href="/docs/tidb/architecture/" title="TiDB 아키텍처 - 프로덕트 구성 이해" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbarchitecture"><span class="">아키텍처</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbstorege-li">
  <input type="checkbox" id="m-docstidbstorege-check"/>
  <label for="m-docstidbstorege-check"><a href="/docs/tidb/storege/" title="TiDB 스토리지" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbstorege"><span class="">스토리지</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbcomputing-li">
  <input type="checkbox" id="m-docstidbcomputing-check"/>
  <label for="m-docstidbcomputing-check"><a href="/docs/tidb/computing/" title="TiDB 컴퓨팅" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbcomputing"><span class="">컴퓨팅</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidbscheduling-li">
  <input type="checkbox" id="m-docstidbscheduling-check"/>
  <label for="m-docstidbscheduling-check"><a href="/docs/tidb/scheduling/" title="TiDB 스케줄링" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidbscheduling"><span class="">스케줄링</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docstidbfailover-li">
  <input type="checkbox" id="m-docstidbfailover-check"/>
  <label for="m-docstidbfailover-check"><a href="/docs/tidb/failover/" title="TiDB 자동 장애 조치" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docstidbfailover"><span class="">자동 장애 조치</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstidboperator-li">
  <input type="checkbox" id="m-docstidboperator-check"/>
  <label for="m-docstidboperator-check"><a href="/docs/tidb/operator/" title="TiDB Operator - 자동 장애 조치" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstidboperator"><span class="">TiDB Operator</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsinfluxdb-li">
  <input type="checkbox" id="m-docsinfluxdb-check"/>
  <label for="m-docsinfluxdb-check"><a href="/docs/influxdb/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsinfluxdb"><span class="">InfluxDB</span></a></label>
  
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>


          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#일관성-보장">일관성 보장</a></li>
    <li><a href="#선형성">선형성</a>
      <ul>
        <li><a href="#잠금과-리더-선출">잠금과 리더 선출</a></li>
        <li><a href="#채널-간-타이밍-의존성">채널 간 타이밍 의존성</a></li>
      </ul>
    </li>
    <li><a href="#선형성-시스템-구현하기">선형성 시스템 구현하기</a>
      <ul>
        <li><a href="#선형성-시맨틱을-제공하는-시스템-구현">선형성 시맨틱을 제공하는 시스템 구현</a></li>
        <li><a href="#복제-방법들">복제 방법들</a></li>
      </ul>
    </li>
    <li><a href="#선형성과-정족수">선형성과 정족수</a></li>
    <li><a href="#선형성의-비용">선형성의 비용</a>
      <ul>
        <li><a href="#선형성-1">선형성</a></li>
        <li><a href="#가용성">가용성</a></li>
      </ul>
    </li>
    <li><a href="#cap-정리">CAP 정리</a>
      <ul>
        <li><a href="#선형성과-네트워크-지연">선형성과 네트워크 지연</a></li>
      </ul>
    </li>
    <li><a href="#순서화-보장">순서화 보장</a>
      <ul>
        <li><a href="#순서화">순서화</a></li>
      </ul>
    </li>
    <li><a href="#순서화와-인과성">순서화와 인과성</a>
      <ul>
        <li><a href="#인과성">인과성</a></li>
      </ul>
    </li>
    <li><a href="#선형성은-인과적-일관성보다-강하다">선형성은 인과적 일관성보다 강하다</a></li>
    <li><a href="#인과적-의존성-담기-비선형성-시스템">인과적 의존성 담기 (비선형성 시스템)</a></li>
    <li><a href="#일련번호-순서화">일련번호 순서화</a></li>
    <li><a href="#비인과적-일련번호-생성기">비인과적 일련번호 생성기</a>
      <ul>
        <li><a href="#노드-별-일련번호">노드 별 일련번호</a></li>
        <li><a href="#고해상도-타임스탬프">고해상도 타임스탬프</a></li>
        <li><a href="#노드에-일련번호-블록-할당">노드에 일련번호 블록 할당</a></li>
      </ul>
    </li>
    <li><a href="#램포트-타임스탬프">램포트 타임스탬프</a></li>
    <li><a href="#타임스탬프-순서화로는-불충분">타임스탬프 순서화로는 불충분</a></li>
    <li><a href="#전체-순서-브로드캐스트">전체 순서 브로드캐스트</a></li>
    <li><a href="#전체-순서-브로드캐스트-사용하기">전체 순서 브로드캐스트 사용하기</a></li>
    <li><a href="#전체-순서-브로드캐스트-사용해-선형성-저장소-구현하기">전체 순서 브로드캐스트 사용해 선형성 저장소 구현하기</a></li>
    <li><a href="#선형성-저장소를-사용해-전체-순서-브로드캐스트-구현하기">선형성 저장소를 사용해 전체 순서 브로드캐스트 구현하기</a></li>
    <li><a href="#분산-트랜잭션과-합의">분산 트랜잭션과 합의</a></li>
    <li><a href="#원자적-커밋과-2단계-커밋-2pc">원자적 커밋과 2단계 커밋 (2PC)</a></li>
    <li><a href="#2단계-커밋2pc-2-phase-commit-소개">2단계 커밋(2PC, 2-phase commit) 소개</a></li>
    <li><a href="#약속에-관한-시스템">약속에 관한 시스템</a></li>
    <li><a href="#코디네이터-장애">코디네이터 장애</a></li>
    <li><a href="#3단계-커밋">3단계 커밋</a></li>
    <li><a href="#현실의-분산-트랜잭션">현실의 분산 트랜잭션</a>
      <ul>
        <li><a href="#분산-트랜잭션에-대한-엇갈린-평판">분산 트랜잭션에 대한 엇갈린 평판</a></li>
        <li><a href="#두-가지-종류의-분산-트랜잭션">두 가지 종류의 분산 트랜잭션</a></li>
      </ul>
    </li>
    <li><a href="#xa-트랜잭션">XA 트랜잭션</a></li>
    <li><a href="#의심스러운-상태에-있는-동안-잠금을-유지하는-문제">의심스러운 상태에 있는 동안 잠금을 유지하는 문제</a></li>
    <li><a href="#코디네이터-장애에서-복구하기">코디네이터 장애에서 복구하기</a></li>
    <li><a href="#분산-트랜잭션의-제약">분산 트랜잭션의 제약</a></li>
    <li><a href="#내결함성을-지닌-합의">내결함성을 지닌 합의</a>
      <ul>
        <li><a href="#합의-알고리즘의-속성">합의 알고리즘의 속성</a></li>
        <li><a href="#합의-알고리즘의-가정">합의 알고리즘의 가정</a></li>
      </ul>
    </li>
    <li><a href="#합의-알고리즘과-전체-순서-브로드캐스트">합의 알고리즘과 전체 순서 브로드캐스트</a></li>
    <li><a href="#단일-리더-복제와-합의">단일 리더 복제와 합의</a></li>
    <li><a href="#에포크-번호-붙이기와-정족수">에포크 번호 붙이기와 정족수</a></li>
    <li><a href="#합의의-제약">합의의 제약</a>
      <ul>
        <li><a href="#동기식-복제가-강제됨">동기식 복제가 강제됨</a></li>
        <li><a href="#과반수에-대한-제약">과반수에 대한 제약</a></li>
        <li><a href="#노드-수-변경에-대한-제약">노드 수 변경에 대한 제약</a></li>
        <li><a href="#네트워크-문제에-민감">네트워크 문제에 민감</a></li>
      </ul>
    </li>
    <li><a href="#멤버십과-코디네이션-서비스">멤버십과 코디네이션 서비스</a>
      <ul>
        <li><a href="#선형성-원자적-연산">선형성 원자적 연산</a></li>
        <li><a href="#연산의-전체-순서화">연산의 전체 순서화</a></li>
        <li><a href="#장애-감지">장애 감지</a></li>
        <li><a href="#변경-알림">변경 알림</a></li>
      </ul>
    </li>
    <li><a href="#작업을-노드에-할당하기">작업을 노드에 할당하기</a></li>
    <li><a href="#서비스-찾기">서비스 찾기</a></li>
    <li><a href="#멤버십-서비스">멤버십 서비스</a></li>
  </ul>
</nav>
      </div>
    
            <div class="taxonomy taxonomy-terms-cloud taxo-tags">
      <h5 class="taxonomy-title">Tags</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/algorithm/" data-taxonomy-term="algorithm"><span class="taxonomy-label">Algorithm</span><span class="taxonomy-count">61</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/android/" data-taxonomy-term="android"><span class="taxonomy-label">android</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/angular/" data-taxonomy-term="angular"><span class="taxonomy-label">Angular</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/angular2/" data-taxonomy-term="angular2"><span class="taxonomy-label">Angular2</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/angularjs/" data-taxonomy-term="angularjs"><span class="taxonomy-label">AngularJS</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/apache/" data-taxonomy-term="apache"><span class="taxonomy-label">Apache</span><span class="taxonomy-count">51</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/apache-hadoop/" data-taxonomy-term="apache-hadoop"><span class="taxonomy-label">Apache Hadoop</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/apache-kafka/" data-taxonomy-term="apache-kafka"><span class="taxonomy-label">Apache Kafka</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/apache-spark/" data-taxonomy-term="apache-spark"><span class="taxonomy-label">Apache Spark</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/apache-thrift/" data-taxonomy-term="apache-thrift"><span class="taxonomy-label">Apache Thrift</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/apache-zookeeper/" data-taxonomy-term="apache-zookeeper"><span class="taxonomy-label">Apache ZooKeeper</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/architecture/" data-taxonomy-term="architecture"><span class="taxonomy-label">Architecture</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/aws/" data-taxonomy-term="aws"><span class="taxonomy-label">AWS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/bdd/" data-taxonomy-term="bdd"><span class="taxonomy-label">BDD</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/bigdata/" data-taxonomy-term="bigdata"><span class="taxonomy-label">BigData</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/blog/" data-taxonomy-term="blog"><span class="taxonomy-label">Blog</span><span class="taxonomy-count">24</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/bootstrap/" data-taxonomy-term="bootstrap"><span class="taxonomy-label">Bootstrap</span><span class="taxonomy-count">10</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/bug/" data-taxonomy-term="bug"><span class="taxonomy-label">Bug</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/build/" data-taxonomy-term="build"><span class="taxonomy-label">Build</span><span class="taxonomy-count">42</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/c/" data-taxonomy-term="c"><span class="taxonomy-label">C</span><span class="taxonomy-count">86</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cache/" data-taxonomy-term="cache"><span class="taxonomy-label">Cache</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/caffeine/" data-taxonomy-term="caffeine"><span class="taxonomy-label">Caffeine</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/calibre/" data-taxonomy-term="calibre"><span class="taxonomy-label">Calibre</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cassandra/" data-taxonomy-term="cassandra"><span class="taxonomy-label">Cassandra</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cdn/" data-taxonomy-term="cdn"><span class="taxonomy-label">CDN</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/centos/" data-taxonomy-term="centos"><span class="taxonomy-label">CentOS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cerebro/" data-taxonomy-term="cerebro"><span class="taxonomy-label">Cerebro</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ci/" data-taxonomy-term="ci"><span class="taxonomy-label">CI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ci/" data-taxonomy-term="ci"><span class="taxonomy-label">CI</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cloud/" data-taxonomy-term="cloud"><span class="taxonomy-label">Cloud</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cloud-native/" data-taxonomy-term="cloud-native"><span class="taxonomy-label">Cloud Native</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/code/" data-taxonomy-term="code"><span class="taxonomy-label">Code</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/computer/" data-taxonomy-term="computer"><span class="taxonomy-label">Computer</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/cors/" data-taxonomy-term="cors"><span class="taxonomy-label">CORS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/css/" data-taxonomy-term="css"><span class="taxonomy-label">CSS</span><span class="taxonomy-count">69</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/d3/" data-taxonomy-term="d3"><span class="taxonomy-label">D3</span><span class="taxonomy-count">18</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/d3.js/" data-taxonomy-term="d3.js"><span class="taxonomy-label">D3.js</span><span class="taxonomy-count">21</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/data/" data-taxonomy-term="data"><span class="taxonomy-label">Data</span><span class="taxonomy-count">11</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/data-structure/" data-taxonomy-term="data-structure"><span class="taxonomy-label">Data Structure</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/database/" data-taxonomy-term="database"><span class="taxonomy-label">Database</span><span class="taxonomy-count">297</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ddd/" data-taxonomy-term="ddd"><span class="taxonomy-label">DDD</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/design-pattern/" data-taxonomy-term="design-pattern"><span class="taxonomy-label">Design Pattern</span><span class="taxonomy-count">24</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/devops/" data-taxonomy-term="devops"><span class="taxonomy-label">DevOps</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/dns/" data-taxonomy-term="dns"><span class="taxonomy-label">DNS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/docker/" data-taxonomy-term="docker"><span class="taxonomy-label">Docker</span><span class="taxonomy-count">28</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/docusaurus/" data-taxonomy-term="docusaurus"><span class="taxonomy-label">Docusaurus</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/dto/" data-taxonomy-term="dto"><span class="taxonomy-label">dto</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/e-book/" data-taxonomy-term="e-book"><span class="taxonomy-label">e-Book</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/e-mail/" data-taxonomy-term="e-mail"><span class="taxonomy-label">E-Mail</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/eclipse/" data-taxonomy-term="eclipse"><span class="taxonomy-label">Eclipse</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/effective-java/" data-taxonomy-term="effective-java"><span class="taxonomy-label">Effective Java</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/elasticsearch/" data-taxonomy-term="elasticsearch"><span class="taxonomy-label">Elasticsearch</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/elastisearch/" data-taxonomy-term="elastisearch"><span class="taxonomy-label">Elastisearch</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/entity/" data-taxonomy-term="entity"><span class="taxonomy-label">entity</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/etym/" data-taxonomy-term="etym"><span class="taxonomy-label">ETYM</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/excel/" data-taxonomy-term="excel"><span class="taxonomy-label">Excel</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/flutter/" data-taxonomy-term="flutter"><span class="taxonomy-label">Flutter</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ftp/" data-taxonomy-term="ftp"><span class="taxonomy-label">FTP</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/game/" data-taxonomy-term="game"><span class="taxonomy-label">Game</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/garbage-collection/" data-taxonomy-term="garbage-collection"><span class="taxonomy-label">Garbage collection</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/gcp/" data-taxonomy-term="gcp"><span class="taxonomy-label">GCP</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/git/" data-taxonomy-term="git"><span class="taxonomy-label">Git</span><span class="taxonomy-count">46</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/github/" data-taxonomy-term="github"><span class="taxonomy-label">GitHub</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/gitops/" data-taxonomy-term="gitops"><span class="taxonomy-label">GitOps</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/go/" data-taxonomy-term="go"><span class="taxonomy-label">Go</span><span class="taxonomy-count">20</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/gradle/" data-taxonomy-term="gradle"><span class="taxonomy-label">Gradle</span><span class="taxonomy-count">13</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/grafana/" data-taxonomy-term="grafana"><span class="taxonomy-label">Grafana</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/graph-database/" data-taxonomy-term="graph-database"><span class="taxonomy-label">Graph Database</span><span class="taxonomy-count">12</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/graphql/" data-taxonomy-term="graphql"><span class="taxonomy-label">GraphQL</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/gremlin/" data-taxonomy-term="gremlin"><span class="taxonomy-label">Gremlin</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/guava/" data-taxonomy-term="guava"><span class="taxonomy-label">Guava</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/gulp/" data-taxonomy-term="gulp"><span class="taxonomy-label">gulp</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/handlebars/" data-taxonomy-term="handlebars"><span class="taxonomy-label">Handlebars</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/harbor/" data-taxonomy-term="harbor"><span class="taxonomy-label">Harbor</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/hbase/" data-taxonomy-term="hbase"><span class="taxonomy-label">HBase</span><span class="taxonomy-count">12</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/helm/" data-taxonomy-term="helm"><span class="taxonomy-label">Helm</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/html/" data-taxonomy-term="html"><span class="taxonomy-label">HTML</span><span class="taxonomy-count">65</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/http/" data-taxonomy-term="http"><span class="taxonomy-label">HTTP</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/hugo/" data-taxonomy-term="hugo"><span class="taxonomy-label">Hugo</span><span class="taxonomy-count">22</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/hyper-v/" data-taxonomy-term="hyper-v"><span class="taxonomy-label">Hyper-V</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ide/" data-taxonomy-term="ide"><span class="taxonomy-label">IDE</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/influxdb/" data-taxonomy-term="influxdb"><span class="taxonomy-label">InfluxDB</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/intellij/" data-taxonomy-term="intellij"><span class="taxonomy-label">Intellij</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/internet/" data-taxonomy-term="internet"><span class="taxonomy-label">Internet</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ip/" data-taxonomy-term="ip"><span class="taxonomy-label">IP</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/it-%EC%9A%A9%EC%96%B4/" data-taxonomy-term="it-%EC%9A%A9%EC%96%B4"><span class="taxonomy-label">IT 용어</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/java/" data-taxonomy-term="java"><span class="taxonomy-label">Java</span><span class="taxonomy-count">438</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/javadoc/" data-taxonomy-term="javadoc"><span class="taxonomy-label">Javadoc</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/javafx/" data-taxonomy-term="javafx"><span class="taxonomy-label">JavaFX</span><span class="taxonomy-count">12</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/javascript/" data-taxonomy-term="javascript"><span class="taxonomy-label">JavaScript</span><span class="taxonomy-count">205</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/jenkins/" data-taxonomy-term="jenkins"><span class="taxonomy-label">Jenkins</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/jpa/" data-taxonomy-term="jpa"><span class="taxonomy-label">JPA</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/jquery/" data-taxonomy-term="jquery"><span class="taxonomy-label">jQuery</span><span class="taxonomy-count">53</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/json/" data-taxonomy-term="json"><span class="taxonomy-label">JSON</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/jsp/" data-taxonomy-term="jsp"><span class="taxonomy-label">JSP</span><span class="taxonomy-count">44</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/junit/" data-taxonomy-term="junit"><span class="taxonomy-label">JUnit</span><span class="taxonomy-count">18</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/jvm/" data-taxonomy-term="jvm"><span class="taxonomy-label">JVM</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/jwt/" data-taxonomy-term="jwt"><span class="taxonomy-label">JWT</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/kibana/" data-taxonomy-term="kibana"><span class="taxonomy-label">Kibana</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/kotest/" data-taxonomy-term="kotest"><span class="taxonomy-label">Kotest</span><span class="taxonomy-count">46</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/kotlin/" data-taxonomy-term="kotlin"><span class="taxonomy-label">Kotlin</span><span class="taxonomy-count">111</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/kubernetes/" data-taxonomy-term="kubernetes"><span class="taxonomy-label">Kubernetes</span><span class="taxonomy-count">21</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/lan/" data-taxonomy-term="lan"><span class="taxonomy-label">LAN</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/laravel/" data-taxonomy-term="laravel"><span class="taxonomy-label">Laravel</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/license/" data-taxonomy-term="license"><span class="taxonomy-label">License</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/linux/" data-taxonomy-term="linux"><span class="taxonomy-label">Linux</span><span class="taxonomy-count">77</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/logback/" data-taxonomy-term="logback"><span class="taxonomy-label">Logback</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/lombok/" data-taxonomy-term="lombok"><span class="taxonomy-label">Lombok</span><span class="taxonomy-count">16</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/macos/" data-taxonomy-term="macos"><span class="taxonomy-label">macOS</span><span class="taxonomy-count">19</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/markdown/" data-taxonomy-term="markdown"><span class="taxonomy-label">markdown</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/maven/" data-taxonomy-term="maven"><span class="taxonomy-label">Maven</span><span class="taxonomy-count">42</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/message-queue/" data-taxonomy-term="message-queue"><span class="taxonomy-label">Message Queue</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/mongodb/" data-taxonomy-term="mongodb"><span class="taxonomy-label">MongoDB</span><span class="taxonomy-count">13</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/mqtt/" data-taxonomy-term="mqtt"><span class="taxonomy-label">MQTT</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/msa/" data-taxonomy-term="msa"><span class="taxonomy-label">MSA</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/mvc/" data-taxonomy-term="mvc"><span class="taxonomy-label">MVC</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/mybatis/" data-taxonomy-term="mybatis"><span class="taxonomy-label">MyBatis</span><span class="taxonomy-count">44</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/mysql/" data-taxonomy-term="mysql"><span class="taxonomy-label">MySQL</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/neo4j/" data-taxonomy-term="neo4j"><span class="taxonomy-label">Neo4j</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/network/" data-taxonomy-term="network"><span class="taxonomy-label">Network</span><span class="taxonomy-count">24</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/nginx/" data-taxonomy-term="nginx"><span class="taxonomy-label">Nginx</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/node.js/" data-taxonomy-term="node.js"><span class="taxonomy-label">Node.js</span><span class="taxonomy-count">11</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/nosql/" data-taxonomy-term="nosql"><span class="taxonomy-label">NoSQL</span><span class="taxonomy-count">49</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/oauth/" data-taxonomy-term="oauth"><span class="taxonomy-label">OAuth</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/os/" data-taxonomy-term="os"><span class="taxonomy-label">OS</span><span class="taxonomy-count">100</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/osi/" data-taxonomy-term="osi"><span class="taxonomy-label">OSI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/php/" data-taxonomy-term="php"><span class="taxonomy-label">php</span><span class="taxonomy-count">67</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/pinpoint/" data-taxonomy-term="pinpoint"><span class="taxonomy-label">Pinpoint</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/port/" data-taxonomy-term="port"><span class="taxonomy-label">Port</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/postgresql/" data-taxonomy-term="postgresql"><span class="taxonomy-label">PostgreSQL</span><span class="taxonomy-count">60</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/programming/" data-taxonomy-term="programming"><span class="taxonomy-label">Programming</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/prometheus/" data-taxonomy-term="prometheus"><span class="taxonomy-label">Prometheus</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/proxy/" data-taxonomy-term="proxy"><span class="taxonomy-label">Proxy</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/pyspark/" data-taxonomy-term="pyspark"><span class="taxonomy-label">PySpark</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/python/" data-taxonomy-term="python"><span class="taxonomy-label">Python</span><span class="taxonomy-count">34</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/rdb/" data-taxonomy-term="rdb"><span class="taxonomy-label">RDB</span><span class="taxonomy-count">11</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/rdbms/" data-taxonomy-term="rdbms"><span class="taxonomy-label">RDBMS</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/react/" data-taxonomy-term="react"><span class="taxonomy-label">React</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/redis/" data-taxonomy-term="redis"><span class="taxonomy-label">Redis</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/reflection/" data-taxonomy-term="reflection"><span class="taxonomy-label">Reflection</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/rest-api/" data-taxonomy-term="rest-api"><span class="taxonomy-label">REST API</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/rmi/" data-taxonomy-term="rmi"><span class="taxonomy-label">RMI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/robots/" data-taxonomy-term="robots"><span class="taxonomy-label">robots</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/rpc/" data-taxonomy-term="rpc"><span class="taxonomy-label">RPC</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/sass/" data-taxonomy-term="sass"><span class="taxonomy-label">SASS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/scm/" data-taxonomy-term="scm"><span class="taxonomy-label">SCM</span><span class="taxonomy-count">46</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/scsss/" data-taxonomy-term="scsss"><span class="taxonomy-label">SCSSS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/secure-coding-guide/" data-taxonomy-term="secure-coding-guide"><span class="taxonomy-label">Secure Coding Guide</span><span class="taxonomy-count">18</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/security/" data-taxonomy-term="security"><span class="taxonomy-label">Security</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/seo/" data-taxonomy-term="seo"><span class="taxonomy-label">SEO</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/servlet/" data-taxonomy-term="servlet"><span class="taxonomy-label">Servlet</span><span class="taxonomy-count">44</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/sigil/" data-taxonomy-term="sigil"><span class="taxonomy-label">Sigil</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/sitemap/" data-taxonomy-term="sitemap"><span class="taxonomy-label">Sitemap</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/sns/" data-taxonomy-term="sns"><span class="taxonomy-label">SNS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/software/" data-taxonomy-term="software"><span class="taxonomy-label">Software</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/solid/" data-taxonomy-term="solid"><span class="taxonomy-label">SOLID</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spinnaker/" data-taxonomy-term="spinnaker"><span class="taxonomy-label">Spinnaker</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spock/" data-taxonomy-term="spock"><span class="taxonomy-label">Spock</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring/" data-taxonomy-term="spring"><span class="taxonomy-label">Spring</span><span class="taxonomy-count">111</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-batch/" data-taxonomy-term="spring-batch"><span class="taxonomy-label">Spring Batch</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-boot/" data-taxonomy-term="spring-boot"><span class="taxonomy-label">Spring Boot</span><span class="taxonomy-count">40</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-data/" data-taxonomy-term="spring-data"><span class="taxonomy-label">Spring Data</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-data-r2dbc/" data-taxonomy-term="spring-data-r2dbc"><span class="taxonomy-label">Spring Data R2DBC</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-security/" data-taxonomy-term="spring-security"><span class="taxonomy-label">Spring Security</span><span class="taxonomy-count">10</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/spring-web-reactive/" data-taxonomy-term="spring-web-reactive"><span class="taxonomy-label">Spring Web Reactive</span><span class="taxonomy-count">35</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/sql/" data-taxonomy-term="sql"><span class="taxonomy-label">SQL</span><span class="taxonomy-count">42</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/sqlite/" data-taxonomy-term="sqlite"><span class="taxonomy-label">SQLite</span><span class="taxonomy-count">108</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/stack/" data-taxonomy-term="stack"><span class="taxonomy-label">Stack</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/svg/" data-taxonomy-term="svg"><span class="taxonomy-label">SVG</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/svn/" data-taxonomy-term="svn"><span class="taxonomy-label">SVN</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/swift/" data-taxonomy-term="swift"><span class="taxonomy-label">Swift</span><span class="taxonomy-count">49</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/syntaxhighlighter/" data-taxonomy-term="syntaxhighlighter"><span class="taxonomy-label">SyntaxHighlighter</span><span class="taxonomy-count">11</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/tcp/" data-taxonomy-term="tcp"><span class="taxonomy-label">TCP</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/tdd/" data-taxonomy-term="tdd"><span class="taxonomy-label">TDD</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/telnet/" data-taxonomy-term="telnet"><span class="taxonomy-label">Telnet</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/testcontainers/" data-taxonomy-term="testcontainers"><span class="taxonomy-label">Testcontainers</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/testing/" data-taxonomy-term="testing"><span class="taxonomy-label">Testing</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/thymeleaf/" data-taxonomy-term="thymeleaf"><span class="taxonomy-label">Thymeleaf</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/tidb/" data-taxonomy-term="tidb"><span class="taxonomy-label">TiDB</span><span class="taxonomy-count">25</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/tomcat/" data-taxonomy-term="tomcat"><span class="taxonomy-label">Tomcat</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/transaction/" data-taxonomy-term="transaction"><span class="taxonomy-label">Transaction</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/udp/" data-taxonomy-term="udp"><span class="taxonomy-label">UDP</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ui/" data-taxonomy-term="ui"><span class="taxonomy-label">UI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/ux/" data-taxonomy-term="ux"><span class="taxonomy-label">UX</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/vcs/" data-taxonomy-term="vcs"><span class="taxonomy-label">VCS</span><span class="taxonomy-count">46</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/virtualbox/" data-taxonomy-term="virtualbox"><span class="taxonomy-label">VirtualBox</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/virtualization/" data-taxonomy-term="virtualization"><span class="taxonomy-label">Virtualization</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/vo/" data-taxonomy-term="vo"><span class="taxonomy-label">vo</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/vpn/" data-taxonomy-term="vpn"><span class="taxonomy-label">VPN</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/vscode/" data-taxonomy-term="vscode"><span class="taxonomy-label">VSCode</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/vue.js/" data-taxonomy-term="vue.js"><span class="taxonomy-label">Vue.js</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/web/" data-taxonomy-term="web"><span class="taxonomy-label">WEB</span><span class="taxonomy-count">389</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/windows/" data-taxonomy-term="windows"><span class="taxonomy-label">Windows</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/xml/" data-taxonomy-term="xml"><span class="taxonomy-label">XML</span><span class="taxonomy-count">13</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/yaml/" data-taxonomy-term="yaml"><span class="taxonomy-label">YAML</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/zookeeper/" data-taxonomy-term="zookeeper"><span class="taxonomy-label">ZooKeeper</span><span class="taxonomy-count">2</span></a></li>
        </ul>
    </div>
  

          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/category/data-science/big-data/">Big Data</a></li>
  <li class="breadcrumb-item">
    <a href="/docs/data-intensive-application/">데이터 중심 애플리케이션 설계</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    09장. 일관성과 합의</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>데이터 중심 애플리케이션 설계 | 09장. 일관성과 합의</h1>
	
	<header class="article-meta">
		
		
			
				<div class="taxonomy taxonomy-terms-article taxo-tags">
  <h5 class="taxonomy-title">Tags:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/database/" data-taxonomy-term="database"><span class="taxonomy-label">Database</span></a></li>
    <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/nosql/" data-taxonomy-term="nosql"><span class="taxonomy-label">NoSQL</span></a></li>
    <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/data/" data-taxonomy-term="data"><span class="taxonomy-label">Data</span></a></li>
    <li><a class="taxonomy-term" href="https://www.devkuma.com/tags/rdb/" data-taxonomy-term="rdb"><span class="taxonomy-label">RDB</span></a></li>
    </ul>
</div>

			
		
		
	</header>
	
	<p><em>발표자 : 이호준, 조성직</em></p>
<p>이번 장에서는 내결함성을 지닌 분산 시스템을 구축하기 위해 사용하는 알고리즘과 프로토콜을 알아본다.</p>
<h2 id="일관성-보장">일관성 보장</h2>
<p>약한보장</p>
<ul>
<li>복제 데이터 베이스는 대부분 최소한 최종적 일관성을 제공하나, 언제 수렴될지 모른다.</li>
</ul>
<p>강한보장</p>
<ul>
<li>데이터 시스템이 선택적으로 제공</li>
</ul>
<p>올바르게 사용하기 쉬우나 시스템 성능이 나쁘거나 내결함성이 약할수도 있다.</p>
<h2 id="선형성">선형성</h2>
<p>공통적으로 사용되는 가장 강한 일관성 모델 중 하나
단 하나의 DB 복제본만 있다고 가정 (원자적 일관성 - atomic consistency)
최신성 보장 (recency guarantee) - read 시 최신 값을 보장</p>
<p><strong>비선형 시스템의 예</strong></p>
<p><img src="/docs/data-intensive-application/09-1.png" alt="그림 9-1"><br>
<em>그림 9-1. 이 시스템은 비선형이라서 축구팬들을 혼란스럽게 한다.</em></p>
<p><strong>시스템에 선형성을 부여하는 것</strong></p>
<p><img src="/docs/data-intensive-application/09-2.png" alt="그림 9-2"><br>
<em>그림 9-2. 읽기 요청이 쓰기 요청과 동시에 실행되면 과거의 값을 반환할 수도 있고 새로운 값을 반환할 수도 있다.</em></p>
<ul>
<li>클라이언트는 자신의 요청이 언제 처리됐는지는 알지 못하고 요청, 응답 시간 사이에 처리됐다는 것만 앎</li>
<li>클라이언트 C의 쓰기 요청 전의 읽기 요청은 0, 쓰기 요청이 끝난 후의 읽이 요청은 1을 반환해야 하는 것은 명백함</li>
<li>쓰기 요청 중 읽기 요청에서는 0 또는 1이 반환될 수 있는데 선형 시스템에 기대하는 바가 아님</li>
</ul>
<p>선형적 시스템을 위한 제약 조건 추가</p>
<p><img src="/docs/data-intensive-application/09-3.png" alt="그림 9-3"><br>
<em>그림 9-3. 읽기가 새로운 값을 반환한 적이 있은 후에는 모든 후속 읽기(같은 클라이언트에서 실행되든 다른 클라이언트에서 실행되든)도 반듯이 새로운 값을 반환해야 한다.</em></p>
<ul>
<li>읽기가 새로운 값을 반환하면 그 이후 모든 읽기는 새로운 값을 반환해야 함</li>
</ul>
<p>개별 연산 시각화를 위한 시점 연산 추가</p>
<p><img src="/docs/data-intensive-application/09-4.png" alt="그림 9-4"><br>
<em>그림 9-4. 읽기와 쓰기의 영향이 나타나는 것으로 보이는 시점을 시각화하기, B의 마지막 읽기는 선형적이지 않다.</em></p>
<ul>
<li>연산 표시를 모은 선들은 항상 시간순으로 진행돼야 하고 이를 통해 최신성이 보장됨</li>
<li>cas - 클라이언트가 원자적 compare-and-set 연산을 요청</li>
<li>→ cas(x, v1, v2) =&gt; r : 레지스터 x의 현재 값이 v1과 같으면 v2로 설정, 아니면 오류 반환</li>
</ul>
<p>→ 선형성은 레지스터(개별 객체)에 실행되는 읽기, 쓰기에 대한 최신성 보장</p>
<h3 id="잠금과-리더-선출">잠금과 리더 선출</h3>
<ul>
<li>단일 리더 복제에서는 리더가 하나만 존재해야 함</li>
<li>잠금은 리더를 선출하는 방법</li>
<li>선형적으로 모든 노드가 시작할 때 잠금 획득을 시도하고, 성공한 노드가 리더가 됨</li>
<li>아파치 주키퍼, etcd 등 코디네이션 서비스 사용되기도 함</li>
</ul>
<h3 id="채널-간-타이밍-의존성">채널 간 타이밍 의존성</h3>
<ul>
<li>시스템의 통신 채널에 의한 경쟁 조건 발생 가능</li>
<li>크기 변경 모듈이 과거 버전 이미지를 처리해 저장하면 파일저장소의 원래 이미지와 영구적으로 불일치</li>
<li>선형성으로 이러한 경쟁 조건을 회피 할 수 있음</li>
</ul>
<p><img src="/docs/data-intensive-application/09-4.png" alt="그림 9-5"><br>
<em>그림 9-5. 웹 서버와 이미지 크기 변경 모듈은 파일 저장소와 메세지 큐를 모두 써서 통신하므로 갱쟁 조건이 발생할 가능성이 열려 있다.</em></p>
<p>→ 메시지 큐와 파일 저장소가 선형적으로 동작하면 경쟁 조건의 위험에서 벗어날 수 있다</p>
<h2 id="선형성-시스템-구현하기">선형성 시스템 구현하기</h2>
<h3 id="선형성-시맨틱을-제공하는-시스템-구현">선형성 시맨틱을 제공하는 시스템 구현</h3>
<p>선형성은 근본적으로 &ldquo;데이터 복사본이 하나만 있는 것처럼 동작하고 그 데이터에 실행되는 모든 연산은 원자적&rdquo;
실제로 그러면 결함을 견뎌낼 수 없다.
내결함성을 지니기 위해 복제를 사용함</p>
<h3 id="복제-방법들">복제 방법들</h3>
<ul>
<li>단일 리더 복제(선형적일 수 있음)</li>
<li>합의 알고리즘(선형적)</li>
<li>다중 리더 복제(비선형적)</li>
<li>리더 없는 복제(아마도 비선형적)</li>
</ul>
<h2 id="선형성과-정족수">선형성과 정족수</h2>
<p>다이나모 모델에서 엄격한 정족수를 사용한 읽기 쓰기는 선형적으로 보이지만 경쟁 조건이 생길 수 있음</p>
<p><img src="/docs/data-intensive-application/09-5.png" alt="그림 9-5"><br>
<em>그림 9-5. 웹 서버와 이미지 크기 변경 모듈은 파일 저장소와 메세지 큐를 모두 써서 통신하므로 갱쟁 조건이 발생할 가능성이 열려 있다.</em></p>
<ul>
<li>n(복제 서버) = 3, w(쓰기 노드) = 3, r(읽기 노드) = 2 → 정족수 조건 만족 (w + r &gt; n) 이지만</li>
<li>선형적이지 않음</li>
<li>성능상 불이익이나 선형성을 만족시킬 수 없기 떄문에 다이나모 스타일의 복제를 하는 리더 없는 시스템은 비선형적임</li>
</ul>
<h2 id="선형성의-비용">선형성의 비용</h2>
<p><img src="/docs/data-intensive-application/09-7.png" alt="그림 9-7"><br>
<em>그림 9-7. 네트워크가 끊기면 선형성과 가용성 사이에서 선택해야만 한다.</em></p>
<h3 id="선형성-1">선형성</h3>
<p>단일 리더 경우로 네트워크 중단 시 팔로워 DC로 접속한 Client 는 사용에 문제가 있다.<br>
허나 리더 DC로 직접 접속이 가능하면 정상 동작할 수 있다.</p>
<h3 id="가용성">가용성</h3>
<p>다중 리더 경우로 비선형적이지만 DC간 네트워크 중단에도 정상 동작은 가능하다.<br>
네트워크 복구 시 복제 요청이 전달됨</p>
<h2 id="cap-정리">CAP 정리</h2>
<ul>
<li>Consistency(일관성), Availability(가용성), Partition tolerance(분단 내성)</li>
<li>선형성 데이터베이스라면 이러한 선형성과 가용성의 트레이드오프 문제가 있음</li>
<li>오직 하나의 일관성 모델(=선형성) 과 한 종류의 결함(네트워크 분단 or 연결이 끊긴 살아있는 노드) 만 고려함</li>
<li>다른 부분인 네트워크 지연, 트레이드 오프 등에 대해 고려하지 않으므로 시스템 설계 시 고려할 실용적인 가치가 없음</li>
</ul>
<h3 id="선형성과-네트워크-지연">선형성과 네트워크 지연</h3>
<ul>
<li>최신 다중코어 CPU의 RAM조차 선형적이지 않을 정도로 선형적인 시스템은 드물다.</li>
<li>이러한 트레이드 오프는 내결함성 대신 성능을 선택했기 떄문이다.</li>
<li>여러 분산 데이터 베이스도 마찬가지이다.</li>
</ul>
<h2 id="순서화-보장">순서화 보장</h2>
<h3 id="순서화">순서화</h3>
<ul>
<li>단일 리더 복제에서는 팔로워 쓰기 순서를 결정하는게 리더의 목적이였음</li>
<li>트랜잭션의 직렬성은 어떤 순서에 따라 실행됨을 보장하는 것</li>
<li>분산 시스템의 타임스탬프, 시계 사용은 시간을 통해 순서를 결정하기 위한 방법들
→ 순서화, 선형성, 합의 사이에 연관 관계를 통해 시스템이 무엇을 하고 할 수 없는지 이해할 수 있음</li>
</ul>
<h2 id="순서화와-인과성">순서화와 인과성</h2>
<h3 id="인과성">인과성</h3>
<p>→ 결과가 나타나기 전에 원인이 발생한다.</p>
<ul>
<li>순서화가 인과성을 보존하는데 도움을</li>
<li>시스템이 인과성에 의해 부과된 순서를 지키면 그 시스템은 인과적으로 일관적(causally consistent) 라고 함</li>
</ul>
<h2 id="선형성은-인과적-일관성보다-강하다">선형성은 인과적 일관성보다 강하다</h2>
<ul>
<li>선형성은 인과성을 내포하기에 선형적 시스템은 인과성도 올바르게 유지함</li>
<li>다만 성능, 가용성에 해가 될 수 있음 (네트워크 지연 등으로 인한)</li>
<li>절충을 통해 성능 손해 없이 인과적 일관성을 만족 시킬 수 있고, 연구 중</li>
</ul>
<h2 id="인과적-의존성-담기-비선형성-시스템">인과적 의존성 담기 (비선형성 시스템)</h2>
<ul>
<li>두 연산의 인과관계를 파악해야 함</li>
<li>데이터베이스는 애플리케이션이 어떤 데이터 버전을 읽었는지 확인</li>
</ul>
<h2 id="일련번호-순서화">일련번호 순서화</h2>
<ul>
<li>모든 인과적 의존성을 추적하는건 실용성이 떨어지고, 오버헤드가 큼</li>
<li>따라서 일련번호, 타임스탬프로 이벤트 순서를 정하는 방법이 있음</li>
<li>크기가 작고, 고유해서 전체 순서를 알 수 있음</li>
</ul>
<h2 id="비인과적-일련번호-생성기">비인과적 일련번호 생성기</h2>
<h3 id="노드-별-일련번호">노드 별 일련번호</h3>
<ul>
<li>각 노드 개별로 독립적인 일련번호 집합 생성</li>
<li>ex) node A = {2, 4, 6, 8..} , node B = {1, 3, 5, 7&hellip;}</li>
<li>but, 노드마다 초당 연산 수가 다를 수 있음</li>
</ul>
<h3 id="고해상도-타임스탬프">고해상도 타임스탬프</h3>
<ul>
<li>각 연산에 일 기준 시계의 타임스탬프를 붙임</li>
<li>ex) X = 40.00001, Y = 40.00003</li>
<li>but, 노드 간 타임스탬프 불일치</li>
</ul>
<h3 id="노드에-일련번호-블록-할당">노드에 일련번호 블록 할당</h3>
<ul>
<li>일련번호들을 노드에 미리 할당</li>
<li>ex) node A = {1 ~ 1000}, node B = {1001 ~ 2000}</li>
<li>but, 블록 일련번호 간 일관성 불일치</li>
</ul>
<p>잘 동작하나, 인과성에 일관적이지 않음</p>
<h2 id="램포트-타임스탬프">램포트 타임스탬프</h2>
<ul>
<li>인과성에 일관적인 일련번호를 생성하는 간단한 방법</li>
<li>현재 분산 시스템 분야에서 가장 많이 인용된 논문에 나온 방법</li>
<li>각 노드는 처리한 연산의 갯수인 카운터, 타임스탬프를 가지는 노드 ID 를 가짐</li>
<li>두 타임스탬프에서 카운터가 큰 것이, 그리고 노드 ID가 큰 값이 타임 스탬프가 큼</li>
</ul>
<p><img src="/docs/data-intensive-application/09-8.png" alt="그림 9-8"><br>
<em>그림 9-8. 컴포트 타임스탬프는 인과성에 일관적인 전체 순서화를 제공한다</em></p>
<p>→ 모든 노드, 클라이언트는 최댓값을 가지는 카운터를 추적하고 요청, 응답에 따라 최댓값 갱신</p>
<h2 id="타임스탬프-순서화로는-불충분">타임스탬프 순서화로는 불충분</h2>
<p>일관적 인과성을 갖는 연산의 전체 순서를 정의하지만 분산 시스템의 공통 문제를 해결하는데 불충분
연산들을 사후에 결정하는게 아닌, 요청을 받는 즉시 결정해야 할 때 문제가 생김
→ 연산의 전체 순서를 모든 연산을 모은 후에 결정되는 것이 원인
전체 순서를 언제 확정할 것인지 전체 순서 브로드캐스트를 통해 다룸</p>
<h2 id="전체-순서-브로드캐스트">전체 순서 브로드캐스트</h2>
<p>(* 참고 : 전체 순서, 부분 순서)</p>
<p>전체 순서 브로드캐스트는 노드 사이에 메시지를 교환하는 프로토콜로 기술된다.<br>
비공식적으로 두 가지 안전성 속성을 항상 만족해야 한다.</p>
<ul>
<li>신뢰성 있는 전달
<ul>
<li>어떤 메시지도 손실되지 않는다.</li>
<li>메시지가 하나의 노드에 전달되면 모든 노드에 전달되어야 한다.</li>
</ul>
</li>
<li>전체 순서가 정해진 전달
<ul>
<li>메시지는 모든 노드에 같은 순서로 전달된다.</li>
</ul>
</li>
<li>참고 : <a href="https://en.wikipedia.org/wiki/Atomic_broadcast" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Atomic_broadcast<i class="fas fa-external-link-alt"></i></a></li>
</ul>
<p>이 두 속성은 노드나 네트워크 결함이 있어도 항상 만족되어야 한다.<br>
물론 네트워크가 끊긴 순간에는 메시지가 전달되지 못하지만 결국 복구될 것이고 메시지 전송을 계속하여 재시도하면 이를 만족할 수 있을 것이다.<br>
메시지가 전달되는 순서가 곧 시스템에서 연산의 전체 순서를 의미한다.<br>
전체 순서 브로드캐스트의 중요한 측면은 메시지가 전달되는 시점에 순서가 고정된다는 것이다.<br>
후속 메시지가 이미 전달된 경우 그 앞의 순서에 메시지를 끼워넣는 것을 허용하지 않는다.</p>
<h2 id="전체-순서-브로드캐스트-사용하기">전체 순서 브로드캐스트 사용하기</h2>
<p><strong>합의</strong>
주키퍼나 etcd 같은 합의 서비스는 전체 순서 브로드캐스트를 실제로 구현한다.<br>
전체 순서 브로드캐스트와 합의는 서로 크게 연관되어 있다.</p>
<p><strong>데이터베이스 복제</strong>
전체 순서 브로드캐스트는 데이터베이스 복제에도 사용된다.<br>
모든 메시지가 데이터베이스의 쓰기를 나타내고 모든 노드에 메시지가 동일한 순서로 전달된다면 각 노드는 메시지를 받은 순서대로 처리하면 모든 노드가 서로 일관성 있는 상태를 유지할 수 있다.<br>
이 원리를 상태 기계 복제(state machine replication)라 하고 11장에서 이 주제를 다룬다.</p>
<p><strong>직렬성 트랜잭션</strong>
직렬성 트랜잭션에도 전체 순서 브로드캐스트가 사용될 수 있다.<br>
‘실제적인 직렬 실행’에서 모든 메시지가 스토어드 프로시저로 실행되는 결정적 트랜잭션을 나타내고 모든 노드가 메시지를 동일한 순서로 처리하면 데이터베이스의 파티션과 복제본은 일관된 상태를 유지한다.</p>
<p><strong>로그</strong>
전체 순서 브로드캐스트를 로그를 만드는 데에 사용할 수도 있다.<br>
메시지 전달은 로그에 추가하는 것과 비슷하다.<br>
모든 노드가 같은 메시지를 같은 순서로 전달 받는다.</p>
<p><strong>펜싱 토큰</strong>
펜싱 토큰을 제공하는 잠금 서비스를 구현하는 데에도 유용하다.<br>
잠금을 획득하는 모든 요청은 메시지로 로그에 추가된 후 일련번호를 받는다.<br>
일련번호는 단조증가하므로 이를 펜싱 토큰으로 사용할 수 있다.</p>
<h2 id="전체-순서-브로드캐스트-사용해-선형성-저장소-구현하기">전체 순서 브로드캐스트 사용해 선형성 저장소 구현하기</h2>
<p>선형성 시스템에서도 연산의 전체 순서가 있었다.
전체 순서 브로드캐스트와 선형성은 같은 의미인가?
완전히 같다고 볼 수 없으나 두 개념은 서로 밀접한 관계가 있다.</p>
<p><strong>비동기 vs 최신성 보장</strong>
전체 순서 브로드캐스트는 비동기식이다. 메시지는 고정된 순서로 신뢰성 있게 전달되는 것을 보장한다.<br>
그러나 언제 메시지가 전달될 지는 보장하지 않는다.<br>
선형성은 최신성 보장이다. 읽기가 최근에 쓰여진 값을 보는 것이 보장된다.</p>
<p><strong>전체 순서 브로드캐스트로 선형성 저장소 구현하기</strong>
전체 순서 브로드캐스트 구현을 기반으로 선형성 저장소를 만들 수 있다.<br>
사용자명으로 사용자 계정을 유일하게 식별하도록 보장하는 경우를 보자.</p>
<p>사용자명의 획득은 원자적 compare-and-set(이하 cas) 연산을 통해 이루어진다.<br>
연산 실행 시 값이 null(누구도 점유하지 않은 사용자명)인 경우 cas 연산이 성공한다.<br>
이미 할당된 경우라면 선형성에 의해 null이 아닌 값을 조회할 것이고, cas 연산이 실패한다.<br>
전체 순서 브로드캐스트를 추가 전용 로그로 사용하여 선형성 cas 연산을 다음과 같이 구현할 수 있다.</p>
<ul>
<li>메시지를 로그에 추가하여 점유를 원하는 사용자명을 가리킨다.</li>
<li>로그를 읽고, 추가한 메시지가 되돌아오기를 기다린다.</li>
<li>원하는 사용자명을 점유하려는 메시지가 있는지 확인한다.</li>
<li>첫 번째 메시지가 자신의 메시지라면 점유에 성공한다.</li>
<li>그러나 첫 번째 메시지가 다른 사용자의 것이라면 연산을 취소한다.</li>
</ul>
<p>로그 항목은 모든 노드에 같은 순서로 전달된다.<br>
모든 노드가 어떤 쓰기가 먼저 실행된 것인지 동의한다.<br>
충돌하는 쓰기 중 첫 번째 것을 승자로 하고 나머지는 어보트된다.<br>
이러한 절차는 선형성 쓰기를 보장하지만 선형성 읽기는 보장하지 않는다.<br>
각 노드는 로그로부터 비동기로 쓰기 내역이 갱신되기 때문이다. 그래서 오래된 값을 읽을 수 있다.<br>
그래서 이 절차는 엄밀히 말하면 선형성이 아닌, (그보다 조금 약한) 순차적 일관성 또는 타임라인 일관성 보장을 제공한다.</p>
<h2 id="선형성-저장소를-사용해-전체-순서-브로드캐스트-구현하기">선형성 저장소를 사용해 전체 순서 브로드캐스트 구현하기</h2>
<p>반대로 선형성 저장소를 기반으로 전체 순서 브로드캐스트를 구현하는 것도 가능하다.<br>
가장 쉬운 방법은 원자적 increment-and-get(이하 iag) 연산을 사용하는 것이다. (원자적 compare-and-set 연산을 사용해도 된다)<br>
알고리즘은 다음과 같다.</p>
<ul>
<li>메시지에 선형성 정수로 iag 연산을 수행하고 얻은 값을 일련번호로 포함한다.</li>
<li>그 후 메시지를 모든 노드에 전송한다.</li>
<li>수신자들은 일련번호 순서대로 메시지를 전달한다.</li>
</ul>
<p>선형성 레지스터로 얻은 숫자는 틈이 없는 순열을 형성한다.<br>
따라서 어떤 노드가 메시지 4를 전달하고 6을 받았다면 6을 전달하기 전에 5를 기다려야 한다는 것을 알 수 있다.<br>
반면 램포트 타임스탬프에서는 그렇지 않았다. 이것이 전체 순서 브로드캐스트와 타임스탬프 순서화의 핵심적인 차이다.</p>
<p>원자적 iag 연산을 만드는 것은 쉬워보인다. 결함이 발생하지 않으면 실제로 쉽다.<br>
그러나 노드가 죽거나 네트워크 연결이 끊긴 상황 등을 고려하면 쉬운 문제가 아니다.<br>
선형성 일련번호 생성기에 대해 고민하다보면 필연적으로 합의 알고리즘에 도달한다.<br>
<strong>선형성 iag(또는 cas) 레지스터와 전체 순서 브로드캐스트는 합의와 동등하다.</strong>
이 문제 중 하나를 해결할 수 있으면 다른 문제도 해결할 수 있다는 것이다.</p>
<h2 id="분산-트랜잭션과-합의">분산 트랜잭션과 합의</h2>
<p><strong>합의의 목적</strong></p>
<ul>
<li>여러 노드들이 무언가에 동의하게 만드는 것</li>
</ul>
<p>노드가 동의하는 것이 중요한 상황</p>
<ul>
<li>리더 선출
<ul>
<li>단일 리더 복제의 경우 리더가 어떤 노드인지 합의가 필요</li>
<li>스플릿 브레인 현상을 방지</li>
</ul>
</li>
<li>분산 트랜잭션의 원자적 커밋
<ul>
<li>여러 노드나 파티션에 걸친 트랜잭션이 노드 별로 성공, 실패의 결과가 다를 수 있음</li>
<li>성공이든 실패든 모든 노드가 트랜잭션의 하나의 결과에 동의해야 함</li>
<li>트랜잭션의 원자성 유지를 위함</li>
</ul>
</li>
</ul>
<h2 id="원자적-커밋과-2단계-커밋-2pc">원자적 커밋과 2단계 커밋 (2PC)</h2>
<p><strong>단일 노드에서 분산 원자적 커밋으로 단일 노드에서 커밋은 어떻게 결정되는가?</strong><br>
디스크에 있는 트랜잭션 로그에 커밋 레코드가 추가되어야 커밋이 된다.<br>
이후 데이터베이스가 죽더라도 디스크에 기록된 로그로 트랜잭션이 커밋된 것을 알 수 있다.<br>
노드에 부착된 특정 디스크 드라이브의 컨트롤러가 커밋을 원자적으로 만든다.</p>
<p><strong>여러 노드가 관여하는 경우는 이야기가 다르다.</strong><br>
예를 들면, 다음과 같은 경우다.</p>
<ul>
<li>파티셔닝된 데이터베이스에 다중 객체 트랜잭션을 사용</li>
<li>보조 색인을 사용하는 경우. 주 색인과 보조 색인이 서로 다른 노드에 존재한다.
각 노드에서 독립적으로 트랜잭션을 커밋 하면 어떤 노드는 성공, 어떤 노드는 실패할 가능성이 다분하다.<br>
이는 부분적인 성공, 실패를 의미하므로 원자성을 위반하며 이를 허용하면 노드 간의 일관성도 없어진다.</li>
</ul>
<p><strong>일단 커밋 후 문제가 있으면 취소하면 되지 않을까?</strong>
그러나 직후 발생한 또 다른 트랜잭션에서 커밋된 데이터에 의존할 가능성이 있다.<br>
이러한 트랜잭션도 모두 취소 되어야 한다. 그래서 커밋 후 취소하는 방법은 적절하지 않다.<br>
따라서 트랜잭션 커밋은 되돌릴 수 없다.<br>
노드가 트랜잭션을 커밋 하려면 다른 노드에서도 이 트랜잭션이 커밋되리라는 확신을 갖고 있어야 한다.</p>
<h2 id="2단계-커밋2pc-2-phase-commit-소개">2단계 커밋(2PC, 2-phase commit) 소개</h2>
<p>2단계 커밋은 여러 노드에 걸친 원자적 트랜잭션 커밋을 달성하는 알고리즘이다.</p>
<p><img src="/docs/data-intensive-application/09-9.png" alt="그림 9-9"><br>
<em>그림 9-9. 2단계 커밋(2PC)의 성공적인 실행</em></p>
<p><strong>코디네이터와 참여자</strong></p>
<ul>
<li>코디네이터
<ul>
<li>트랜잭션 관리자라고도 한다.</li>
<li>애플리케이션 프로세스 내에서 라이브러리 형태로 구현되거나</li>
<li>분리된 프로세스 또는 서비스로 제공될 수 있다.</li>
</ul>
</li>
<li>참여자
<ul>
<li>트랜잭션을 커밋하는 각 데이터베이스 노드</li>
</ul>
</li>
</ul>
<p><strong>2단계 커밋의 절차</strong></p>
<ul>
<li>애플리케이션이 여러 노드에 데이터를 기록한다.</li>
<li>애플리케이션이 커밋할 준비가 되면 코디네이터가 1단계를 시작한다. 각 노드에 준비 요청을 보낸다.</li>
<li>모든 참여자가 커밋 준비가 완료되면 2단계에서 커밋 요청을 한다.</li>
<li>커밋 준비가 되지 않은 참여자가 있다면 2단계에서 어보트 요청을 한다.</li>
</ul>
<h2 id="약속에-관한-시스템">약속에 관한 시스템</h2>
<p>위에서 설명한 내용 만으로는 2단계 커밋이 원자성을 어떻게 보장하는 지 명확하지 않다.</p>
<p>준비 요청과 커밋 요청은 2단계에서 손실될 가능성이 있기 때문이다.</p>
<p>과정을 더 자세히 보자.</p>
<ul>
<li>애플리케이션은 분산 트랜잭션을 시작하기를 원할 때 코디네이터에게 트랜잭션 ID를 요청한다. 이 트랜잭션 ID는 전역적으로 유일하다.</li>
<li>애플리케이션은 발급받은 트랜잭션 ID를 가지고 각 참여자에서 단일 노드 트랜잭션을 시작한다. 읽기와 쓰기는 이 과정에서 실행된다.
<ul>
<li>이 단계에서 노드가 죽거나 타임아웃 등의 문제가 발생하면 코디네이터나 참여자 중 누군가 어보트할 수 있다.</li>
</ul>
</li>
<li>이후 코디네이터가 준비 요청을 한다. 참여자가 준비 요청을 받으면 트랜잭션 커밋이 가능한지 점검한다.
<ul>
<li>가능하다고 판단이 되면 코디네이터에게 ‘네&rsquo;라고 응답을 한다.</li>
<li>이 응답은 이후 어떤 상황(노드가 죽거나, 디스크 공간이 부족한 경우 등)에서도 절대 번복될 수 없다.</li>
</ul>
</li>
<li>코디네이터가 준비 요청에 대한 응답을 받은 후, 트랜잭션을 커밋할지 어보트 할지 최종적으로 결정한다.
<ul>
<li>모든 참여자가 ‘네&rsquo;라고 응답해야 커밋으로 결정한다.</li>
<li>코디네이터가 추후 죽을 수도 있으므로 결정을 디스크의 트랜잭션 로그에 기록한다. 이를 커밋 포인트라 한다.</li>
<li>완료된 결정은 절대 되돌릴 수 없다.</li>
</ul>
</li>
<li>코디네이터가 최종 결정을 완료하였으니, 모든 참여자에게 커밋 또는 어보트 요청을 전송한다.
<ul>
<li>이 요청이 실패하거나 타임아웃이 발생하면 성공할 때 까지 영원히 재시도한다.</li>
<li>참여자가 죽은 경우라면 복구된 후에 커밋을 요청한다.</li>
</ul>
</li>
</ul>
<p>트랜잭션 커밋을 결정하는 참여자의 응답과 코디네이터의 결정은 번복될 수 없다.</p>
<p>이러한 약속이 2PC의 원자성을 보장한다.</p>
<h2 id="코디네이터-장애">코디네이터 장애</h2>
<p>앞에서 2PC 과정 중 문제가 발생하면 어떻게 진행되는 지 설명했다.</p>
<ul>
<li>1단계에서 문제가 발생하면 코디네이터가 트랜잭션을 어보트한다.</li>
<li>2단계에서 문제가 발생하면 코디네이터가 요청을 무한히 재시도한다.</li>
</ul>
<p>그런데 코디네이터가 죽으면 어떻게 되는가?<br>
코디네이터가 준비 요청을 보내기 전에 장애가 발생하면 참여자가 트랜잭션을 어보트할 수 있다.<br>
그런데 준비 요청에 ‘네&rsquo;라고 대답을 보낸 이후는 참여자가 일방적으로 어보트할 수 없다.<br>
코디네이터로부터 2단계 요청을 받을 때 까지 기다려야 한다.<br>
이런 상태의 트랜잭션을 의심스럽다 또는 <strong>불확실하다</strong>고 한다.</p>
<p><img src="/docs/data-intensive-application/09-10.png" alt="그림 9-10"><br>
<em>그림 9-10. 참여자들이 &ldquo;네&quot;라고 투표한 후 코디네이터가 죽는다. 데이터베이스 1은 커밋할지 어보트할지 알지 못한다.</em></p>
<p>데이터베이스1은 코디네이터의 커밋 요청을 대기하고 있다.<br>
이러한 경우 코디네이터가 복구되는 것을 기다릴 수 밖에 없다.<br>
다행이 코디네이터는 요청을 보내기 전에 커밋 로그를 기록했다.<br>
코디네이터가 복구되면 트랜잭션 로그를 읽어 의심스러운 트랜잭션들의 상태를 결정한다.<br>
커밋 레코드가 없는 트랜잭션은 어보트된다. 있다면 커밋 요청을 재시도할 것이고 2단계 과정도 완료될 것이다.<br>
2단계 커밋은 코디네이터가 복구될 때 까지 중단되므로 블로킹 원자적 커밋 프로토콜이라 한다.</p>
<h2 id="3단계-커밋">3단계 커밋</h2>
<p><strong>3단계 커밋</strong></p>
<ul>
<li>2PC의 대안으로 제안된 알고리즘</li>
<li>지연에 제한이 있는 네트워크, 응답 시간에 제한이 있는 노드를 전제로 한다. (→ 현실과 동떨어짐)</li>
<li>따라서 현실적인 분산 시스템에서 3PC를 적용하기는 어렵다.</li>
</ul>
<h2 id="현실의-분산-트랜잭션">현실의 분산 트랜잭션</h2>
<h3 id="분산-트랜잭션에-대한-엇갈린-평판">분산 트랜잭션에 대한 엇갈린 평판</h3>
<p><strong>긍정적</strong></p>
<ul>
<li>분산 시스템에서 원자적 커밋을 달성하여 안전성 보장을 제공</li>
</ul>
<p><strong>부정적</strong></p>
<ul>
<li>운영상의 문제 유발</li>
<li>성능 이슈의 원인
<ul>
<li>장애 복구에 필요한 부가적인 디스크 강제 쓰기(fsync), 부가적인 네트워크 왕복 시간을 강요</li>
<li>ex. MySQL : 분산 트랜잭션이 단일 노드 트랜잭션보다 10배 이상 느리다.</li>
</ul>
</li>
<li>분산 트랜잭션이 제공해주는 이점에 비해 비용이 너무 큰 것 아닌가?</li>
</ul>
<h3 id="두-가지-종류의-분산-트랜잭션">두 가지 종류의 분산 트랜잭션</h3>
<p><strong>데이터베이스 내부 분산 트랜잭션</strong></p>
<ul>
<li>분산 시스템(복제, 파티셔닝)을 지원하는 데이터베이스는 노드 사이의 내부 트랜잭션을 지원</li>
<li>트랜잭션에 참여하는 모든 노드는 동일한 데이터베이스 소프트웨어를 실행한다.</li>
<li>다른 시스템과 호환될 필요가 없어 프로토콜 선택, 구현이 자유롭고 최적화가 가능하다.</li>
</ul>
<p><strong>이종 분산 트랜잭션</strong></p>
<ul>
<li>참여자들이 각기 다른 기술을 기반으로 하는 경우</li>
<li>두 가지 서로 다른 벤더의 데이터베이스가 참여하는 경우</li>
<li>메시지 브로커와 같은 비데이터베이스 시스템이 참여하는 경우</li>
<li>서로 다른 시스템 간의 원자적 커밋을 보장해야 함</li>
<li>다양한 시스템들이 강력한 방법으로 통합될 수 있게 한다.</li>
</ul>
<p><strong>이종 분산 트랜잭션의 절차와 제약</strong><br>
이종 분산 트랜잭션의 한 가지 예시를 살펴보자.</p>
<p><strong>예시 : 메시지 브로커와 메시지를 처리하는 데이터베이스</strong><br>
메시지 브로커에서 메시지를 데이터베이스로 전송하고, 데이터베이스가 이를 처리하는 상황이다.<br>
분산 트랜잭션의 커밋과 어보트는 다음과 같이 진행되어야 한다.</p>
<ul>
<li>커밋
<ul>
<li>메시지 브로커에서 데이터베이스로 메시지 전달이 성공</li>
<li>메시지를 처리하는 데이터베이스 트랜잭션이 성공</li>
<li>이 두 과정이 모두 성공해야 분산 트랜잭션을 커밋한다.</li>
</ul>
</li>
<li>어보트
<ul>
<li>위 커밋의 두 과정 중 하나라도 실패하면 어보트해야 한다.</li>
<li>진행 과정에서 발생한 부수 효과도 모두 폐기되어야 한다.</li>
<li>이렇게 함으로써 모든 메시지는 결과적으로 한 번만 처리되도록 보장할 수 있다.</li>
</ul>
</li>
</ul>
<p><strong>이종 분산 트랜잭션의 제약</strong><br>
트랜잭션의 영향을 받는 시스템이 모두 동일한 원자적 커밋 프로토콜을 사용할 수 있어야 한다.</p>
<ul>
<li>메시지 처리가 이메일을 전송하는 부수 효과를 유발하는 경우 이메일 서버도 2단계 커밋을 지원해야 한다.</li>
<li>지원하지 않으면 트랜잭션 재시도 과정에서 이메일이 두 번이상 전송될 수 있음</li>
<li>트랜잭션 어보트 시 부수효과도 같이 폐기되어야 안전한 재시도를 보장할 수 있다.</li>
</ul>
<h2 id="xa-트랜잭션">XA 트랜잭션</h2>
<p><strong>XA</strong></p>
<ul>
<li>X/Open XA(eXtended Architecture)</li>
<li>이종 분산 트랜잭션을 2단계 커밋으로 구현하는 표준</li>
<li>여러 관계형 데이터베이스와 메시지 브로커에서 지원된다.</li>
<li>트랜잭션 코디네이터와 연결되는 인터페이스를 제공하는 C API
<ul>
<li>네트워크 프로토콜이 아니다.</li>
<li>자바의 경우 JTA(Java Transaction API)로 XA를 구현</li>
</ul>
</li>
</ul>
<p><strong>드라이버</strong></p>
<ul>
<li>애플리케이션이 네트워크 드라이버나 클라이언트 라이브러리를 사용해 데이터베이스, 메시징 서비스와 통신한다고 가정한다.</li>
<li>드라이버가 XA를 지원한다면 연산이 분산 트랜잭션에 속하는 지를 판단하기 위해 XA API를 호출한다. 분산 트랜잭션인 경우 데이터베이스 서버로 필요한 정보를 보낸다.</li>
<li>추가로 드라이버는 코디네이터가 준비, 커밋, 어보트 요청을 할 수 있도록 코디네이터에게 콜백을 제공한다.</li>
</ul>
<p><strong>코디네이터</strong></p>
<ul>
<li>XA API를 구현한다.</li>
<li>보통 트랜잭션을 시작하는 애플리케이션과 같은 프로세스에 로딩되는 단순한 라이브러리
<ul>
<li>참여자에게 요청은 드라이버의 콜백을 통해 전송한다.</li>
<li>결정을 기록하기 위해 로컬 디스크의 로그를 사용한다.</li>
</ul>
</li>
</ul>
<p><strong>복구 : 애플리케이션 프로세스가 죽거나 장비가 죽는 경우</strong></p>
<ul>
<li>코디네이터도 같이 죽고 몇몇 트랜잭션들이 의심스러운 상태가 된다.</li>
<li>복구 과정은 이전의 2PC와 동일하다.</li>
</ul>
<h2 id="의심스러운-상태에-있는-동안-잠금을-유지하는-문제">의심스러운 상태에 있는 동안 잠금을 유지하는 문제</h2>
<p>트랜잭션이 의심스러운 상태에 있는 동안 트랜잭션과 관련된 객체에 잠금이 설정될 수 있다.<br>
잠금은 트랜잭션이 커밋, 어보트 되기 전까지 해제가 불가능하다. (그림 9-9의 음영 처리 영역 참고)<br>
코디네이터의 로그가 손실된 경우 관리자가 수동으로 잠금을 해제해야 하는 경우도 있다.<br>
잠금이 유지되면 다른 트랜잭션 실행에 지장을 초래하여 애플리케이션에도 치명적이다.</p>
<h2 id="코디네이터-장애에서-복구하기">코디네이터 장애에서 복구하기</h2>
<p><strong>고아가 된 의심스러운 트랜잭션</strong></p>
<p>이론과 달리 현실에서는 코디네이터가 복구 과정에서 결과를 결정할 수 없는 트랜잭션이 존재</p>
<ul>
<li>트랜잭션 로그가 손실된 경우</li>
<li>소프트웨어 버그</li>
</ul>
<p>이런 트랜잭션에 의한 잠금은 자동으로 해소되지 않아 관리자의 개입을 필요로 한다.</p>
<ul>
<li>데이터베이스 서버 재부팅을 해도 잠금이 유지된다.</li>
<li>잠금이 자동으로 해소되면 원자성이 깨질 위험이 있기 때문</li>
<li>관리자가 참여자의 상태를 조사하고 커밋, 롤백을 수동으로 결정한다.</li>
</ul>
<p><strong>경험적 결정(heuristic decision)</strong>
관리자가 개입하여 해결하는 것은 많은 수작업을 요구하고 (심각한 상황이므로) 높은 스트레스를 유발한다.<br>
그래서 여러 XA 구현에서 참여자가 코디네이터의 결정 없이 트랜잭션의 커밋 여부를 일방적으로 결정할 수 있도록 하는 경험적 결정이라는 비상 탈출구를 제공한다.<br>
그런데 이는 2PC의 약속을 깨뜨리기 때문에 원자성을 위반할 위험이 있다.<br>
따라서 경험적 결정은 평상시에 사용하는 것이 아닌, 큰 장애 상황을 벗어나기 위한 용도로 의도된 것이다.</p>
<h2 id="분산-트랜잭션의-제약">분산 트랜잭션의 제약</h2>
<p>XA 트랜잭션은 여러 참여 데이터 시스템이 서로 일관성을 유지하는 문제를 해결해준다.<br>
그러나 다음과 같은 운영상 문제를 유발한다.</p>
<p><strong>코디네이터가 전체 시스템의 단일 장애점(single point of failure)</strong></p>
<ul>
<li>코디네이터가 복제되지 않고 단일 장비에서만 실행되면 전체 시스템의 단일 장애점이 된다.</li>
<li>코디네이터에 장애가 생기면 결과적으로 애플리케이션 전체에 영향을 주기 때문</li>
<li>그럼에도 불구하고 여러 코디네이터 구현은 고가용성을 제공하지 않거나 기본적인 복제만 지원</li>
</ul>
<p><strong>애플리케이션 서버가 상태를 갖게(stateful) 된다</strong></p>
<ul>
<li>서버 애플리케이션은 영속적인 상태를 데이터베이스에 저장한다.</li>
<li>이는 서버가 무상태성(stateless)이어야 확장성에 유리하기 때문</li>
<li>코디네이터가 애플리케이션 서버의 일부가 되면 트랜잭션 로그가 서버의 로컬 디스크에 저장된다.</li>
<li>따라서 서버가 상태를 갖게 되는 문제가 발생한다.</li>
</ul>
<p><strong>XA에서 제공할 수 있는 기능에도 제약이 존재</strong></p>
<ul>
<li>XA는 여러 데이터 시스템과 호환되는 만큼 공통 분모에 해당하는 기능만 제공할 수 있음</li>
<li>여러 시스템에 걸친 교착상태를 감지할 수 없음
<ul>
<li>이러한 기능을 제공하려면 서로 다른 시스템이 각 트랜잭션이 대기중인 잠금에 대한 정보를 교환할 수 있는 프로토콜을 필요로 함</li>
</ul>
</li>
<li>직렬성 스냅숏 격리(SSI)를 지원하지 못함
<ul>
<li>SSI를 지원하려면 여러 시스템에 걸친 충돌을 식별할 수 있는 프로토콜이 필요</li>
</ul>
</li>
</ul>
<p><strong>시스템이 결함에 취약해지는 문제</strong>
XA가 아닌 데이터베이스 내부 분산 트랜잭션은 제약이 그리 크지 않다.<br>
가령 분산 환경에서의 SSI를 지원한다. 2PC가 성공적으로 트랜잭션을 커밋하려면 모든 참여자가 응답해야 한다.<br>
즉, 시스템의 어떤 부분이라도 고장이 나면 트랜잭션이 실패한다.<br>
따라서 분산 트랜잭션은 장애를 증폭시키는 경향이 있어 시스템이 내결함성을 보장하지 못하게 한다.</p>
<h2 id="내결함성을-지닌-합의">내결함성을 지닌 합의</h2>
<p>비공식적으로 합의는 여러 노드가 어떤 것에 동의하는 것을 의미한다.<br>
여러 사용자가 동시에 동일한 좌석 예약을 하는 경우 처럼 공존할 수 없는 연산들 중 어떤 것이 승자가 되는 지를 결정하기 위해 합의 알고리즘을 사용할 수 있다.<br>
하나 또는 그 이상의 노드들이 값을 제안하고 합의 알고리즘이 값 중 하나를 결정한다.</p>
<h3 id="합의-알고리즘의-속성">합의 알고리즘의 속성</h3>
<p>이 때 합의 알고리즘은 다음 속성을 만족해야 한다.</p>
<ul>
<li><strong>균일한 동의</strong> : 어떤 두 노드도 다르게 결정하지 않는다.</li>
<li><strong>무결성</strong> : 어떤 노드도 두 번 결정하지 않는다.</li>
<li><strong>유효성</strong> : 한 노드가 값 v를 결정한다면 v는 어떤 노드에서 제안된 것이다.</li>
<li><strong>종료</strong> : 죽지 않은 노드는 결국 어떤 값을 결정한다.</li>
</ul>
<p><strong>균일한 동의, 무결성, 유효성</strong>
균일한 동의와 무결성 속성은 합의의 핵심 아이디어를 정의한다.<br>
모두 같은 결과로 결정하며 한 번 결정하면 결정을 번복 할 수 없다.<br>
유효성 속성은 뻔한 해결책을 배제하기 위해 존재한다.<br>
가령 무엇을 제안하든 상관 없이 항상 null로 결정하는 알고리즘도 있을 수 있다.<br>
이러한 알고리즘은 균일한 동의와 무결성을 만족하지만 유효성을 만족하지는 못한다.</p>
<p><strong>종료</strong>
종료는 내결함성과 관련된 속성이다.<br>
내결함성을 만족시킬 필요가 없으면 종료를 제외한 세 개의 속성을 만족하는 것은 간단하다.<br>
한 노드를 ‘독재자&rsquo;로 결정하여 그 노드가 모든 결정을 내리게 하면 된다.<br>
그러나 ‘독재가&rsquo; 노드에 장애가 발생하면 시스템은 어떤 결정도 내릴 수 없다.<br>
2단계 커밋에서 코디네이터가 죽는 경우와도 같다.</p>
<p>종료 속성에 의해 합의 알고리즘에서 합의는 중단될 수 없다. 반드시 진행되어야 한다.<br>
일부 노드에 장애가 발생해도 나머지 노드는 반드시 결정을 내려야 한다.<br>
종료는 활동성 속성이고 다른 세 개는 안전성 속성이다.</p>
<h3 id="합의-알고리즘의-가정">합의 알고리즘의 가정</h3>
<p><strong>죽은 노드는 돌아오지 않는다</strong><br>
합의 시스템 모델은 어떤 노드가 죽는 경우 그 노드가 돌아오지 않는다고 가정한다.<br>
지진과 같은 자연재해로 인해 노드가 파괴되는 경우를 고려하면 노드가 돌아온다고 가정할 수 없다.<br>
이런 상황에서 노드가 복구되기를 기다리는 알고리즘은 절대로 종료 속성을 만족할 수 없다.<br>
가령 코디네이터의 복구를 전제로 하는 2PC는 종료 속성을 만족하지 못한다.</p>
<p><strong>과반수의 노드는 존재해야 한다</strong>
모든 노드가 죽으면 결정 자체가 불가능하다.<br>
어떤 합의 알고리즘이든 노드의 과반수 이상이 올바르게 동작해야 합의를 달성할 수 있다.<br>
과반수의 노드에 장애가 발생하여도 안전성 속성(균일한 동의, 무결성, 유효성)은 항상 만족한다.<br>
결정을 내리진 못하더라도 유효하지 않은 결정을 내려서 합의 시스템을 오염시키지는 않는다.</p>
<p><strong>비잔틴 결함은 없다고 가정한다</strong><br>
(* 참고 : 비잔틴 결함)<br>
비잔틴 결함을 가정하면 합의 알고리즘의 안전성 속성을 위반할 수 있다.</p>
<h2 id="합의-알고리즘과-전체-순서-브로드캐스트">합의 알고리즘과 전체 순서 브로드캐스트</h2>
<p>내결함성을 지닌 합의 알고리즘의 대다수는 합의의 형식적 모델을 직접 사용하지 않는다.<br>
<em>(합의의 형식적 모델 : 합의의 네 개의 속성을 만족하면서 하나의 값을 제안하고 결정)</em><br>
대신 값의 순차열에 대해 결정하여 전체 순서 브로드캐스트 알고리즘을 구현한다.<br>
각 노드는 매 회마다 다음에 보낼 메시지를 제안하고, 결정한다.<br>
전체 순서 브로드캐스트는 합의를 여러 번 반복하는 것과 동일하다.</p>
<p>각 합의 결정이 하나의 메시지 전달에 해당한다.</p>
<ul>
<li>균일한 동의 : 모든 노드는 같은 메시지를 같은 순서로 전달한다.</li>
<li>무결성 : 메시지는 중복되지 않는다.</li>
<li>유효성 : 메시지는 조작되거나, 오염되지 않는다.</li>
<li>종료 : 메시지는 반드시 전달되며, 손실되지 않는다.</li>
</ul>
<h2 id="단일-리더-복제와-합의">단일 리더 복제와 합의</h2>
<p><strong>단일 리더 복제는 합의 알고리즘의 속성을 만족하는가?</strong><br>
단일 리더 복제는 모든 쓰기를 리더에서 처리하고 이를 같은 순서로 모든 팔로워에게 적용한다.<br>
본질적으로 전체 순서 브로드캐스트와 동일해보인다. 그런데 단일 리더 복제에서는 합의를 고려하지 않았다.</p>
<p>합의를 고려할 필요가 없었던 것일까? 이는 리더가 어떻게 선택되는 지와 관련이 있다.<br>
만약 운영 측에서 리더를 수동으로 설정한다면 이는 ‘독재자’ 노드가 모든 것을 결정하는 합의와 같다.<br>
이 방식은 합의의 안전성 속성을 만족하지만, 종료 속성을 만족하지 못한다고 앞서 언급했다.</p>
<p><strong>합의를 해결하기 위해 합의가 필요하다?</strong>
단일 리더 복제에서 리더가 죽으면 새로운 리더를 선출하는 장애 복구 과정이 수행될 수 있다.<br>
장애 복구가 수행되는 것을 가정하면 단일 리더 복제는 내결함성을 지닌 전체 순서 브로드캐스트와 동일해 보인다.<br>
전체 순서 브로드캐스트와 합의의 동등성에 대해 앞서 언급했다.<br>
내결함성을 지닌 전체 순서 브로드캐스트를 구현하면 합의의 문제를 해결할 수 있어 보인다.</p>
<p>그런데 한 가지 문제가 있다. 리더를 선출하는 과정에서 합의가 필요하다.<br>
이 과정이 잘못되면 둘 이상의 노드가 자신을 리더로 생각하는 스플릿 브레인 현상이 발생할 수 있다.<br>
합의는 전체 순서 브로드캐스트 문제와 동등하고, 전체 순서 브로드캐스트는 단일 리더 복제와 동일해 보인다.<br>
단일 리더 복제는 리더가 필요하다. 리더를 선출하기 위해 리더가 필요하다는 결론으로 이어진다.<br>
합의를 해결하기 위해 합의가 필요하다는 난제에 부딪히게 된다.</p>
<h2 id="에포크-번호-붙이기와-정족수">에포크 번호 붙이기와 정족수</h2>
<p><strong>에포크 번호와 리더 선출</strong><br>
지금까지 설명한 합의 프로토콜은 리더가 유일함을 보장하지는 않는다.<br>
대신에 특정 시점에 진행된 투표에서 선출된 리더가 유일함을 보장하는 것은 가능하다.<br>
이 특정 시점을 구별하기 위해 번호를 매기는데, 이를 에포크 번호라 한다.</p>
<p>현재의 리더가 죽었다고 판단되면 새 리더를 선출하기 위해 노드 사이에서 투표가 시작된다.<br>
이 선출은 에포크 번호를 증가시킨다. 에포크 번호는 전체 순서가 있으며 단조 증가한다.<br>
스스로 리더라 생각하는 둘 이상의 노드에 의견 충돌이 있는 경우 에포크 번호가 높은 리더가 승리한다.</p>
<p><strong>리더는 자신이 유효한 리더임을 어떻게 확신할 수 있나?</strong>
리더의 입장에서는 자신보다 에포크 번호가 높은 리더가 있는지 확신할 수 없다.<br>
다른 노드도 자신을 리더로 생각할까? 리더는 결정을 내리기 전에 이를 먼저 확인해야 한다.<br>
리더는 모든 결정 마다 제안한 값에 대해 다른 노드에게 찬반 요청을 보낸다.<br>
요청을 받은 노드는 요청을 보낸 노드보다 에포크 번호가 높은 리더를 알지 못한다면 찬성한다.<br>
그리고 리더는 정족수의 찬성 표를 얻어야 한다.</p>
<p>노드 정족수의 찬성표를 얻으면 결정할 수 있는 것일까? 한 가지 조건이 더 필요하다.<br>
찬성에 투표한 노드 중에서 최소 하나의 노드는 가장 최근에 진행된 리더 선출에 참여했어야 한다.<br>
그 노드가 찬성했다는 것은 에포크 번호가 더 높은 리더가 없다는 것을 의미하고, 따라서 리더 스스로 자신이 여전히 유효한 리더라고 확신할 수 있음을 의미한다.<br>
유효한 리더라고 확신한 이후, 리더는 자신있게 결정을 내릴 수 있다.</p>
<p><strong>2단계 커밋과 내결함성 합의 알고리즘의 차이</strong>
방금 살펴본 알고리즘이 내결함성을 지닌 합의 알고리즘의 대표적인 방식이다.<br>
내결함성을 지닌 합의 알고리즘과 2단계 커밋은 다소 비슷해 보이지만 다르다.<br>
2단계 커밋은 모든 참여자로부터 ‘네&rsquo;라는 응답을 요구한다.<br>
내결함성을 지닌 합의 알고리즘은 노드의 과반수로부터만 투표를 받으면 된다.<br>
그리고 합의 알고리즘은 새로운 리더가 선출된 이후 노드를 일관적인 상태로 만들어주는 복구 과정을 정의한다.<br>
복구 과정을 통해 안전성 속성이 항상 만족되도록 보장한다.<br>
이러한 차이점이 합의 알고리즘의 정확성과 내결함성의 핵심이다.</p>
<h2 id="합의의-제약">합의의 제약</h2>
<p>합의 알고리즘을 통해 분산 시스템에서 일관성과 내결함성을 모두 달성할 수 있다. 그러나 합의 알고리즘을 유지하기 위한 비용이 적지 않다.</p>
<h3 id="동기식-복제가-강제됨">동기식 복제가 강제됨</h3>
<p>제안이 결정되기 전에 노드가 제안에 투표하는 과정은 일종의 동기식 복제다.<br>
동기식 복제가 비동기 복제보다 일관성, 지속성 측면에서 안전함에도 불구하고 성능을 이유로 선호되지 않는다.</p>
<h3 id="과반수에-대한-제약">과반수에 대한 제약</h3>
<p>합의 시스템은 항상 엄격한 과반수가 동작하는 것을 요구한다.<br>
노드 한 대의 장애를 견디려면 최소한 세 대의 노드, 두 대의 장애를 견디려면 최소 다섯 대의 노드가 필요하다.<br>
네트워크 장애로 일부 노드가 다른 노드와 연결이 끊기면 과반수의 부분만 동작이 가능하고 나머지는 차단된다.</p>
<h3 id="노드-수-변경에-대한-제약">노드 수 변경에 대한 제약</h3>
<p>대부분 합의 알고리즘은 투표에 참여하는 노드 집합이 고정되어 있다고 가정한다.<br>
따라서 클러스터에 노드를 그냥 추가하거나 제거할 수 없다.<br>
합의 알고리즘의 동적 멤버십 확장은 클러스터에 있는 노드 집합이 시간이 지남에 따라 바뀌는 것을 허용하지만 정적 멤버십 알고리즘보다 훨씬 이해하기 어렵다.</p>
<h3 id="네트워크-문제에-민감">네트워크 문제에 민감</h3>
<p>합의 시스템은 장애를 감지하기 위해 타임아웃에 의존한다.<br>
타임아웃은 노드의 문제와 네트워크 문제를 구별하지 못해 네트워크 문제 시에도 노드가 죽었다고 판단할 수 있다.<br>
이러한 오류로 인해 리더가 자주 새로 선출되면 시스템이 본연의 일이 아닌 리더를 선출하는 데 더 집중하게 된다.<br>
이러한 현상은 성능 문제로 연결된다.</p>
<h2 id="멤버십과-코디네이션-서비스">멤버십과 코디네이션 서비스</h2>
<p>주키퍼나 etcd 같은 프로젝트는 종종 ‘분산 키-값 저장소&rsquo;나 ‘코디네이션 설정 서비스&rsquo;라고 설명된다.<br>
주키퍼와 etcd는 메모리에 적재가 가능한 작은 양의 데이터를 보관하도록 설계되었다.<br>
이 소량의 데이터는 내결함성을 지닌 전체 순서 브로드캐스트를 통해 모든 노드에 걸쳐 복제된다.<br>
주키퍼는 구글의 처비(Chubby) 잠금 서비스를 모델로 삼아 전체 순서 브로드캐스트 뿐만 아니라 분산 시스템을 구축 시 유용한 다른 기능들도 구현한다. 그 기능들은 다음과 같다.</p>
<h3 id="선형성-원자적-연산">선형성 원자적 연산</h3>
<p>원자적 compare-and-set 연산을 사용해 잠금을 구현할 수 있다.<br>
여러 노드가 동시에 같은 연산을 수행하려고 하면 그것들 중 하나만 성공한다.<br>
합의 프로토콜은 노드에 장애가 나거나 어느 시점에 네트워크가 끊기더라도 그 연산이 원자적이고 선형적일 것을 보장한다.<br>
분산 잠금을 보통 클라이언트에 장애가 난 경우 결국에는 해제되도록 만료 시간이 있는 임차권(lease)으로 구현된다.</p>
<h3 id="연산의-전체-순서화">연산의 전체 순서화</h3>
<p>어떤 자원이 잠금이나 임차권으로 보호될 때는 프로세스가 중단되는 경우 클라이언트들이 서로 충돌하는 것을 막기 위해 펜싱 토큰이 필요하다.<br>
펜싱 토큰은 잠금을 획득할 때마다 단조 증가하는 어떤 숫자다.<br>
주키퍼는 모든 연산에 전체 순서를 정하고 각 연산에 단조 증가하는 트랜잭션 ID(zxid)와 버전 번호(cversion)를 할당하여 이를 제공한다.</p>
<h3 id="장애-감지">장애 감지</h3>
<p>클라이언트는 주키퍼 서버에 수명이 긴 세션을 유지하고 클라이언트와 서버는 주기적으로 하트비트(heartbeat)를 교환해서 다른 쪽이 여전히 살아 있는지 확인한다.<br>
연결이 일시적으로 끊기거나 주키퍼 노드에 장애가 나더라도 세션은 살아있다.<br>
그러나 세션 타임아웃보다 긴 기간 동안 하트비트가 멈추면 주키퍼는 세션이 죽었다고 선언한다.<br>
세션에서 획득한 잠금은 세션이 타임아웃 되었을 때 자동으로 해제되도록 설정할 수 있다.<br>
주키퍼에서는 이를 단명 노드(ephemeral node)라 한다.</p>
<h3 id="변경-알림">변경 알림</h3>
<p>클라이언트는 다른 클라이언트가 생성한 잠금과 값을 읽을 수 있을 뿐만 아니라 거기에 변경이 있는지 감시할 수도 있다.<br>
따라서 클라이언트는 다른 클라이언트가 언제 클러스터에 합류했는지 혹은 다른 클라이언트에 장애가 났는지 알아챌 수 있다.<br>
알림을 구독함으로써 클라이언트는 변경을 발견하기 위해 주기적으로 폴링해야 하는 필요를 피할 수 있다.</p>
<p>방금 살펴본 기능들 중 오직 선형성 원자적 연산만 실제로 합의가 필요하다.<br>
그러나 주키퍼를 분산 코디네이션에 매우 유용하게 만들어주는 것은 이러한 기능들의 조합이다.</p>
<h2 id="작업을-노드에-할당하기">작업을 노드에 할당하기</h2>
<p>주키퍼/처비 모델이 잘 동작하는 경우가 몇 가지 있다.
하나는 여러 개의 프로세스나 서비스가 있고 그 중 하나가 리더 혹은 주 구성요소로 선택되어야 하는 경우다.<br>
리더에 장애가 발생하면 다른 노드 중 하나가 넘겨 받아야 한다. 이는 단일 리더 설정에서 유용하다.<br>
또 다른 경우는 파티셔닝된 자원이 있고 어떤 파티션을 어떤 노드에 할당해야 할 지 결정하는 경우다.<br>
새 노드들이 클러스터에 합류하면서 부하의 재균형화를 위해 어떤 파티션들은 새로운 노드로 이동해야 한다.<br>
혹은 노드가 제거되거나 장애가 나면 다른 노드들이 장애가 난 노드의 작업을 넘겨받아야 한다.</p>
<p>이런 종류의 작업은 주키퍼에서 원자적 연산, 단명 노드, 알림을 신중하게 사용하면 잘 수행할 수 있다.<br>
심지어 사람의 개입이 없이도 애플리케이션이 결함에서 자동으로 복구되도록 할 수 있다.<br>
물론 쉽지는 않지만 합의 알고리즘을 밑바닥 부터 직접 구현하는 방법보다는 훨씬 낫다.</p>
<p>애플리케이션은 처음에는 단일 노드에서 실행될 지 모르지만 이후 수천 대의 노드로 늘어날 수도 있다.<br>
매우 많은 노드에서 과반수 투표를 수행하는 것은 비효율적이다.<br>
주키퍼는 대신 고정된 수의 노드에서 실행되고 이 노드들 사이에서 과반수 투표를 수행한다.<br>
주키퍼는 노드들을 코디네이트 하는 작업의 일부를 외부 서비스에 위탁하는 방법을 제공한다.</p>
<h2 id="서비스-찾기">서비스 찾기</h2>
<p>주키퍼, etcd, 콘술(Consul)은 서비스 찾기 용도로도 자주 사용된다.<br>
(* 서비스 찾기(service discovery) : 특정 서비스에 연결하기 위해 IP 주소를 알아내는 것)<br>
서비스 찾기가 실제로 합의가 필요한 지는 명확하지 않다.<br>
DNS의 경우도 선형성을 보장하지 않지만 이것이 보통 문제가 되지는 않는다.</p>
<p>리더 선출의 경우는 합의가 필요하고, 합의 시스템이 리더가 누구인지를 알면 다른 서비스들이 리더가 누구인지 찾는데 그 정보를 사용하는 것도 타당하다.<br>
어떤 합의 시스템은 읽기 전용 캐시 복제 서버를 지원한다.<br>
이 복제 서버는 합의 알고리즘의 모든 결정에 대한 로그를 비동기로 받지만 능동적으로 투표에 참여하지는 않는다.<br>
이 복제 서버는 선형성을 보장하지 않아도 되는 읽기 요청을 서비스할 수 있다.</p>
<h2 id="멤버십-서비스">멤버십 서비스</h2>
<p>주키퍼와 유사 프로젝트들은 오랜 멤버십 서비스 연구 역사의 일부로 볼 수 있다.<br>
멤버십 서비스는 클러스터에서 어떤 노드가 현재 살아있는 멤버인지 결정한다.<br>
장애 감지를 합의와 연결하여 노드들이 어떤 노드가 살아있고 죽었는지에 동의할 수 있다.<br>
물론 기약 없는 네트워크 지연 때문에 노드에 장애가 발생한 것인지 확실히 알 수는 없고, 잘못 판단할 수 있다.<br>
그럼에도 불구하고 합의는 시스템에서 어떤 노드가 현재 멤버십을 구성하는 지 동의하는데 매우 유용하다.</p>

	<br>

<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8543127460401091"
     crossorigin="anonymous"></script>

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-8543127460401091"
     data-ad-slot="3689386360"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<br>
<script src="https://utteranc.es/client.js"
        repo="devkuma/blog-comments"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>	
	
	
	
<div class="text-muted mt-5 pt-3 border-top">
    최종 수정 : 2022-04-15</div>

</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Toolkit" aria-label="Toolkit">
    <a target="_blank" rel="noopener" href="https://toolkit.devkuma.com" aria-label="Toolkit">
      <i class="fas fa-tools"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Favorites" aria-label="Favorites">
    <a target="_blank" rel="noopener" href="/favorites/" aria-label="Favorites">
      <i class="fa fa-star"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/devkuma" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Blog" aria-label="Blog">
    <a target="_blank" rel="noopener" href="https://blog.devkuma.com" aria-label="Blog">
      <i class="fab fa-blogger"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Facebook" aria-label="Facebook">
    <a target="_blank" rel="noopener" href="https://www.facebook.com/redfreek2c" aria-label="Facebook">
      <i class="fab fa-facebook"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2024
    <span class="td-footer__authors">The devkuma</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <style>
.markmap > svg {
  width: 100%;
  height: 300px;
}
</style>
<script>
window.markmap = {
  autoLoader: {
      manual: true,
      onReady() {
        const { autoLoader, builtInPlugins } = window.markmap;
        autoLoader.transformPlugins = builtInPlugins.filter(plugin => plugin.name !== 'prism');
      },
  },
};
</script>
<script src="https://cdn.jsdelivr.net/npm/markmap-autoloader"></script>
<script src='/js/deflate.js'></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
      integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
        integrity="sha512-LQNxIMR5rXv7o+b1l8+N1EZMfhG7iFZ9HhnbJkTp4zjNr5Wvst75AqUeFDxeRUa7l5vEDyUiAip//r+EFLLCyA=="
        crossorigin="anonymous">
</script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/mhchem.min.js"
        integrity="sha512-mxjNw/u1lIsFC09k/unscDRY3ofIYPVFbWkP8slrePcS36ht4d/OZ8rRu5yddB2uiqajhTcLD8+jupOWuYPebg=="
        crossorigin="anonymous">
</script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
       integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" crossorigin="anonymous"
       onload='renderMathInElement(document.body, null);'>
</script>
<script src="/js/main.min.2f85d4ec1ab4f7035a711b6a99287a4254c19ff36a2312be1a3ce579b247cc9c.js" integrity="sha256-L4XU7Bq09wNacRtqmSh6QlTBn/NqIxK&#43;GjzlebJHzJw=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js" integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>