<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>

  <style>
    .chart div {
      background-color: powderblue;
      text-align: right;
      margin: 1px;
      transition: width 0.5s ease-in-out;
      animation: fade-in 0.5s ease 0s 1 normal;
    }
    @keyframes fade-in {
      0% { opacity: 0 }
      100% {opacity: 1 }
    }
  </style>
</head>
<body>

<div class="chart"/>

<script src="https://d3js.org/d3.v7.js"></script>

<script>
  function barchart(data) {
    const chart = d3.select(".chart")
                    .selectAll("div")
                    .data(data)
                    .style("width", function(d) { return d + "px"; })
                    .text( d => d);

    chart.enter()
         .append("div")
         .style("width", function(d) { return d + "px"; })
         .text( d => d)

    chart.exit().remove();
  }

  function updatebar() {
    ndata = Math.floor(Math.random() * 5) + 5; // [5, 10)
    data = d3.range(0, ndata).map(() => Math.floor(Math.random() * 300));
    barchart(data);
  }

  setInterval(updatebar, 1000);
</script>

</body>
</html>