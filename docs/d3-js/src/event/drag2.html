<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>drag</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>

    <div id="d3Graph" style="border: lightgray solid 1px;width: 100%;height: 200px;">Drag here</div>

    <script>
        var div = d3.selectAll("div")
            .call(
                d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    .on("end", dragended)
            );

        const divMsg = div.append("p");

        var dragged
        var draggedCount = 0;

        // 드래그 시작 호출되는 함수
        function dragstarted() {
            divMsg.text("");
            divMsg.append("p").text("dragstarted: " + new Date());
            dragged = divMsg.append("p");
            draggedCount = 0;
        }

        // 드래그하는 동안 호출되는 함수
        function dragged() {
            dragged.text("dragged: " + (draggedCount++));
        }

        // 드래그 종료시 호출되는 함수
        function dragended() {
            divMsg.append("p").text("dragended  " + new Date());
            dragging = false;

            // d3.selectAll("div")
            //     .on(".drag", null);
        }
    </script>

</body>

</html>